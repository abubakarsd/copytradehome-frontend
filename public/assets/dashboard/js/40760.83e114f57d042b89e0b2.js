"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[40760],{259611:(e,t,i)=>{i.d(t,{calculateMinMax:()=>S,collectAllPaths:()=>C,compareTwoCollectionsByIds:()=>x,findFirst:()=>g,indexOf:()=>y,intersect:()=>p,join:()=>_,lowerbound:()=>l,lowerboundExt:()=>s,mapEntriesGenerator:()=>M,minMax:()=>P,moveAfter:()=>f,moveBefore:()=>m,moveToHead:()=>d,nestedMapGenerator:()=>b,removeEmptyObjectsFromRecordInplace:()=>I,removeItemFromArray:()=>v,revertRecord:()=>k,subtract:()=>u,sum:()=>w,upperbound:()=>h});var n=i(90570),r=i(849084),o=i(185842);function a(e,t){return e<t}function s(e,t,i,n,r){let o=r-n;for(;0<o;){const r=o>>1,a=n+r;i(e(a),t)?(n=a+1,o-=r+1):o=r}return n}function l(e,t,i,n=0,r=e.length){return s((t=>e[t]),t,i,n,r)}function c(e,t,i=0,n=e.length){return l(e,t,a,i,n)}function h(e,t,i,n=0,r=e.length){let o=r-n;for(;0<o;){const r=o>>1,a=n+r;i(t,e[a])?o=r:(n=a+1,o-=r+1)}return n}function u(e,t){return e.filter((e=>!t.includes(e)))}function d(e,t){const i=e.indexOf(t);return i<0?e.slice():[t].concat(e.slice(0,i)).concat(e.slice(i+1))}function f(e,t,i){const n=new Set(t),r=[],o=[],a=[];return e.forEach(((e,t)=>{n.has(e)?o.push(e):(r.push(e),a.push(t))})),i=i<e.length-1?c(a,i+1):r.length,r.splice(i,0,...o),{newItems:r,movedItemsStartIndex:i}}function m(e,t,i){const n=new Set(t),r=[],o=[],a=[];return e.forEach(((e,t)=>{n.has(e)?o.push(e):(r.push(e),a.push(t))})),i=i<=e.length-1?c(a,i):r.length,r.splice(i,0,...o),{newItems:r,movedItemsStartIndex:i}}function p(e,t){const i=new Set;return e.forEach((e=>{t.has(e)&&i.add(e)})),i}function _(e,t){const i=new Set(e);return t.forEach((e=>i.add(e))),i}function v(e,t){const i=e.indexOf(t);(0,o.assert)(-1!==i,"Item is not found"),e.splice(i,1)}function g(e,t){for(const i of e)if(t(i))return i;return null}function y(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i;return-1}function x(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i].id()!==t[i].id())return!1;return!0}function w(e){return e.reduce(((e,t)=>e+t),0)}function*M(e){for(const[t,i]of e)yield[t,i]}function*b(e,t){for(const[i,n]of e)if(void 0===t)for(const[,e]of n)yield[i,e];else{const e=n.get(t);void 0!==e&&(yield[i,e])}}function P(e){return[Math.min(...e),Math.max(...e)]}function S(e,t){return P(e.map(t))}function R(e){for(let t=e.length-1;t>=0;t--)Array.isArray(e[t])?(R(e[t]),(0,n.default)(e[t])&&e.splice(t,1)):(0,r.default)(e[t])&&(I(e[t]),(0,n.default)(e[t])&&e.splice(t,1))}function I(e){const t=Object.keys(e);for(const i of t)Array.isArray(e[i])?(R(e[i]),(0,n.default)(e[i])&&delete e[i]):(0,r.default)(e[i])&&(I(e[i]),(0,n.default)(e[i])&&delete e[i]);return e}function T(e,t,i){const n=Object.keys(e);for(const o of n){const n=t?`${t}.${o}`:o;(0,r.default)(e[o])?T(e[o],n,i):i.push(n)}}function C(e){const t=[];return T(e,"",t),t}function k(e){return Object.entries(e).reduce(((e,[t,i])=>(e[i]=t,e)),{})}},188485:(e,t,i)=>{i.d(t,{calculateMinMax:()=>n.calculateMinMax,collectAllPaths:()=>n.collectAllPaths,compareTwoCollectionsByIds:()=>n.compareTwoCollectionsByIds,
findFirst:()=>n.findFirst,indexOf:()=>n.indexOf,intersect:()=>n.intersect,join:()=>n.join,lowerbound:()=>n.lowerbound,lowerboundExt:()=>n.lowerboundExt,mapEntriesGenerator:()=>n.mapEntriesGenerator,minMax:()=>n.minMax,moveAfter:()=>n.moveAfter,moveBefore:()=>n.moveBefore,moveToHead:()=>n.moveToHead,nestedMapGenerator:()=>n.nestedMapGenerator,removeEmptyObjectsFromRecordInplace:()=>n.removeEmptyObjectsFromRecordInplace,removeItemFromArray:()=>n.removeItemFromArray,revertRecord:()=>n.revertRecord,subtract:()=>n.subtract,sum:()=>n.sum,upperbound:()=>n.upperbound});var n=i(259611)},320093:(e,t,i)=>{i.d(t,{addExclusionArea:()=>P,addExclusionAreaByScope:()=>b,calcTextHorizontalShift:()=>w,clearRect:()=>m,createBoundCanvas:()=>y,createDisconnectedCanvas:()=>_,createDisconnectedCanvasByRenderingInfo:()=>v,disableSelection:()=>M,drawScaled:()=>p,drawWithExclusionAreaByScope:()=>S,fillRect:()=>f,getBindingRenderingInfo:()=>h,getContext2D:()=>u,getPrescaledContext2D:()=>d,measureText:()=>I,tryApplySuggestedCanvasBitmapSize:()=>x});var n=i(425860),r=i(185842),o=i(727342),a=i(593026),s=i(196768),l=i(376596);function c(e){return{horizontalPixelRatio:Math.max(1,e.bitmapSize.width/e.canvasElementClientSize.width),verticalPixelRatio:Math.max(1,e.bitmapSize.height/e.canvasElementClientSize.height)}}function h(e){return{...c(e),bitmapSize:e.bitmapSize,mediaSize:e.canvasElementClientSize}}function u(e){const t=(0,r.ensureNotNull)(e.getContext("2d"));return t.setTransform(1,0,0,1,0,0),t}function d(e){const t=(0,r.ensureNotNull)(e.getContext("2d")),i=(0,o.getCanvasDevicePixelRatio)(e);return t.setTransform(i,0,0,i,0,0),t}function f(e,t,i,n,r,o){e.save(),e.fillStyle=o,e.fillRect(t,i,n,r),e.restore()}function m(e,t,i,n,r,o){e.save(),e.globalCompositeOperation="copy",e.fillStyle=o,e.fillRect(t,i,n,r),e.restore()}function p(e,t,i,n){e.save(),e.scale(t,i),n(),e.restore()}function _(e,t,i){const n=g(e);return void 0===i&&(i=(0,o.getCanvasDevicePixelRatio)(n)),n.width=t.width*i,n.height=t.height*i,n}function v(e,t){const{bitmapSize:i,mediaSize:n}=t,r=g(e);return r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,r.width=i.width,r.height=i.height,r}function g(e){const t=e.createElement("canvas");return M(t),t}function y(e,t){const i=g((0,r.ensureNotNull)(e.ownerDocument));e.appendChild(i);const o=(0,n.bindCanvasElementBitmapSizeTo)(i,{type:"device-pixel-content-box",transform:(e,t)=>0===e.width||0===e.height?e:{width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)}});return o.resizeCanvasElement(t),o}function x(e){const t=e.suggestedBitmapSize;return null!==t&&t.width>0&&t.height>0&&(e.applySuggestedBitmapSize(),!0)}function w(e,t){return"center"===e.textAlign?0:(0,s.isRtl)()?"start"===e.textAlign||"right"===e.textAlign?t:0:"start"===e.textAlign||"left"===e.textAlign?0:t}function M(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.MozUserSelect="none",e.style.webkitTapHighlightColor="transparent"}function b(e,t){
const{context:i,horizontalPixelRatio:n,verticalPixelRatio:r,bitmapSize:o}=e;i.beginPath(),i.rect(0,0,o.width,o.height);for(let e=0;e<t.length;e++){let{x:o,y:a}=t[e];o*=n,a*=r,0!==e?i.lineTo(o,a):i.moveTo(o,a)}i.closePath(),i.clip("evenodd")}function P(e,t,i){b({context:e,...t},i)}function S(e,t,i){e.context.save(),b(e,t),i(),e.context.restore()}let R;function I(e,t,i){return R||function(){const e=document.createElement("canvas");e.width=0,e.height=0,(0,l.isMac)()&&(e.style.display="none",document.body.append(e)),R=(0,r.ensureNotNull)(e.getContext("2d")),R.textBaseline="alphabetic",R.textAlign="center"}(),t&&R.font!==t&&(R.font=t),i?i.getMetrics(R,e):(0,a.getMinTextMetrics)(R.measureText(e))}},980002:(e,t,i)=>{i.d(t,{lastMouseOrTouchEventInfo:()=>r,setLastMouseOrTouchEventInfo:()=>o});let n=(0,i(376596).supportTouch)()?{isTouch:!0,stylus:!1}:{isTouch:!1};function r(){return n}function o(e){n=e.isTouch?{isTouch:!0,stylus:e.stylus}:{isTouch:!1}}},141463:(e,t,i)=>{i.d(t,{AreaName:()=>n,HitTarget:()=>r,HitTestResult:()=>h,hitTestResultDataAreEqual:()=>c,shouldDefaultActionBeExecuted:()=>l,tryCallHandler:()=>s});var n,r,o=i(883991),a=i(185842);function s(e,t,i,n){if(e.isTouch){if(void 0!==n)return n(e,t),!0}else if(void 0!==i)return i(e,t),!0;return!1}function l(e,t,i,n){return void 0!==t.executeDefaultAction&&(e.isTouch?Boolean(t.executeDefaultAction[n]):Boolean(t.executeDefaultAction[i]))}function c(e,t){return e&&t&&e.equals&&t.equals?e.equals(t):(0,o.default)(e,t)}!function(e){e.Style="Style",e.Text="Text",e.Line="Line",e.Tooltip="Tooltip",e.Button="Button",e.SourceItemMove="SourceItemMove",e.AnchorPoint="AnchorPoint"}(n||(n={})),function(e){e[e.MovePointBackground=1]="MovePointBackground",e[e.Regular=2]="Regular",e[e.MovePoint=3]="MovePoint",e[e.ChangePoint=4]="ChangePoint",e[e.Custom=5]="Custom"}(r||(r={}));class h{constructor(e,t,i){this._target=e,this._data=t||null,this._eraseMarker=i}target(){return this._target}data(){return this._data}mergeData(e){this._data={...(0,a.ensureNotNull)(this._data),...e}}hasPressedMoveHandler(e){return null!==this._data&&function(e,t,i){if(e.isTouch){if(void 0!==i)return!0}else if(void 0!==t)return!0;return!1}(e,this._data.pressedMouseMoveHandler,this._data.touchMoveHandler)}tryCallMouseDownOrTouchStartHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseDownHandler,this._data.touchStartHandler)}tryCallMouseUpOrTouchEndHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseUpHandler,this._data.touchEndHandler)}tryCallMouseEnterHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseEnterHandler)}tryCallMouseLeaveHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseLeaveHandler)}tryCallMouseMoveHandler(e,t){return null!==this._data&&s(e,t,this._data.mouseMoveHandler)}tryCallClickOrTapHandler(e,t){return null!==this._data&&s(e,t,this._data.clickHandler,this._data.tapHandler)}tryCallDblClickOrDblTapHandler(e,t){return null!==this._data&&s(e,t,this._data.doubleClickHandler,this._data.doubleTapHandler)}tryCallContextMenuHandler(e,t){
return null!==this._data&&s(e,t,this._data.contextMenuHandler,this._data.touchContextMenuHandler)}eraseMarker(){return this._eraseMarker}}},15113:(e,t,i)=>{i.d(t,{intervalsVisibilitiesDefaults:()=>n});const n={ticks:!0,seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,weeksFrom:1,weeksTo:52,months:!0,monthsFrom:1,monthsTo:12,ranges:!0}},881822:(e,t,i)=>{i.d(t,{IntervalsVisibilitiesProperty:()=>o});var n=i(603550),r=i(553722);class o extends n.Property{state(e,t){return(0,r.nonDefaultIntervalsVisibilities)(super.state(e,t))??void 0}storeStateIfUndefined(){return!1}}},553722:(e,t,i)=>{i.d(t,{getIntervalsVisibilitiesForMode:()=>f,isActualInterval:()=>h,makeIntervalsVisibilitiesVisibleAtInterval:()=>l,mergeIntervalVisibilitiesDefaults:()=>d,nonDefaultIntervalsVisibilities:()=>u});var n=i(209539),r=i(436492),o=i(185842),a=i(357966),s=i(15113);function l(e,t){let i=t.multiplier();if(t.isTicks()&&(e.ticks=!0),t.isSeconds()&&(i<60?(e.seconds=!0,e.secondsFrom=Math.min(e.secondsFrom,i),e.secondsTo=Math.max(e.secondsTo,i)):(i=Math.floor(i/60),t=new a.Interval(a.ResolutionKind.Minutes,i))),t.isMinutes())if(i<60)e.minutes=!0,e.minutesFrom=Math.min(e.minutesFrom,i),e.minutesTo=Math.max(e.minutesTo,i);else{const t=Math.floor(i/60);e.hours=!0,e.hoursFrom=Math.min(e.hoursFrom,t),e.hoursTo=Math.max(e.hoursTo,t)}t.isDays()&&(e.days=!0,e.daysFrom=Math.min(e.daysFrom,i),e.daysTo=Math.max(e.daysTo,i)),t.isWeeks()&&(e.weeks=!0,e.weeksFrom=Math.min(e.weeksFrom,i),e.weeksTo=Math.max(e.weeksTo,i)),t.isMonths()&&(e.months=!0,e.monthsFrom=Math.min(e.monthsFrom,i),e.monthsTo=Math.max(e.monthsTo,i)),t.isRange()&&(e.ranges=!0)}function c(e,t,i,n){return e&&n>=t&&n<=i}function h(e,t){const i=t.childs();switch(e.kind()){case a.ResolutionKind.Ticks:return i.ticks.value();case a.ResolutionKind.Seconds:if(e.multiplier()<60)return c(i.seconds.value(),i.secondsFrom.value(),i.secondsTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return c(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),t)}case a.ResolutionKind.Minutes:if(e.multiplier()<60)return c(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return c(i.hours.value(),i.hoursFrom.value(),i.hoursTo.value(),t)}case a.ResolutionKind.Days:return c(i.days.value(),i.daysFrom.value(),i.daysTo.value(),e.multiplier());case a.ResolutionKind.Weeks:return c(i.weeks.value(),i.weeksFrom.value(),i.weeksTo.value(),e.multiplier());case a.ResolutionKind.Months:return c(i.months.value(),i.monthsFrom.value(),i.monthsTo.value(),e.multiplier());case a.ResolutionKind.Range:return i.ranges.value()}return(0,o.assert)(!1,`Unsupported resolution: ${e.value()}`),!1}function u(e){const t=Object.keys(e).filter((t=>s.intervalsVisibilitiesDefaults[t]!==e[t]));return 0===t.length?null:t.reduce(((t,i)=>(t[i]=e[i],t)),{})}function d(e){return(0,n.default)((0,r.default)(s.intervalsVisibilitiesDefaults),e??{})}function f(e,t){
if(0===t||e.isTicks()&&3===t||e.isRange()&&2===t)return d();let i=!1;const n={ticks:!1,seconds:!1,minutes:!1,hours:!1,days:!1,weeks:!1,months:!1,ranges:!1},r=e=>e.multiplier();return[{checker:e=>e.isTicks(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.ticks=!0}},{checker:e=>e.isSeconds()&&e.multiplier()<60,getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.seconds=!0,n.secondsFrom=e,n.secondsTo=t}},{checker:e=>e.isSeconds()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()<60,getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.hours=!0,n.hoursFrom=e,n.hoursTo=t}},{checker:e=>e.isDays(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.days=!0,n.daysFrom=e,n.daysTo=t}},{checker:e=>e.isWeeks(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.weeks=!0,n.weeksFrom=e,n.weeksTo=t}},{checker:e=>e.isMonths(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.months=!0,n.monthsFrom=e,n.monthsTo=t}},{checker:e=>e.isRange(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.ranges=!0}}].forEach((n=>{if(n.checker(e)){i=!0;const r=n.getIntervalMultiplier(e);1===t?n.markIntervalAsVisible(r,r):3===t?n.markIntervalAsVisible(r,void 0):n.markIntervalAsVisible(void 0,r)}else(!i&&2===t||i&&3===t)&&n.markIntervalAsVisible(void 0,void 0)})),d(n)}},115676:(e,t,i)=>{var n;i.d(t,{PlotRowSearchMode:()=>n}),function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(n||(n={}))},316746:(e,t,i)=>{i.d(t,{crosshairMoveEvent:()=>m,globalChangeEvent:()=>a,hoverChangeEvent:()=>d,selectionChangeEvent:()=>h,sourceChangeEvent:()=>r,viewportChangeEvent:()=>l});var n=i(750586);function r(e){return(0,n.default)(e)?{type:"data-source-change",sourceId:e}:{type:"data-source-change",...e}}const o={type:"global-change"};function a(){return o}const s={type:"viewport-change"};function l(e){return e?{type:"viewport-change",pane:e}:s}const c={type:"selection-change"};function h(){return c}const u={type:"hover-change"};function d(){return u}const f={type:"crosshair-move"};function m(){return f}},138264:(e,t,i)=>{i.r(t),i.d(t,{addHorizontalLineToPath:()=>u,addLineToPath:()=>S,addPixelPerfectLineToPath:()=>I,addVerticalLineToPath:()=>f,clearRectWithGradient:()=>c,clipPolygonByEdge:()=>C,computeDashPattern:()=>P,createCircle:()=>w,drawHorizontalLine:()=>d,drawLine:()=>R,drawPixelPerfectLine:()=>T,drawPoly:()=>M,drawRoundRect:()=>v,drawRoundRectWithInnerBorder:()=>g,drawVerticalLine:()=>m,fillRectInnerBorder:()=>h,fillRectWithBorder:()=>x,scaleDrawRoundRectRadii:()=>p,scalePath2D:()=>k,scaledDashPattern:()=>y,setLineStyle:()=>b});var n=i(657415),r=i(578792),o=i(515834),a=i(575199),s=i(320093),l=i(126956);function c(e,t,i,n,r,o,a){e.save(),e.globalCompositeOperation="copy"
;const s=e.createLinearGradient(0,0,0,r);s.addColorStop(0,o),s.addColorStop(1,a),e.fillStyle=s,e.fillRect(t,i,n,r),e.restore()}function h(e,t,i,n,r,o){e.fillRect(t+o,i,n-2*o,o),e.fillRect(t+o,i+r-o,n-2*o,o),e.fillRect(t,i,o,r),e.fillRect(t+n-o,i,o,r)}function u(e,t,i,n){const r=e.lineWidth%2?.5:0;e.moveTo(i,t+r),e.lineTo(n,t+r)}function d(e,t,i,n){e.beginPath(),u(e,t,i,n),e.stroke()}function f(e,t,i,n){const r=e.lineWidth%2?.5:0;e.moveTo(t+r,i),e.lineTo(t+r,n)}function m(e,t,i,n){e.beginPath(),f(e,t,i,n),e.stroke()}function p(e,t){return Array.isArray(e)?e.map((e=>Math.round(e*t))):Math.round(e*t)}function _(e,t){return Array.isArray(e)?e.map((e=>0===e?e:e+t)):e+t}function v(e,t,i,n,r,o,a){let s,l,c,h;if(Array.isArray(o))if(2===o.length){const e=Math.max(0,o[0]),t=Math.max(0,o[1]);s=e,l=e,c=t,h=t}else{if(4!==o.length)throw new Error("Wrong border radius - it should be like css border radius");s=Math.max(0,o[0]),l=Math.max(0,o[1]),c=Math.max(0,o[2]),h=Math.max(0,o[3])}else{const e=Math.max(0,o);s=e,l=e,c=e,h=e}a||e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-l,i),0!==l&&e.arcTo(t+n,i,t+n,i+l,l),e.lineTo(t+n,i+r-c),0!==c&&e.arcTo(t+n,i+r,t+n-c,i+r,c),e.lineTo(t+h,i+r),0!==h&&e.arcTo(t,i+r,t,i+r-h,h),e.lineTo(t,i+s),0!==s&&e.arcTo(t,i,t+s,i,s)}function g(e,t,i,n,r,o,s=0,l=0,c="",h=a.LineStyle.Solid){if(e.save(),!l||!c||c===o)return v(e,t,i,n,r,s),e.fillStyle=o,e.fill(),void e.restore();const u=l/2;if("transparent"!==o){const u="transparent"!==c&&h!==a.LineStyle.Solid;v(e,u?t:t+l,u?i:i+l,u?n:n-2*l,u?r:r-2*l,u?s:_(s,-l)),e.fillStyle=o,e.fill()}if("transparent"!==c){v(e,t+u,i+u,n-l,r-l,_(s,-u)),e.lineWidth=l,e.strokeStyle=c,b(e,h),e.closePath(),e.stroke()}e.restore()}function y(e,t){return t=Math.max(1,t),e.map((e=>e*t))}function x(e,t,i,n,r,l,c,h,u){const{context:f}=e,m=l%2/2,p=t+m,_=n+m;let v,g;if(h){const{borderMode:e,borderWidth:a,color:s,dashPattern:c,lineStyle:u}=h;switch(e){case"outer":{const e=-l/2-a/2,t=-a/2;g={left:p+e,right:_-e,top:i+t,bottom:r-t};break}case"center":{const e=a%2/2;g={left:t+e,right:n+e,top:i+e,bottom:r+e};break}case"inner":{const e=-l/2+a/2,t=a/2;g={left:p+e,right:_-e,top:i+t,bottom:r-t}}}f.strokeStyle=s,f.lineWidth=a;let d=-1;c?f.setLineDash(y(c,a)):void 0!==u&&(b(f,u),u===o.LINESTYLE_SOLID&&(d=1)),v={left:g.left+d*a/2,top:g.top+d*a/2,right:g.right-d*a/2,bottom:g.bottom-d*a/2}}if(c&&(f.fillStyle=c.color,v||(v={left:p-l/2,right:_+l/2,top:i,bottom:r}),f.fillRect(v.left,v.top,v.right-v.left,v.bottom-v.top)),u){const{lineWidth:o,lineColor:a,lineStyle:l,excludeBoundaries:c}=u;f.save(),f.lineCap="butt",f.lineWidth=o,f.strokeStyle=a,b(f,l);const m=()=>d(f,Math.floor((i+r)/2),h?.rightToLeftStroke?n:t,h?.rightToLeftStroke?t:n);c?(0,s.drawWithExclusionAreaByScope)(e,c,m):m(),f.restore()}if(g){if((h?.lineStyle??a.LineStyle.Solid)===a.LineStyle.Solid)f.strokeRect(g.left,g.top,g.right-g.left,g.bottom-g.top);else{const e=h?.rightToLeftStroke?g.right:g.left,t=h?.rightToLeftStroke?g.left:g.right,i=g.top,n=g.bottom;f.lineCap="butt",[[e,i,t,i],[e,n,t,n],[e,i,e,n],[t,i,t,n]].forEach((([e,t,i,n])=>{f.beginPath(),
f.moveTo(e,t),f.lineTo(i,n),f.stroke()}))}}}function w(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!1),e.closePath()}function M(e,t,i){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const i of t)e.lineTo(i.x,i.y);e.closePath(),e.stroke(),i&&e.fill()}function b(e,t){let i=[];t!==o.LINESTYLE_SOLID&&(i=P(e.lineWidth,t)),e.setLineDash(i)}function P(e,t){return[[e,2*e],[5*e,6*e],[6*e,6*e],[e,4*e],[2*e,e]][t-1]}function S(e,t,i,n,r){e.moveTo(t,i),e.lineTo(n,r)}function R(e,t,i,n,r){isFinite(t)&&isFinite(n)&&isFinite(i)&&isFinite(r)&&(e.beginPath(),S(e,t,i,n,r),e.stroke())}function I(e,t,i,n,r,o){const{horizontalPixelRatio:a,verticalPixelRatio:s}=o;let l;return t===n?(l=[Math.round(t*a),i*s,Math.round(t*a),r*s],f(e,l[0],l[1],l[3])):i===r?(l=[t*a,Math.round(i*s),n*a,Math.round(i*s)],u(e,l[1],l[0],l[2])):(l=[t*a,i*s,n*a,r*s],S(e,l[0],l[1],l[2],l[3])),l}function T(e,t,i,n,r,o=l.dpr1PixelRatioInfo){e.beginPath(),I(e,t,i,n,r,o),e.stroke()}function C(e,t,i,o){const a=(0,n.equalPoints)(i,o[0])?(0,n.equalPoints)(i,o[1])?null:o[1]:o[0];return null!==e&&null!==a?(0,r.intersectPolygonAndHalfplane)(e,(0,n.halfplaneThroughPoint)((0,n.lineThroughPoints)(t,i),a)):null}function k(e,t){const i=new Path2D;return i.addPath(e,(new DOMMatrix).scaleSelf(t,t)),i}},757713:(e,t,i)=>{i.d(t,{PlotList:()=>d,mergeMinMax:()=>f});var n=i(185842),r=i(77357),o=i(188485),a=i(395079),s=i(115676);const l=(0,r.getLogger)("Chart.PlotList"),c=30;function h(e){return e.index}function u(e){return e.value[0]}class d{constructor(e=null,t=null){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache=new Map,this._rowSearchCacheByIndex=new Map,this._rowSearchCacheByIndexWithoutEmptyValues=new Map,this._rowSearchCacheByTime=new Map,this._rowSearchCacheByTimeWithoutEmptyValues=new Map,this._plotFunctions=e||new Map,this._emptyValuePredicate=t}clear(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache.clear(),this._invalidateSearchCaches()}first(){return this.size()>0?this._items[this._start]:null}last(){return this.size()>0?this._items[this._end-1]:null}firstIndex(){return this.size()>0?this._indexAt(this._start):null}firstPlottableIndex(){if(this.isEmpty())return null;for(let e=this._start;e<this._end;++e){const t=this._indexAt(e);if(t>a.UNPLOTTABLE_TIME_POINT_INDEX)return t}return null}lastIndex(){return this.size()>0?this._indexAt(this._end-1):null}clone(){const e=this.firstIndex(),t=this.lastIndex();return null===e||null===t?new d:this.range(e,t)}size(){return this._end-this._start}isEmpty(){return 0===this.size()}contains(e){return null!==this.search(e,s.PlotRowSearchMode.Exact)}valueAt(e){const t=this.search(e);return null!==t?t.value:null}add(e,t){if(this._shareRead)return l.logDebug("add: readonly collection modification attempt"),!1;const i={index:e,value:t},n=this._nonCachedSearch(e,s.PlotRowSearchMode.Exact,h);return this._invalidateSearchCaches(),null===n?(this._items.splice(this._lowerbound(e,h),0,i),this._start=0,this._end=this._items.length,!0):(this._items[n]=i,!1)}search(e,t=s.PlotRowSearchMode.Exact,i){
return this._searchImpl(e,t,this._rowSearchCacheByIndex,this._rowSearchCacheByIndexWithoutEmptyValues,h,i)}searchByTime(e,t=s.PlotRowSearchMode.Exact,i){return this._searchImpl(e,t,this._rowSearchCacheByTime,this._rowSearchCacheByTimeWithoutEmptyValues,u,i)}fold(e,t){let i=t;for(let t=this._start;t<this._end;++t){i=e(this._indexAt(t),this._valueAt(t),i)}return i}findFirst(e,t){const i=void 0!==t&&Math.min(this._start+t,this._end)||this._end;for(let t=this._start;t<i;++t){const i=this._indexAt(t),n=this._valueAt(t);if(e(i,n))return{index:i,value:n}}return null}findLast(e,t){const i=void 0!==t&&Math.max(this._end-t,this._start)||this._start;for(let t=this._end-1;t>=i;--t){const i=this._indexAt(t),n=this._valueAt(t);if(e(i,n))return{index:i,value:n}}return null}each(e){for(let t=this._start;t<this._end;++t){if(e(this._indexAt(t),this._valueAt(t)))break}}reduce(e,t){let i=t;for(let t=this._start;t<this._end;++t){i=e(i,this._indexAt(t),this._valueAt(t))}return i}range(e,t){const i=new d(this._plotFunctions,this._emptyValuePredicate);return i._items=this._items,i._start=this._lowerbound(e,h),i._end=this._upperbound(t),i._shareRead=!0,i}plottableRange(e){const t=new d(this._plotFunctions,this._emptyValuePredicate);return t._items=this._items,t._start=this._upperbound(a.UNPLOTTABLE_TIME_POINT_INDEX),t._end=this._end,t._shareRead=!0,!0===e&&t._start>this._start&&(t._start-=1),t}rangeCountback(e,t){if(null===this.firstIndex())return new d;const i=new d(this._plotFunctions,this._emptyValuePredicate);return i._items=this._items,i._end=this._upperbound(e),i._start=Math.max(this._start,i._end-t),i._shareRead=!0,i}rangeIterator(e,t){const i=this._lowerbound(e,h),n=this._upperbound(t);return this._rangeIteratorImpl(i,n)}fullRangeIterator(){return this._rangeIteratorImpl(this._start,this._end)}minMaxOnRangeCached(e,t,i){if(this.isEmpty())return null;let n=null;for(const r of i){n=f(n,this._minMaxOnRangeCachedImpl(e-r.offset,t-r.offset,r.name))}return n}minMaxOnRange(e,t,i){if(this.isEmpty())return null;let n=null;for(const r of i){n=f(n,this._minMaxOnRange(e-r.offset,t-r.offset,r.name))}return n}merge(e){return this._shareRead?(l.logDebug("merge: readonly collection modification attempt"),null):0===e.length?null:this.isEmpty()||e[e.length-1].index<this._items[0].index?this._prepend(e):e[0].index>this._items[this._items.length-1].index?this._append(e):1===e.length&&e[0].index===this._items[this._items.length-1].index?(this._updateLast(e[0]),e[0]):this._merge(e)}addTail(e,t=!1){if(0===e.length)return;let i=0;t&&this._end-this._start>0&&(i=1,this._items[this._end-this._start-1].value=e[0].value);for(let t=i;t<e.length;++t){const i=e[t],n=this.lastIndex();if(null===n){l.logError("Can't add tail to the empty plotlist");break}this.add(n+1,i.value)}this._invalidateSearchCaches()}move(e){if(this._shareRead)return void l.logDebug("move: readonly collection modification attempt");if(0===e.length)return;const t=this._items.slice();for(const i of e){const e=this._bsearch(i.old,h)
;if(null!==e&&void 0!==t[e])if(i.new===a.INVALID_TIME_POINT_INDEX)t[e]=void 0;else{t[e]={index:i.new,value:t[e].value};const n=this._bsearch(i.new,h);if(null!==n){const e=t[n];void 0!==e&&e.index===i.new&&(t[n]=void 0)}}}this._items=t.filter((e=>void 0!==e)).sort(((e,t)=>e.index-t.index)),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._start=0,this._end=this._items.length}remove(e){if(this._shareRead)return l.logDebug("remove: readonly collection modification attempt"),null;const t=this._nonCachedSearch(e,s.PlotRowSearchMode.NearestRight,h);if(null===t)return null;const i=this._items.splice(t);return this._end=this._items.length,this._minMaxCache.clear(),this._invalidateSearchCaches(),i.length>0?i[0]:null}state(){const e=this._items.slice(this._start,this._end);return{start:0,end:e.length,data:e}}restoreState(e){e?(this._start=e.start,this._end=e.end,this._shareRead=!1,this._items=e.data,this._minMaxCache.clear(),this._invalidateSearchCaches()):this.clear()}_indexAt(e){return this._items[e].index}_valueAt(e){return this._items[e].value}_length(){return this._items.length}_searchImpl(e,t,i,n,r,o){const a=void 0!==o?i:n,s=void 0!==o?1e4*(t+1)+o:t;let l=a.get(e);if(void 0!==l){const e=l.get(s);if(void 0!==e)return e}const c=this._nonCachedSearch(e,t,r,o);if(null===c)return null;const h={index:this._indexAt(c),value:this._valueAt(c)};return void 0===l&&(l=new Map,a.set(e,l)),l.set(s,h),h}_nonCachedSearch(e,t,i,n){const r=this._lowerbound(e,i),o=r===this._end||e!==i(this._items[r]);if(o&&t!==s.PlotRowSearchMode.Exact)switch(t){case s.PlotRowSearchMode.NearestLeft:return this._searchNearestLeft(r,n);case s.PlotRowSearchMode.NearestRight:return this._searchNearestRight(r,n);default:throw new TypeError("Unknown search mode")}if(void 0===n||o||t===s.PlotRowSearchMode.Exact)return o?null:r;switch(t){case s.PlotRowSearchMode.NearestLeft:return this._nonEmptyNearestLeft(r,n);case s.PlotRowSearchMode.NearestRight:return this._nonEmptyNearestRight(r,n);default:throw new TypeError("Unknown search mode")}}_nonEmptyNearestRight(e,t){const i=(0,n.ensure)(this._emptyValuePredicate),r=(0,n.ensure)(t);for(;e<this._end&&i(this._valueAt(e),r);)e+=1;return e===this._end?null:e}_nonEmptyNearestLeft(e,t){const i=(0,n.ensureNotNull)(this._emptyValuePredicate),r=(0,n.ensure)(t);for(;e>=this._start&&i(this._valueAt(e),r);)e-=1;return e<this._start?null:e}_searchNearestLeft(e,t){if(e===this._start)return null;const i=e-1,n=i!==this._end?i:null;return void 0!==t&&null!==n?this._nonEmptyNearestLeft(n,t):n}_searchNearestRight(e,t){const i=e,n=i!==this._end?i:null;return void 0!==t&&null!==n?this._nonEmptyNearestRight(n,t):n}_bsearch(e,t){const i=this._lowerbound(e,t);return i!==this._end&&e===t(this._items[i])?i:null}_lowerbound(e,t){return(0,o.lowerbound)(this._items,e,((e,i)=>t(e)<i),this._start,this._end)}_upperbound(e){return(0,o.upperbound)(this._items,e,((e,t)=>t.index>e),this._start,this._end)}_plotMinMax(e,t,i){let n=null;const r=this._plotFunctions.get(i);if(void 0===r)throw new Error(`Plot "${i}" is not registered`)
;for(let i=e;i<t;i++){const e=r(this._items[i].value);null==e||Number.isNaN(e)||(null===n?n={min:e,max:e}:(e<n.min&&(n.min=e),e>n.max&&(n.max=e)))}return n}_invalidateCacheForRow(e){const t=Math.floor(e.index/c);this._minMaxCache.forEach((e=>e.delete(t)))}_prepend(e){return(0,n.assert)(!this._shareRead,"collection should not be readonly"),(0,n.assert)(0!==e.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=e.concat(this._items),this._start=0,this._end=this._items.length,e[0]}_append(e){return(0,n.assert)(!this._shareRead,"collection should not be readonly"),(0,n.assert)(0!==e.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=this._items.concat(e),this._start=0,this._end=this._items.length,e[0]}_updateLast(e){(0,n.assert)(!this.isEmpty(),"plot list should not be empty");const t=this._items[this._end-1];(0,n.assert)(t.index===e.index,"last row index should match new row index"),this._invalidateCacheForRow(e),this._invalidateSearchCaches(),this._items[this._end-1]=e}_merge(e){return(0,n.assert)(0!==e.length,"plot rows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=function(e,t){const i=function(e,t){const i=e.length,n=t.length;let r=i+n,o=0,a=0;for(;o<i&&a<n;)e[o].index<t[a].index?o++:e[o].index>t[a].index?a++:(o++,a++,r--);return r}(e,t),n=new Array(i);let r=0,o=0;const a=e.length,s=t.length;let l=0;for(;r<a&&o<s;)e[r].index<t[o].index?(n[l]=e[r],r++):e[r].index>t[o].index?(n[l]=t[o],o++):(n[l]=t[o],r++,o++),l++;for(;r<a;)n[l]=e[r],r++,l++;for(;o<s;)n[l]=t[o],o++,l++;return n}(this._items,e),this._start=0,this._end=this._items.length,e[0]}_minMaxOnRangeCachedImpl(e,t,i){if(this.isEmpty())return null;let r=null;const o=(0,n.ensureNotNull)(this.firstIndex()),a=(0,n.ensureNotNull)(this.lastIndex()),s=Math.max(e,o),l=Math.min(t,a),h=Math.ceil(s/c)*c,u=Math.max(h,Math.floor(l/c)*c);r=f(r,this._minMaxOnRange(s,Math.min(h,t,l),i));let d=this._minMaxCache.get(i);void 0===d&&(d=new Map,this._minMaxCache.set(i,d));for(let e=Math.max(h+1,s);e<u;e+=c){const t=Math.floor(e/c);let n=d.get(t);if(void 0===n){const e=t*c,r=(t+1)*c-1;n=this._minMaxOnRange(e,r,i),d.set(t,n)}r=f(r,n)}r=f(r,this._minMaxOnRange(u,l,i));return r}_minMaxOnRange(e,t,i){return this._plotMinMax(this._lowerbound(e,h),this._upperbound(t),i)}_rangeIteratorImpl(e,t){let i=e-1;return{[Symbol.iterator](){return this},next:()=>(i+=1,i>=t?{done:!0,value:void 0}:{done:!1,value:this._items[i]})}}_invalidateSearchCaches(){this._rowSearchCacheByIndex.clear(),this._rowSearchCacheByIndexWithoutEmptyValues.clear(),this._rowSearchCacheByTime.clear(),this._rowSearchCacheByTimeWithoutEmptyValues.clear()}}function f(e,t){if(null===e)return t;if(null===t)return e;return{min:Math.min(e.min,t.min),max:Math.max(e.max,t.max)}}},86992:(e,t,i)=>{i.d(t,{PriceAxisViewRenderer:()=>d,hittestByData:()=>u});var n=i(657415),r=i(691069),o=i(980002),a=i(196768),s=i(141463),l=i(320093),c=i(138264)
;const h=new Path2D("M4.09.93c.4.16.75.4 1.02.73a5.47 5.47 0 0 0-3.78 3.27A2.5 2.5 0 0 1 3.2.77c.31 0 .61.06.89.16Zm8.24 3.35a2.5 2.5 0 0 0-3.27-3.23c-.38.16-.7.4-.97.7a5.47 5.47 0 0 1 3.56 3.5c.3-.26.53-.6.68-.97Zm-3.15-.84a4.5 4.5 0 1 0-5.5 7.12 4.5 4.5 0 0 0 5.5-7.12ZM6 4h1v4H4V7h2V4Z");function u(e,t){const i=(0,o.lastMouseOrTouchEventInfo)().isTouch?20:0,a=e.hitTestData;if(void 0===a||!e.visible)return null;const{itemBox:l,clickHandler:c,tooltip:h}=a;if(l){const o=(0,n.box)(new n.Point(l.min.x-i,l.min.y-i),new n.Point(l.max.x+i,l.max.y+i));if((0,r.pointInBox)(t,o))return new s.HitTestResult(e.hitTarget??s.HitTarget.Custom,{clickHandler:c?.bind(null,t),tapHandler:c?.bind(null,t),hoverModelFromAxis:a.hoverModelFromAxis,activeItem:a.activeItem,tooltip:h})}return null}class d{constructor(e,t){this._bodyBox=null,this.setData(e,t)}setData(e,t){this._data=e,this._commonData=t}lastDrawnBodyBox(){return this._bodyBox}draw(e,t,i,r,o){const s=this._data,{mediaSize:h,bitmapSize:u,horizontalPixelRatio:d,verticalPixelRatio:f}=t;if(!s.visible||this._isOutOfScreen(i,h.height))return;const m=this._commonData,p=void 0!==s.labelIcon,_=i.paddingTop+m.additionalPaddingTop,v=i.paddingBottom+m.additionalPaddingBottom,{paddingOuter:g,paddingInner:y,fontSize:x,borderSize:w}=i,M=s.ignoreAdditionalPaddingInner?0:i.additionalPaddingInner;let b=s.text,P=s.textColor||m.textColor,S=s.secondLine||"",R=m.secondLineTextColor||P,I=s.thirdLine||"";const T=m.thirdLineTextColor||P;0===S.length&&(S=I,R=T,I=""),0===b.length&&(b=S,P=R,S=I,R=T,I=""),e.save(),void 0!==m.globalAlpha&&(e.globalAlpha*=m.globalAlpha),e.font=i.font;const C=r.yMidCorrection(e,b)*f,k=x+_+v,D=(s.labelIconMinWidth??0)*d,V=Boolean(S),E=Boolean(I),A=y+g+M,L=[Math.ceil(r.measureText(e,b)),V?Math.ceil(r.measureText(e,S)):0,E?Math.ceil(r.measureText(e,I)):0],B=Math.max(1,Math.floor(f));let N=Math.round(k*f);N%2!=B%2&&(N+=1);const F=Math.round((x+i.lineSpacing)*f),O=Math.round(2*(x+i.lineSpacing)*f),H=Math.max(1,Math.floor(w*d)),z=s.separatorVisible?H:0,W=s.borderVisible?H:0,G=p?Math.max(N,D):Math.round((Math.max(...L)+A)*d),q=Math.round(M*d),j=u.width,$=Math.ceil(y*d),K=Math.round((m.fixedCoordinate??m.coordinate)*f)-Math.floor(.5*f),U=Math.floor(K+B/2-N/2),Z=U+N,X="right"===o,Y=void 0!==s.xCoord?Math.round(s.xCoord*d)+(X?1:-1)*Math.round(G/2):X?j-z:z;let J,Q=Y;const ee=s.backgroung??m.background;e.fillStyle=ee;const te=2*f;if(e.textAlign=X?"right":"left",e.textBaseline="middle",X?(Q=Y-G,J=Y-q-$+z):(Q=Y+G,J=Y+q+$-z),this._bodyBox=null,b||p){const i=E?N+O:V?N+F:N,r=m.borderColor??ee,o=void 0!==s.xCoord?te:0;if(((t,r,a)=>{if(X){(0,c.drawRoundRectWithInnerBorder)(e,Q,U,G,i,t,s.overridenRadius?(0,c.scaleDrawRoundRectRadii)(s.overridenRadius,f):[te,o,o,te],W,r,a);const l=(0,n.point)(Q/d,U/f),h=l.add((0,n.point)(G/d,i/f));this._bodyBox=(0,n.box)(l,h)}else{(0,c.drawRoundRectWithInnerBorder)(e,Y,U,G,i,t,s.overridenRadius?(0,c.scaleDrawRoundRectRadii)(s.overridenRadius,f):[o,te,te,o],W,r,a);const l=(0,n.point)(Y/d,U/f),h=l.add((0,n.point)(G/d,i/f));this._bodyBox=(0,n.box)(l,h)}
})(ee,r,m.borderStyle),p){switch(s.labelIcon){case 0:this._drawPlusIcon(e,Y,Q,U,K,Z,B);break;case 1:this._drawClockExistingAlertIcon(e,Y,Q,t,U,i)}return void e.restore()}e.save(),e.translate(J,(U+Z)/2+C),(0,l.drawScaled)(e,d,f,(()=>{e.fillStyle=P,e.fillText(b,0,0)})),e.restore()}V&&(e.fillStyle=R,e.save(),e.translate(J,(U+Z)/2+C+F),(0,l.drawScaled)(e,d,f,(()=>{e.fillText((0,a.startWithLTR)(S),0,0)})),e.restore()),E&&(e.fillStyle=T,e.save(),e.translate(J,(U+Z)/2+C+O),(0,l.drawScaled)(e,d,f,(()=>{e.fillText((0,a.startWithLTR)(I),0,0)})),e.restore()),s.selectedMarkColor&&this._drawSelectedMark(e,t,i,X),e.restore()}topBottomTotalHeight(e){const t=this._lines();if(!this._data.visible||0===t)return{top:0,bottom:0,total:0};const i=e.fontSize/2+e.paddingTop+this._commonData.additionalPaddingTop,n=(t-.5)*e.fontSize+(t-1)*e.lineSpacing+e.paddingBottom+this._commonData.additionalPaddingBottom;return{top:i,bottom:n,total:i+n}}hitTest(e){return u(this._data,e)}_drawSelectedMark(e,t,i,n){const r=this._data,{mediaSize:o,bitmapSize:a,horizontalPixelRatio:s,verticalPixelRatio:l}=t;if(!r.visible||this._isOutOfScreen(i,o.height))return;const h=this._commonData,u=a.width,d=r.backgroung??h.background,f=h.borderColor??d,m=Math.round(3*s),p=n?0:u-m,_=Math.round((this._bodyBox?.min.y??0)*l),v=Math.round((this._bodyBox?.max.y??0)*l)-_;e.save(),(0,c.drawRoundRect)(e,p,_,m,v,Math.ceil(m/2)),e.fillStyle=f,e.fill(),e.restore()}_drawPlusIcon(e,t,i,n,r,o,a){e.fillStyle=this._commonData.textColor,e.strokeStyle=this._commonData.textColor,e.lineWidth=a;const s=Math.abs(t-i);let l=Math.round(.35*s);l%2!=a%2&&(l+=1);let c=Math.round(.65*s);c%2!=a%2&&(c+=1);const h=Math.floor((s-l)/2),u=Math.min(t,i),d=u+Math.floor(s/2-a/2);e.fillRect(u+h,r,l,a),e.fillRect(d,n+h,a,l),e.beginPath(),e.arc(d+a/2,r+a/2,c/2,0,2*Math.PI,!1),e.stroke()}_drawClockExistingAlertIcon(e,t,i,n,r,o){e.fillStyle=this._commonData.textColor;const a=Math.abs(t-i),s=Math.min(t,i),{horizontalPixelRatio:l,verticalPixelRatio:c}=n,u=a/(23*l),d=a/(23*c),f=12*l*u,m=10.73*c*d,p=Math.floor((a-f)/2),_=Math.floor((o-m)/2)-1;e.save(),e.translate(s+p,r+_),e.scale(l*u,c*d),e.fill(h),e.restore()}_lines(){const e=this._data;return(e.text?1:0)+(e.secondLine?1:0)+(e.thirdLine?1:0)}_isOutOfScreen(e,t){const i=this._commonData,n=i.fixedCoordinate??i.coordinate,{total:r}=this.topBottomTotalHeight(e),o=r/this._lines();return n-o/2-3>t||n+(r-o/2)+3<0}}},816570:(e,t,i)=>{i.d(t,{PriceAxisView:()=>o});var n=i(86992),r=i(275925);class o{constructor(e){this._commonRendererData={coordinate:0,textColor:"#FFF",background:"#000",additionalPaddingBottom:0,additionalPaddingTop:0},this._axisRendererData={text:"",visible:!1,separatorVisible:!0,borderVisible:!1,ignoreAdditionalPaddingInner:!1},this._paneRendererData={text:"",visible:!1,separatorVisible:!1,borderVisible:!1,ignoreAdditionalPaddingInner:!0},this._invalidated=!0,this._active=!1,this._axisRenderer=new(e||n.PriceAxisViewRenderer)(this._axisRendererData,this._commonRendererData),
this._paneRenderer=new(e||n.PriceAxisViewRenderer)(this._paneRendererData,this._commonRendererData)}setActive(e){this._active=e}text(){return this._updateRendererDataIfNeeded(),this._axisRendererData.text}secondLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.secondLine}thirdLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.thirdLine}background(){return this._updateRendererDataIfNeeded(),this._commonRendererData.background}color(){return this._updateRendererDataIfNeeded(),this.generateTextColor(this.background())}generateTextColor(e){return(0,r.colorFromBackground)(e)}coordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate}update(e){this._invalidated=!0}topBottomTotalHeight(e){this._updateRendererDataIfNeeded();const{top:t,bottom:i,total:n}=this._axisRenderer.topBottomTotalHeight(e),{top:r,bottom:o,total:a}=this._paneRenderer.topBottomTotalHeight(e);return{top:Math.max(t,r),bottom:Math.max(i,o),total:Math.max(n,a)}}fixedOrRegularCoordinate(){return this._commonRendererData.fixedCoordinate??this.coordinate()}setFixedCoordinate(e){this._commonRendererData.fixedCoordinate=e}isVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible}isAxisLabelVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible}isPaneLabelVisible(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible}renderer(){return this._updateRendererDataIfNeeded(),this._axisRenderer}paneRenderer(){return this._updateRendererDataIfNeeded(),this._paneRenderer}setPaneRendererLabelIcon(e){this._paneRendererData.labelIcon=e}setPaneLabelVisible(e){this._paneRendererData.visible=e,this._invalidated=!0}ignoreAlignment(){return!1}_updateRendererDataIfNeeded(){this._invalidated&&(this._commonRendererData.fixedCoordinate=void 0,this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)}}},153987:(e,t,i)=>{i.d(t,{isRootPath:()=>s,propertyByPath:()=>a,propertyPathForSource:()=>r});var n=i(185842);function r(e,t="properties"){return`charts.${e.model().id()}.sources.${e.id()}.${t}`}function o(e,t){if(t.length<4)throw new Error("Invalid chart path");const i=function(e,t){return(0,n.ensureDefined)(e.getAll().find((e=>e.hasModel()&&e.model().model().id()===t))).model().model()}(e,t[0]),r=t[1];if("sources"===r){return(0,n.ensureNotNull)(i.dataSourceForId(t[2])).propertyByPath(t.slice(3).join("."))}throw new Error(`Invalid chart path, unknown root: ${r}`)}function a(e,t){const i=t.split(".");if(i.length<1)throw new Error("Invalid path");const n=i[0];if("charts"===n)return o(e,i.slice(1));throw new Error(`Invalid path, unknown root: ${n}`)}function s(e){return e.startsWith("charts.")}},126956:(e,t,i)=>{i.d(t,{dpr1PixelRatioInfo:()=>r,equalPixelRatios:()=>a,equalRenderingInfos:()=>o});var n=i(425860);const r={horizontalPixelRatio:1,verticalPixelRatio:1};function o(e,t){return(0,n.equalSizes)(e.mediaSize,t.mediaSize)&&(0,
n.equalSizes)(e.bitmapSize,t.bitmapSize)&&a(e,t)}function a(e,t){return e.horizontalPixelRatio===t.horizontalPixelRatio&&e.verticalPixelRatio===t.verticalPixelRatio}},7255:(e,t,i)=>{i.d(t,{applyDefaultColorsToPropsState:()=>D,blacklistedProperties:()=>E,prepareStudyProperties:()=>V,prepareStudyPropertiesForLoadChart:()=>P,prepareStudyPropsStateForLoadChart:()=>S,studyGeneralPropsState:()=>I,studyPropsExcludeDefaultsKeys:()=>A});var n=i(209539),r=i(422872),o=i(77357),a=i(385955),s=i(823291),l=i(127985),c=i(515834),h=i(253193),u=i(822783),d=i(15113),f=i(193867),m=i(881822),p=i(321582);const _=(0,o.getLogger)("Chart.Study"),v=(0,s.getHexColorByName)("color-tv-blue-500"),g=(0,s.getHexColorByName)("color-tv-blue-500"),y=(0,s.getHexColorByName)("color-tv-blue-500"),x=(0,s.getHexColorByName)("color-tv-blue-500"),w=(0,s.getHexColorByName)("color-cold-gray-500"),M=(0,s.getHexColorByName)("color-tv-blue-500"),b=(0,s.getHexColorByName)("color-tv-blue-500");function P(e,t,i,n,r,o){return function(e,t,i,n,r,o,a){const s=S(e,t,i,n,o);return L(t||e,r,s,a,!0)}(e,t,i,n,l.StudyMetaInfo.getStudyPropertyRootName(e),r,o)}function S(e,t,i,r,o){e.version&&i.version&&e.version!==i.version&&_.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+i.version);const s=t||e,c=(0,a.clone)(s.defaults)??{},u=l.StudyMetaInfo.getStudyPropertyRootName(s),d=l.StudyMetaInfo.getStudyPropertyRootName(e);let f=I();return(0,n.default)(f,R(e)),(0,n.default)(f,(0,a.clone)(e.defaults)),(0,n.default)(f,c),(0,n.default)(f,(0,h.factoryDefaults)(u)),(0,n.default)(f,(0,h.factoryDefaults)(d)),(0,n.default)(f,T(s,r,u)),(0,n.default)(f,T(e,r,d)),(0,n.default)(f,i),D(f,s),f=r.updateStudyState(f,e,t),void 0!==o&&t&&(f=o(i,f,e,t)),l.StudyMetaInfo.versionOf(s)>=1&&(0,n.default)(f,C(c,f)),f}function R(e){const t={};if(e.plots)for(let i=0;i<e.plots.length;i++){const n=e.plots[i],r=n.id;if((0,p.isColorerPlot)(n))continue;const o={display:4294967295,color:v,linestyle:c.LINESTYLE_SOLID,linewidth:2,plottype:p.LineStudyPlotStyle.Line,trackPrice:!1};(0,p.isBarColorerPlot)(n)&&(o.transparency=0),o.plottype=n.type,o.title=r,t[r]=(0,a.clone)(o)}return{styles:t}}function I(){const e=(0,a.clone)((0,h.defaults)("study"));return e.intervalsVisibilities=(0,a.clone)(d.intervalsVisibilitiesDefaults),e}function T(e,t,i){let n=(0,a.clone)((0,h.defaults)(i,t));return"Overlay"!==e.shortId&&"Compare"!==e.shortId||(n.currencyId=null,n.unitId=null),e.isTVScript&&e.TVScriptSourceCode!==n.TVScriptSourceCode&&(n=(0,a.clone)((0,h.factoryDefaults)(i))),n}function C(e,t){const i={};return u.StudyVersioning.mergeInputsObjPart(i,e.inputs??{}),u.StudyVersioning.mergeInputsObjPart(i,t.inputs),{inputs:i}}function k(e,t,i,o){if(l.StudyMetaInfo.versionOf(e)<1)throw new Error("This function cannot work with metainfo of the old format version. Required format version >= 1");const s=l.StudyMetaInfo.getStudyPropertyRootName(e),c=(0,a.clone)(e.defaults),u=(0,h.factoryDefaults)(s),d=I();if((0,n.default)(d,R(e)),(0,n.default)(d,c),(0,n.default)(d,u),(0,n.default)(d,T(e,o,s)),(0,
n.default)(d,t),(0,n.default)(d,C(c,d)),D(d,e),null!==i){const t=i.model().studiesColorRotatorFactory().getColorRotator(e);null!==t&&("Overlay@tv-basicstudies"===e.id?d.lineStyle.color=t.getColor(d.lineStyle.color,u.lineStyle.color===d.lineStyle.color):(0,n.default)(d,function(e,t){for(const i of Object.keys(e.styles)){const n=e.styles[i];if((0,r.isObject)(n)&&"color"in n){const e=n.color;n.color=t.getColor(e)}}return e}(d,t)))}return o.updateStudyInputsIfNeeded(d,d.version??e.version,e),d}function D(e,t){if(t.plots&&e.styles)for(let i=0;i<t.plots.length;i++){const n=t.plots[i],r=n.id;if((0,p.isLinePlot)(n)){const t=e.styles[r];t&&null===t.color&&(t.color=v)}else if((0,p.isShapesPlot)(n)){const t=e.styles[r];t&&(null===t.color&&(t.color=g),null===t.textColor&&(t.textColor=x))}else if((0,p.isCharsPlot)(n)){const t=e.styles[r];t&&(null===t.color&&(t.color=M),null===t.textColor&&(t.textColor=b))}else if((0,p.isOhlcPlot)(n)){const t=e.ohlcPlots?.[n.target];t&&null===t.color&&(t.color=y)}}if(e.bands)for(let t=0;t<e.bands.length;++t){const i=e.bands[t];null===i.color&&(i.color=w)}}function V(e,t,i,n,r){return function(e,t,i,n,r,o){const s=k(e,t,i,n),c=l.StudyMetaInfo.getSourceInputIds(e);return c.forEach(((e,t)=>{const i=s.inputs[e];t<o.length?s.inputs[e]=`${o[t].id()}$0`:(0,a.isString)(i)&&i.includes("$")&&(s.inputs[e]="close")})),L(e,r,s)}(e,t,i,n,l.StudyMetaInfo.getStudyPropertyRootName(e),r)}const E=["id","description","description_localized","shortDescription","_metainfoVersion","is_price_study","is_hidden_study","priceScale","fullId","shortId","scriptIdPart","packageId","productId","isTVScriptStub","defaults","symbolSource","historyCalculationMayChange","format","linkedToSeries","isTVLibrary","docs","exports","exportTypes","extra","usesPrivateLib","financialPeriod","groupingKey","pine","isRGB","isTVScript","TVScriptMetaInfoExprs","usePlotsZOrder","isTVScriptStrategy","TVScriptSourceCode","lookaheadFutureData","hasAlertFunction","defaultStrategyAlertMessage","tags","canBeChild","canNotBeChild","_serverMetaInfoVersion","warnings"];function A(e){const t=["visible","precision","minTick","intervalsVisibilities","inputs.first_visible_bar_time","inputs.last_visible_bar_time","inputs.subscribeRealtime"];for(let i=0;i<e.inputs.length;++i){const n=e.inputs[i];n.isHidden&&(t.push(`inputs.${i}`),t.push(`inputs.${n.id}`))}return t}function L(e,t,i,n,r){for(const e of E)delete i[e];const o=new f.DefaultProperty({defaultName:t,state:i,excludedDefaultsKeys:A(e),excludedStateKeys:["version"],theme:n});o.removeProperty("intervalsVisibilities"),o.addChild("intervalsVisibilities",new m.IntervalsVisibilitiesProperty(i&&i.intervalsVisibilities)),"PivotPointsStandard@tv-basicstudies"!==e.id&&"PivotPointsHighLow@tv-basicstudies"!==e.id||!o.hasChild("font")||o.removeProperty("font");const a=l.StudyMetaInfo.versionOf(e);return o.hasChild("version")?o.childs().version?.setValue(a):o.addProperty("version",a),e.TVScriptMetaInfoExprs&&!r&&o.addProperty("patchMetaInfoDefaults",!0),o}},170714:(e,t,i)=>{i.d(t,{
LiveStudyGraphics:()=>a.LiveStudyGraphics,createGraphicsPaneViews:()=>f,createGraphicsPriceAxisViews:()=>p,emptyStudyGraphics:()=>o.emptyStudyGraphics,isStudyGraphicsEmpty:()=>r.isStudyGraphicsEmpty,loadStudyGraphics:()=>o.loadStudyGraphics,saveStudyGraphics:()=>o.saveStudyGraphics});var n=i(77357),r=i(933802),o=i(58467),a=i(223708),s=i(816570),l=i(275925);class c extends s.PriceAxisView{constructor(e,t){super(),this._source=e,this._data=t}_updateRendererData(e,t,i){e.visible=!1;const n=this._source.priceScale(),r=this._source.properties().childs(),o=r.visible.value();if(!n||n.isEmpty()||!o)return;const a=r.graphics.childs()[this._data.lineType]?.childs()[this._data.styleId]?.childs();if(!(void 0!==a&&a.visible&&a.visible.value()&&a.showPrice&&a.showPrice.value()&&this._isLabelVisibleAccordinglyToProperties()))return;const s=this._source.firstValue();if(null===s)return;const c=this._data.line.level,h=(0,l.resetTransparency)(a.color.value());i.background=h,i.textColor=this.generateTextColor(h),i.coordinate=n.priceToCoordinate(c,s),e.text=n.formatPrice(c,s,{signPositive:n.isPercentage()}),e.visible=!0,e.selectedMarkColor=this._source.model().selection().isSelected(this._source)?h:void 0}_isLabelVisibleAccordinglyToProperties(){const e=this._source.model().properties().childs().scalesProperties.childs();return(e.showStudyLastValue.value()||e.showFundamentalLastValue.value())&&this._source.properties().childs().showLabelsOnPriceScale.value()}}const h=(0,n.getLogger)("Chart.StudyGraphics"),u=new Set(["dwgtablecells","tpoBlockSets","tpoLevels","tpoVolumeRows","logs","performance"]);async function d(e,t,n,r){const o=e=>({regularPaneView:new e(t,n,r)}),a=e=>({regularPaneView:new e(t,n,!1,r),forceOverlayPaneView:new e(t,n,!0,r)});switch(e){case"hlines":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,992717))).LevelPaneView);case"lines":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,425087))).LinePaneView);case"shapemarks":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,346069))).ShapeMarkPaneView);case"textmarks":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,277331))).TextMarkPaneView);case"trendchannels":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,578437))).TrendChannelPaneView);case"dwglabels":return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,145188))).DwgLabelPaneView);case"dwglines":return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,364942))).DwgLinePaneView);case"dwgpolylines":return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,510720))).DwgPolylinePaneView);case"dwgboxes":return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,149029))).DwgBoxPaneView);case"dwgtables":
return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,681647))).DwgTablePaneView);case"dwglinefills":return a((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,185))).DwgLineFillPaneView);case"tpos":return{regularPaneView:new((await Promise.all([i.e(25118),i.e(72658),i.e(70438),i.e(26492),i.e(93868),i.e(67618),i.e(60802),i.e(2253),i.e(93801)]).then(i.bind(i,967300))).TpoPaneView)(t,n,r)};case"footprints":return{regularPaneView:new((await Promise.all([i.e(82513),i.e(92044),i.e(39859)]).then(i.bind(i,983319))).VolumeFootprintPaneView)(t,n)}}switch(e){case"hhists":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,339673))).HHistPaneView);case"horizlines":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,409745))).HorizLinePaneView);case"vertlines":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,988465))).VertLinePaneView);case"polygons":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,747661))).PolygonPaneView);case"backgrounds":return o((await Promise.all([i.e(40696),i.e(93868),i.e(14472),i.e(91668)]).then(i.bind(i,84437))).BackgroundPaneView)}return null}async function f(e,t,i){const n=[],r=[],o=Object.keys(e.graphicsInfo());o.sort(((e,t)=>m(e)-m(t)));for(const a of o){const o=await d(a,e,t,i);null!==o?(n.push(o.regularPaneView),o.forceOverlayPaneView&&r.push(o.forceOverlayPaneView)):u.has(a)||h.logWarn(`${a} is not supported by this build of graphics subsystem, skipping`)}return{regularPaneViews:n,forceOverlayPaneViews:r}}function m(e){return r.primitivesZOrders.get(e)??0}function p(e){const t=Object.keys(e.graphicsInfo()),i=[];for(const n of t)switch(n){case"hlines":e.graphics().hlines().forEach(((t,r)=>{t.forEach((t=>{void 0!==t.level&&i.push(new c(e,{line:{level:t.level},styleId:r,lineType:n}))}))}));break;case"horizlines":e.graphics().horizlines().forEach(((t,r)=>{t.forEach((t=>{void 0!==t.level&&i.push(new c(e,{line:{level:t.level},styleId:r,lineType:n}))}))}))}return i}},280521:(e,t,i)=>{i.d(t,{makeNextStudyId:()=>a,makeNextSymbolId:()=>r});let n=0;function r(){return n++,"ss_"+n}let o=0;function a(){return o++,"st"+o}},921619:(e,t,i)=>{i.d(t,{colorsAreCloseEnough:()=>c,isColorDark:()=>d});var n=i(578519),r=i(955482);function o(e){return e<0&&(e+=2*Math.PI),e}function a(e,t){const[i,n,r]=e,[a,s,l]=t,c=(Math.sqrt(n**2+r**2)+Math.sqrt(s**2+l**2))/2,h=.5*(1-Math.sqrt(Math.pow(c,7)/(Math.pow(c,7)+6103515625))),u=(1+h)*n,d=(1+h)*s,f=Math.sqrt(u*u+r*r),m=Math.sqrt(d*d+l*l),p=0===r&&0===u?0:o(Math.atan2(r,u)),_=0===l&&0===d?0:o(Math.atan2(l,d)),v=a-i,g=m-f;let y;const x=f*m;0===x?y=0:(y=_-p,y<-Math.PI?y+=2*Math.PI:y>Math.PI&&(y-=2*Math.PI));const w=2*Math.sqrt(x)*Math.sin(y/2),M=(i+a)/2,b=(f+m)/2;let P;const S=p+_;P=f*m==0?S:Math.abs(p-_)<=Math.PI?S/2:S<2*Math.PI?(S+2*Math.PI)/2:(S-2*Math.PI)/2
;const R=1-.17*Math.cos(P-Math.PI/6)+.24*Math.cos(2*P)+.32*Math.cos(3*P+Math.PI/30)-.2*Math.cos(4*P-Math.PI/180*63),I=Math.PI/6*Math.exp(-Math.pow((P-Math.PI/180*275)/(Math.PI/180*25),2)),T=2*Math.sqrt(Math.pow(b,7)/(Math.pow(b,7)+6103515625)),C=1+.015*Math.pow(M-50,2)/Math.sqrt(20+Math.pow(M-50,2)),k=1+.045*b,D=1+.015*b*R,V=-Math.sin(2*I)*T;return Math.sqrt(Math.pow(v/(1*C),2)+Math.pow(g/(1*k),2)+Math.pow(w/(1*D),2)+V*(g/(1*k))*(w/(1*D)))}const s=[127,127,127];function l(e){const t=e[3],i=e.slice(0,3);for(let e=0;e<3;e++)i[e]=Math.round(i[e]*t+s[e]*(1-t));return i}function c(e,t){return a(m(f(l((0,r.parseRgba)(e)))),m(f(l((0,r.parseRgba)(t)))))<3}const h=(0,n.default)((()=>m(f([0,0,0])))),u=(0,n.default)((()=>m(f([255,255,255]))));function d(e){const t=m(f(l((0,r.parseRgba)(e))));return a(t,h())<a(t,u())}function f(e){const[t,i,n]=e,r=t/255,o=i/255,a=n/255,s=100*(r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),l=100*(o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),c=100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92);return[.4124*s+.3576*l+.1805*c,.2126*s+.7152*l+.0722*c,.0193*s+.1192*l+.9505*c]}function m(e){const[t,i,n]=e,r=t/95.047,o=i/100,a=n/108.883,s=r>.008856?Math.pow(r,1/3):7.787*r+16/116,l=o>.008856?Math.pow(o,1/3):7.787*o+16/116;return[116*l-16,500*(s-l),200*(l-(a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}},396476:(e,t,i)=>{function n(e){let t;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if(e instanceof Date)t=new Date(e.valueOf());else if(Array.isArray(e)){t=[];let i=0;const r=e.length;for(;i<r;i++)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}else{t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}return t}i.d(t,{deepCopy:()=>n})}}]);