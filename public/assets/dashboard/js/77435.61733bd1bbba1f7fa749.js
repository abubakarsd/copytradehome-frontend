(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[77435],{547290:(e,t,r)=>{"use strict";r.d(t,{createAliasSymbolInfoWV:()=>u,createSymbolOrAliasWV:()=>p,getSymbolAliasService:()=>d});var o=r(385955),i=r(950808),s=r(875500),l=r(18107),a=r(960096);function n(e){return"SymbolAliasService"+(e?`_${e}`:"")}class c{constructor(e){this._onChanged=new s.Delegate;const t=e.state??i.getJSON(n(e?.id))??[];this._aliasesByProName=new Map(t),this._aliasesByName=new Map(Array.from(this._aliasesByProName.values()).map((e=>[e.aliasName,e]))),this._context=e}getAllAliases(){return Array.from(this._aliasesByProName.values())}getAliasByProName(e){return this._aliasesByProName.get(e)??null}getAliasByName(e){return this._aliasesByName.get(e)??null}addAlias(e){if(this._aliasesByName.has(e.aliasName))throw new Error(`Alias ${e.aliasName} already exists`);if(this._aliasesByProName.has(e.symbolProName))throw new Error(`Alias for symbol ${e.symbolProName} already exists`);this._aliasesByProName.set(e.symbolProName,e),this._aliasesByName.set(e.aliasName,e),this._onChanged.fire(e.symbolProName,e.aliasName,e),this._save()}updateAlias(e){const t=this._aliasesByName.get(e.aliasName);if(!t)throw new Error(`Alias ${e.aliasName} does not exist`);if("symbolProName"in e)throw new Error("Cannot update alias pro name");(0,o.merge)(t,e),this._aliasesByProName.set(t.symbolProName,t),this._aliasesByName.set(t.aliasName,t),this._onChanged.fire(t.symbolProName,t.aliasName,t),this._save()}removeAlias(e){const t=this._aliasesByName.get(e);if(!t)throw new Error(`Alias ${e} not found`);this._aliasesByProName.delete(t.symbolProName),this._aliasesByName.delete(e),this._onChanged.fire(e,t.symbolProName,null),this._save()}onAliasChanged(){return this._onChanged}state(e){const t=new Set(e??[]);return Array.from(this._aliasesByProName.entries()).filter((([r])=>!e||t.has(r)))}_save(){i.setJSON(n(this._context?.id),Array.from(this._aliasesByProName.entries()))}}const h=new Map;function d(e){const t=e??{id:""};let r=h.get(t.id);return r||(r=new c(t)),h.set(t.id,r),r}function u(e,t){return t?(0,l.combine)(((e,r)=>{if(!e)return null;const o=t.getAliasByProName(e.pro_name);return{...e,name:o?.aliasName??e.name,description:o?.description??e.description,local_description:o?.description??e.local_description,...o?.formattingOptions}}),e,(0,a.createWVFromGetterAndSubscription)((e=>(e??0)+1),t.onAliasChanged()).ownership()).ownership():e}function p(e,t,r){return r?(0,l.combine)(((e,t,o)=>{if(!t)return e;const i=r.getAliasByProName(t.pro_name);return i?.aliasName??e}),e,t,(0,a.createWVFromGetterAndSubscription)((e=>(e??0)+1),r.onAliasChanged()).ownership()).ownership():e}},998918:(e,t,r)=>{"use strict";r.d(t,{DialogRenderer:()=>i});var o=r(168509);class i{constructor(){this._container=document.createElement("div"),this._visibility=new o.WatchedValue(!1),this._rootInstance=null}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},282997:(e,t,r)=>{"use strict";r.d(t,{barFunctionByStyle:()=>i});var o=r(253443)
;function i(e,t){switch(e){case 12:return(0,o.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,o.barFunction)(t??"close");default:return(0,o.barFunction)("close","open")}}},343548:(e,t,r)=>{"use strict";r.d(t,{CustomSourceBase:()=>o});class o{constructor(e,t){this._id=e,this._model=t}id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},972951:(e,t,r)=>{"use strict";r.d(t,{alwaysShowLastPriceAndLastDayChange:()=>o,lastDayChangeAvailable:()=>i});r(266150);const o=!1,i=!0},781608:(e,t,r)=>{"use strict";r.d(t,{LogicalRange:()=>i});var o=r(185842);class i{constructor(e,t){(0,o.assert)(e<=t,"The left value should be greater than or equal to the right value"),this._left=e,this._right=t}left(){return this._left}right(){return this._right}length(){return this._right-this._left+1}contains(e,t){return e<this._left-.5?!0===t&&1:e>this._right+.5?!0===t&&2:!0!==t||0}before(e){return e<this._left-.5}after(e){return e>this._right+.5}intersects(e){return!(this.after(e.left())||this.before(e.right()))}equals(e){return this._left===e.left()&&this._right===e.right()}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}},305025:(e,t,r)=>{"use strict";var o;r.d(t,{PaneCursorType:()=>o}),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize",e[e.HorizontalResize=7]="HorizontalResize",e[e.DiagonalNeSwResize=8]="DiagonalNeSwResize",e[e.DiagonalNwSeResize=9]="DiagonalNwSeResize",e[e.Text=10]="Text",e[e.None=11]="None"}(o||(o={}))},644592:(e,t,r)=>{"use strict";r.d(t,{priceSourceTitles:()=>i});var o=r(729193);const i={open:o.t(null,{context:"price source"},r(50938)),high:o.t(null,{context:"price source"},r(950336)),low:o.t(null,{context:"price source"},r(76537)),close:o.t(null,{context:"price source"},r(922983)),hl2:o.t(null,{context:"price source"},r(922652)),hlc3:o.t(null,{context:"price source"},r(656892)),ohlc4:o.t(null,{context:"price source"},r(587306)),hlcc4:o.t(null,{context:"price source"},r(691174))}},982898:(e,t,r)=>{"use strict";r.d(t,{QuotesProvider:()=>a});var o=r(654233),i=r(660101),s=r(875500),l=r(584104);class a{constructor(e="full",t){this._quotes=new o.WatchedObject(null),this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new s.Delegate,this._quoteSymbolChanged=new s.Delegate,this._completed=new o.WatchedValue(!1),this._multiplexerType=e,this._hibernated=t,this._hibernated?.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,l.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,
this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes.readonly()}completed(){return this._completed.readonly()}async quotesSnapshot(e){return(0,i.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession(),this._hibernated?.release()}_onUpdate(e,t){this._quotes.setValue(e?.values??null),t&&t.values&&this._quotesUpdate.fire(e,t),void 0!==e.complete&&this._completed.setValue(!0)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,i.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,i.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes.setValue(null),this._completed.setValue(!1))}}},186777:(e,t,r)=>{"use strict";r.d(t,{SelectionRenderer:()=>h});var o=r(657415),i=r(691069),s=r(823291),l=r(141463),a=r(305025),n=r(550837);const c=s.colorsPalette["color-tv-blue-600"];class h extends n.BitmapCoordinatesPaneRenderer{constructor(e){super(),this._data=e||null}setData(e){this._data=e}hitTest(e){if(!this._data||!this._data.visible)return null;for(let t=0;t<this._data.points.length;t++){const r=this._data.points[t];if(r.point.subtract(e).length()<=6)return r.hitTestResult?r.hitTestResult:new l.HitTestResult(this._data.hittestResult,{pointIndex:r.pointIndex,cursorType:r.cursorType??a.PaneCursorType.Default,ownerSourceId:this._data.ownerSourceId})}return null}doesIntersectWithBox(e){return!!this._data&&this._data.points.some((t=>(0,i.pointInBox)(t.point,e)))}_drawImpl(e){if(null===this._data||!this._data.visible)return;const{points:t,bgColors:r,vertOffset:i=0}=this._data;for(let l=0;l<t.length;++l){const{point:a,lineWidth:n}=t[l];(s=a,Number.isFinite(s.x)&&Number.isFinite(s.y))&&this._drawMarker(e,a.add((0,o.point)(0,i)),this._data,r[l],n)}var s}_drawMarker(e,t,r,i,s=1){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:n}=e,{color:h=c,withOutline:u=!0}=r,p=Math.max(1,Math.floor(a))%2/2,_=(0,o.point)(Math.round(t.x*a)+p,Math.round(t.y*n)+p),b=d(_,Math.round(4*a));l.fillStyle=i,l.fill(u?d(_,Math.round(5*a)+p):b),l.fillStyle=h,b.addPath(d(_,Math.floor((4-s)*a))),l.fill(b,"evenodd")}}function d(e,t){const r=new Path2D;return r.arc(e.x,e.y,t,0,2*Math.PI,!0),r}},61063:(e,t,r)=>{"use strict";r.d(t,{SeriesBarColorer:()=>_});var o=r(823291),i=r(185842),s=r(867219),l=r(115676),a=r(350204);const n=(0,o.getHexColorByName)("color-minty-green-500"),c=(0,
o.getHexColorByName)("color-ripe-red-500");function h(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function d(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function u(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function p(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class _ extends a.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,r,o){const i=r;i.barColor=void 0,i.barBorderColor=void 0,i.barWickColor=void 0,i.isBarHollow=void 0,i.isBarUp=void 0,i.upColor=void 0,i.downColor=void 0,i.isTwoColorBar=void 0,i.isMergedBar=void 0;const s=this._series.properties();switch(s.childs().style.value()){case 2:case 14:case 15:this._applyLineStyle(e,t,r,o,s);break;case 18:this._applyLineStyle(e,t,r,o,s,!0);break;case 3:this._applyAreaStyle(r,s);break;case 16:this._applyHLCAreaStyle(e,t,r,o,s);break;case 0:this._applyBarStyle(e,r,o,s);break;case 17:case 1:case 19:this._applyCandleStyle(e,r,o,s);break;case 9:this._applyHollowCandleStyle(e,r,o,s);break;case 8:this._applyHAStyle(e,t,r,o,s);break;case 10:this._applyBaseLineStyle(e,t,r,o,s);break;case 12:this._applyHiLoStyle(t,r,s);break;case 13:this._applyColumnStyle(e,r,o,s);break;case 4:this._applyRenkoStyle(e,t,r,o,s);break;case 7:this._applyPBStyle(e,t,r,o,s);break;case 5:this._applyKagiStyle(e,t,r,o,s);break;case 6:this._applyPnfStyle(e,t,r,o,s);break;case 11:this._applyRangeStyle(e,t,r,o,s);break;case 20:this._applySVPStyle(e,r,o,s);break;case 21:this._applyHLCBarsStyle(e,r,o,s)}return r}static upColor(e,t){const r=e.childs(),o=r.style.value();switch(o){case 18:return{barColor:r.tpoStyle.childs().color.value()};case 20:return{barColor:r.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:r.lineStyle.childs().color.value()};case 14:return{barColor:r.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:r.steplineStyle.childs().color.value()};case 3:return{barColor:r.areaStyle.childs().linecolor.value()};case 16:return{barColor:r.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:n};case 0:return{barColor:r.barStyle.childs().upColor.value()};case 17:return h(r.volFootprintStyle.childs());case 19:return h(r.volCandlesStyle.childs());case 1:return h(r.candleStyle.childs());case 9:return h(r.hollowCandleStyle.childs());case 8:return h(r.haStyle.childs());case 10:return{barColor:r.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:r.hiloStyle.childs().color.value(),
barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:r.columnStyle.childs().upColor.value()};case 4:return u(r.renkoStyle.childs(),t);case 7:return u(r.pbStyle.childs(),t);case 5:return u(r.kagiStyle.childs(),t);case 6:return u(r.pnfStyle.childs(),t);case 11:0;const o=r.rangeStyle.childs(),i=o.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?o.upColorProjection.value():i?o.upColor.value():o.candlesUpColor.value(),barBorderColor:t?o.upColorProjection.value():i?o.upColor.value():o.candlesBorderUpColor.value()};case 21:return{barColor:r.hlcBarsStyle.childs().color.value()}}(0,i.ensureNever)(o)}static downColor(e,t){const r=e.childs(),o=r.style.value();switch(o){case 2:return{barColor:r.lineStyle.childs().color.value()};case 18:return{barColor:r.tpoStyle.childs().color.value()};case 20:return{barColor:r.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:r.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:r.steplineStyle.childs().color.value()};case 3:return{barColor:r.areaStyle.childs().linecolor.value()};case 16:return{barColor:r.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:r.barStyle.childs().downColor.value()};case 17:return d(r.volFootprintStyle.childs());case 1:return d(r.candleStyle.childs());case 19:return d(r.volCandlesStyle.childs());case 9:return d(r.hollowCandleStyle.childs());case 8:return d(r.haStyle.childs());case 10:return{barColor:r.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:r.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:r.columnStyle.childs().downColor.value()};case 4:return p(r.renkoStyle.childs(),t);case 7:return p(r.pbStyle.childs(),t);case 5:return p(r.kagiStyle.childs(),t);case 6:return p(r.pnfStyle.childs(),t);case 11:0;const o=r.rangeStyle.childs(),i=o.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?o.downColorProjection.value():i?o.downColor.value():o.candlesDownColor.value(),barBorderColor:t?o.downColorProjection.value():i?o.downColor.value():o.candlesBorderDownColor.value()};case 21:return{barColor:r.hlcBarsStyle.childs().color.value()}}(0,i.ensureNever)(o)}_applyLineStyle(e,t,r,o,s,l){if(r.barColor=_.upColor(s).barColor,l)return;const a=this._findBar(e,t,o),n=this._series.barFunction()(a),c=this._series.priceScale(),h=this._series.firstValue();if(null==n||c.isEmpty()||null==h)return;const d=c.priceToCoordinate(n,h);r.barColor=(0,i.ensureNotNull)(this._series.lineColorAtYPercentFromTop(d/c.height()))}_applyAreaStyle(e,t){e.barColor=_.upColor(t).barColor}_applyHLCAreaStyle(e,t,r,o,i){const s=this._isUp(e,!1,o,this._series.data().first()?.index!==e)?_.upColor(i,t):_.downColor(i,t);r.barColor=s.barColor,r.barBorderColor=s.barBorderColor}_applyBarStyle(e,t,r,o){const i=this._isUp(e,!1,r,o.childs().barStyle.childs().barColorsOnPrevClose.value())?_.upColor(o):_.downColor(o);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}
_applyCandleStyle(e,t,r,o){const i=o.childs(),s=1===i.style.value()?i.candleStyle.childs():19===i.style.value()?i.volCandlesStyle.childs():i.volFootprintStyle.childs(),l=this._isUp(e,!1,r,s.barColorsOnPrevClose.value()&&this._series.data().first()?.index!==e),a=l?_.upColor(o):_.downColor(o);t.barColor=a.barColor,t.barBorderColor=a.barBorderColor,t.barWickColor=l?s.wickUpColor?s.wickUpColor.value():s.wickColor.value():s.wickDownColor?s.wickDownColor.value():s.wickColor.value()}_applyHollowCandleStyle(e,t,r,o){const i=o.childs().hollowCandleStyle.childs(),s=this._isUp(e,!1,r,this._series.data().first()?.index!==e),l=s?_.upColor(o):_.downColor(o);t.barColor=l.barColor,t.barBorderColor=l.barBorderColor,t.barWickColor=s?i.wickUpColor?i.wickUpColor.value():i.wickColor.value():i.wickDownColor?i.wickDownColor.value():i.wickColor.value();const a=this._findBar(e,!1,r);t.isBarHollow=a[1]<=a[4]}_applyHAStyle(e,t,r,o,i){const s=i.childs().haStyle.childs(),l=this._isUp(e,t,o,s.barColorsOnPrevClose.value()),a=l?_.upColor(i):_.downColor(i);r.barColor=a.barColor,r.barBorderColor=a.barBorderColor,r.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value()}_applyBaseLineStyle(e,t,r,o,s){const l=this._findBar(e,t,o),a=s.childs().baselineStyle.childs(),n=this._series.priceScale(),c=Math.round(n.height()*(Math.abs(100-a.baseLevelPercentage.value())/100)),h=(0,i.ensureNotNull)(this._series.firstValue()),d=n.coordinateToPrice(c,h);l[4]>d?r.barColor=_.upColor(s,t).barColor:r.barColor=_.downColor(s,t).barColor}_applyHiLoStyle(e,t,r){const o=_.upColor(r,e);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyColumnStyle(e,t,r,o){const i=o.childs().columnStyle.childs(),s=this._isUp(e,!1,r,i.barColorsOnPrevClose.value())?_.upColor(o):_.downColor(o);t.color=s.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,r,o,i){const s=i.childs().renkoStyle.childs(),l=this._isUp(e,t,o,!1),a=l?_.upColor(i,t):_.downColor(i,t);r.barColor=a.barColor,r.barBorderColor=a.barBorderColor,r.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value(),r.isBarUp=l}_applyPBStyle(e,t,r,o,i){const s=this._isUp(e,t,o,!1),l=s?_.upColor(i,t):_.downColor(i,t);r.barColor=l.barColor,r.barBorderColor=l.barBorderColor,r.isBarUp=s}_applyKagiStyle(e,t,r,o,i){let s;r.upColor=_.upColor(i,t).barColor,r.downColor=_.downColor(i,t).barColor;const l=this._findBar(e,t,o);l[3]<l[6]&&l[6]<l[2]?(s=l[1]<=l[4],r.isTwoColorBar=!0):(s=l[1]<=l[4]?l[1]===l[6]:l[1]!==l[6],r.isTwoColorBar=!1),r.barColor=s?r.upColor:r.downColor,r.isBarUp=l[1]<=l[4]}_applyPnfStyle(e,t,r,o,i){const s=this._findBar(e,t,o)[6],l=s>0,a=_.upColor(i,t),n=_.downColor(i,t);r.isBarUp=l,r.isMergedBar=2===Math.abs(s),r.upColor=a.barColor,r.downColor=n.barColor,r.barColor=l?a.barColor:n.barColor}_applyRangeStyle(e,t,r,o,i){const l=i.childs().rangeStyle.childs(),a=l.barStyle.value()===s.RangeBarStyle.Bars,n=this._isUp(e,!1,o,!1),c=n?_.upColor(i,t):_.downColor(i,t),h=n?t?l.upColorProjection.value():a?void 0:l.candlesWickUpColor.value():t?l.downColorProjection.value():a?void 0:l.candlesWickDownColor.value()
;r.barColor=c.barColor,r.barBorderColor=c.barBorderColor,r.wickColor=h,r.barWickColor=h}_applySVPStyle(e,t,r,o){const i=this._isUp(e,!1,r,!1)?_.upColor(o,!1):_.downColor(o,!1);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyHLCBarsStyle(e,t,r,o){t.barColor=o.childs().hlcBarsStyle.childs().color.value()}_findBar(e,t,r){return r?r.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,r){if(r&&r.previousValue)return r.previousValue;const o=this._series.bars().search(e-1,l.PlotRowSearchMode.NearestLeft,4);return null!==o?o.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,r,o){const i=this._findBar(e,t,r);if(o){return this._findPrevBar(e,t,r)[4]<=i[4]}return i[1]<=i[4]}}},288311:(e,t,r)=>{"use strict";r.d(t,{SeriesAreaPaneView:()=>n});var o=r(275925),i=r(617192),s=r(449938),l=r(186777),a=r(499717);class n extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),r=t.transparency.value(),a={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,o.generateColor)(t.color1.value(),r),color2:(0,o.generateColor)(t.color2.value(),r),skipHoles:!0},n=new s.CompositeRenderer;return n.append(new i.PaneRendererArea(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new l.SelectionRenderer(this._selectionData)),n}}},538911:(e,t,r)=>{"use strict";r.d(t,{SeriesBarsPaneView:()=>a});var o=r(449938),i=r(186777),s=r(865722),l=r(855714);class a extends s.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},r=new o.CompositeRenderer;return r.append(new l.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&r.append(new i.SelectionRenderer(this._selectionData)),r}_createItem(e,t,r){const o={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:r.barColor,left:NaN,right:NaN,timePointIndex:e};return(0,s.baseBarCandlesUpdater)(t,o)?o:null}}},855592:(e,t,r)=>{"use strict";r.d(t,{SeriesBaselinePaneView:()=>m});var o=r(275925),i=r(449938),s=r(657415),l=r(578792),a=r(717086),n=r(515338),c=r(188485),h=r(851682),d=r(141463),u=r(138264);class p extends h.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:r,bottomLineWidth:o}=this._data,i=(0,n.interactionTolerance)().series+(r+o)/4,l=(0,
c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),h=Math.max(1,l-1),u=Math.min(t.length-1,l+1);for(let r=h;r<=u;++r){const o=t[r-1],l=t[r],{distance:n}=(0,a.distanceToSegment)((0,s.point)(o.center,o.y),(0,s.point)(l.center,l.y),(0,s.point)(e.x,e.y));if(n<=i)return new d.HitTestResult(d.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:r,bottom:o,bottomFillColor1:i,bottomFillColor2:a,topFillColor1:c,topFillColor2:h,topLineColor:d,bottomLineColor:p,topLineWidth:_,bottomLineWidth:b,topLineStyle:m,bottomLineStyle:C}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===t)return!1;let r=e.length-1;for(;r>t&&!(0,n.coordinateIsValid)(e[r].y);)r--;return!(t>r)}(t))return;const S=e.context,{topItems:v,bottomItems:y}=function(e,t){const r=[],o=[];let i=null;for(let a=0;a<e.length;a++){let c=e[a];const h=e[a+1]||{};if((0,n.coordinateIsValid)(c.y))c.y<=t&&r.push(c),c.y>=t&&o.push(c),i=c;else{if(null===i)continue;c=i}if((0,n.coordinateIsValid)(h.y)&&(c.y>t&&h.y<t||c.y<t&&h.y>t))if(Math.abs(c.center-h.center)<1){const e={center:c.center,y:t};r.push(e),o.push(e)}else{const e=(0,l.intersectLineSegments)((0,s.point)(c.center,c.y),(0,s.point)(h.center,h.y),(0,s.point)(c.center,t),(0,s.point)(h.center,t));if(null!==e){const t={center:c.center+(h.center-c.center)*e,y:c.y+(h.y-c.y)*e};r.push(t),o.push(t)}}}return{topItems:r,bottomItems:o}}(t,r);S.lineCap="round",S.lineJoin="round",0!==v.length&&(S.beginPath(),S.moveTo(v[0].center,r),this._makeLine(S,v,!0,0),S.closePath(),S.fillStyle=this._makeLinearGradient(S,c,h,r-o,r),S.fill(),S.beginPath(),this._makeLine(S,v,!1,0),S.lineWidth=_,S.strokeStyle=d,(0,u.setLineStyle)(S,m),S.stroke()),0!==y.length&&(S.beginPath(),S.moveTo(y[0].center,r),this._makeLine(S,y,!0,1),S.closePath(),S.fillStyle=this._makeLinearGradient(S,i,a,r,r+o),S.fill(),S.beginPath(),this._makeLine(S,y,!1,1),S.lineWidth=b,S.strokeStyle=p,(0,u.setLineStyle)(S,C),S.stroke())}_makeLine(e,t,r,o){if(null===this._data)return;const i=t.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===i)return;const{barSpacing:s,baseLevelCoordinate:l}=this._data,a=.25*s;let c;const h=t.length;for(let s=i;s<h;s++){const h=t[s],d=t[s+1]||{};if((0,n.coordinateIsValid)(h.y)){if(0===o){if(c&&c.y>=l&&h.y>=l){e.moveTo(h.center,h.y);continue}}else if(c&&c.y<=l&&h.y<=l){e.moveTo(h.center,h.y);continue}if(c&&(0,n.coordinateIsValid)(c.y))e.lineTo(h.center,h.y),r&&!(0,n.coordinateIsValid)(d.y)&&e.lineTo(h.center,l);else if(d&&(0,n.coordinateIsValid)(d.y))r?(s!==i&&e.lineTo(h.center,l),e.lineTo(h.center,h.y)):e.moveTo(h.center,h.y);else if(r){if(0===s)continue;s!==i&&e.lineTo(h.center-a,l),e.lineTo(h.center-a,h.y),e.lineTo(h.center+a,h.y),e.lineTo(h.center+a,l)}else e.moveTo(h.center-a,h.y),e.lineTo(h.center+a,h.y);c=h}}}_makeLinearGradient(e,t,r,o,i){const s=e.createLinearGradient(0,o,0,i);return s.addColorStop(0,t),s.addColorStop(1,r),s}}var _=r(186777),b=r(499717);class m extends b.SeriesSingleLinePaneView{constructor(){super(...arguments),
this._renderer=new p,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._topLineStyle=0,this._bottomLineStyle=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,topLineStyle:this._topLineStyle,bottomLineStyle:this._bottomLineStyle,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new i.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new _.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),r=t.transparency.value();this._topFillColor1=(0,o.generateColor)(t.topFillColor1.value(),r),this._topFillColor2=(0,o.generateColor)(t.topFillColor2.value(),r),this._bottomFillColor1=(0,o.generateColor)(t.bottomFillColor1.value(),r),this._bottomFillColor2=(0,o.generateColor)(t.bottomFillColor2.value(),r),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._topLineStyle=t.topLineStyle.value(),this._bottomLineStyle=t.bottomLineStyle.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},693078:(e,t,r)=>{"use strict";r.d(t,{SeriesWaterlinePaneView:()=>a});var o=r(786775),i=r(305025),s=r(141463),l=r(515834);class a extends o.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:i.PaneCursorType.VerticalResize,activeItem:0,areaName:s.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new s.HitTestResult(s.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=l.LINESTYLE_SPARSE_DOTTED}_updateImpl(){const{baseLevelPercentage:e,paneHeight:t,color:r}=this._getters,o=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(o/100)),this._lineRendererData.color=r()}}},853557:(e,t,r)=>{"use strict";r.d(t,{SeriesCandlesPaneView:()=>n});var o=r(449938),i=r(515338),s=r(186777),l=r(865722),a=r(426820);class n extends l.SeriesBarCandlesPaneView{constructor(e,t,r=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=r}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null
;const t=this._source.properties().childs(),r=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),l=this._model.timeScale().barSpacing(),n={bars:this._bars,barSpacing:l,bodyVisible:r.drawBody.value(),borderVisible:r.drawBorder.value(),borderColor:r.borderColor.value(),wickColor:r.wickColor.value(),barWidth:(0,i.optimalBarWidth)(l),wickVisible:r.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new o.CompositeRenderer;return c.append(new a.PaneRendererCandles(n)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new s.SelectionRenderer(this._selectionData)),c}_createItem(e,t,r){const o={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:r.barColor,borderColor:r.barBorderColor,wickColor:r.barWickColor,hollow:r.isBarHollow};return(0,l.baseBarCandlesUpdater)(t,o)?o:null}}},389759:(e,t,r)=>{"use strict";r.d(t,{SeriesColumnsPaneView:()=>p});var o=r(185842),i=r(657415),s=r(393418),l=r(266150),a=r(141463),n=r(449938),c=r(115676),h=r(272432),d=r(186777),u=r(882336);r(323197);class p{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,l.isFeaturesetEnabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new h.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new n.CompositeRenderer;return t.append(new u.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const l=this._source.nearestIndex(r.firstBar(),c.PlotRowSearchMode.NearestRight),n=this._source.nearestIndex(r.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===l||void 0===n)return;const h=this._source.barColorer(),d={},u=this._source.barFunction();for(const{index:e,value:t}of this._source.bars().rangeIterator(l,n)){const r=u(t);if(!(0,s.default)(r))continue;d.value=t;let o=this._source.precomputedBarStyle(t);void 0===o&&(o=h.barStyle(e,!1,d),this._source.setPrecomputedBarStyle(t,o)),this._items.push({timePointIndex:e,price:r,left:NaN,center:NaN,right:NaN,y:NaN,style:o}),d.previousValue=t}const p=this._source.firstValue();if(null===p)return;t.fillYCoordinates(this._items,p),e.fillBarBorders(this._items);this._source.properties().childs().columnStyle.childs().baselinePosition?.value();if(this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const r=this._selectionIndexer.indexes()
;this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:a.HitTarget.Regular};const s=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=a.HitTarget.Regular;for(let o=0;o<r.length;o++){const l=r[o],a=this._source.bars().valueAt(l);if(null===a)continue;const n=u(a),c=e.indexToCoordinate(l),h=t.priceToCoordinate(n,p);this._selectionData.points.push({point:new i.Point(c,h)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/s))}}else this._selectionIndexer.clear()}}},41846:(e,t,r)=>{"use strict";r.d(t,{SeriesHiLoPaneView:()=>m});var o=r(904003),i=r(26878),s=r(188485),l=r(515338),a=r(141463),n=r(851682);class c extends n.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,l.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,r=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-r)return null;if(e.x>t[t.length-1].center+r)return null;const o=t[(0,s.lowerbound)(t,e.x-r,((e,t)=>e.center<t))];if(e.x<o.center-r||e.x>o.center+r)return null;const i=(0,l.interactionTolerance)().series+this._barWidth/2,n=Math.min(o.high,o.low),c=Math.max(o.high,o.low),h=this._data.fontSize;return n-i-h<=e.y&&e.y<=n+i||c-i<=e.y&&e.y<=c+i+h?new a.HitTestResult(a.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:r,labelColor:o,bars:s,inverted:l,labelsPadding:a}=this._data,n=e.context;n.textAlign="center",n.fillStyle=o,n.font=(0,i.makeFont)(r,t);for(let e=0;e<s.length;++e){const t=s[e],r=Math.round(Math.min(t.high,t.low)),o=Math.round(Math.max(t.high,t.low)),i=Math.round(t.center);n.textBaseline="alphabetic",n.fillText(l?t.lowLabel:t.highLabel,i,r-a),n.textBaseline="top",n.fillText(l?t.highLabel:t.lowLabel,i,o+a)}}}var h=r(449938),d=r(186777),u=r(880753),p=r(320093),_=r(426820),b=r(865722);class m extends b.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new _.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,o.default)(((e,t)=>Math.max(1,(0,s.lowerboundExt)((e=>e+1),null,(r=>{const o=(0,i.makeFont)(r,u.CHART_FONT_FAMILY);return(0,p.measureText)(e,o).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null;const t=new h.CompositeRenderer,r=this._needLabels(),o=this._source.properties().childs().hiloStyle.childs(),i=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({generateLabels:r,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:o.drawBody.value(),barSpacing:i,borderVisible:o.showBorders.value(),barWidth:(0,l.optimalHiLoWidth)(i),isPriceScaleInverted:e.isInverted()}),
t.append(this._candlesRenderer),r){const r=this._calculateLabelFontSize();r&&r>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:i,font:u.CHART_FONT_FAMILY,fontSize:r,labelColor:o.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*r}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,r,o){const i={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:r.barColor,borderColor:r.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,b.baseBarCandlesUpdater)(t,i))return null;if(i.open=i.high,i.close=i.low,o.generateLabels){const e=o.formatter.format(i.high),t=o.formatter.format(i.low);i.highLabel=e,i.lowLabel=t;const r=(e.length>t.length?e:t).replace(/\d/g,"0");r.length>this._maxLengthLabel.length&&(this._maxLengthLabel=r)}return i}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},310587:(e,t,r)=>{"use strict";r.d(t,{SeriesHLCAreaPaneView:()=>m});var o=r(657415),i=r(185842),s=r(266150),l=r(324111),a=r(272432),n=r(186777),c=r(115676),h=r(515338),d=r(449938),u=r(141463),p=r(466497),_=r(481756);class b extends _.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class m{constructor(e,t){this._isMarkersEnabled=(0,s.isFeaturesetEnabled)("source_selection_markers"),this._hlcAreaCache=new b,this._highPoints=new _.CachedContainer,this._closePoints=new _.CachedContainer,this._lowPoints=new _.CachedContainer,this._barsBorders=new _.CachedContainer,this._filledAreas=new l.CachedMap,this._renderer=new d.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){this._renderer.clear();const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const s=this._source.firstValue();if(null===s)return;const a=this._source.nearestIndex(r.firstBar()-1,c.PlotRowSearchMode.NearestLeft)??r.firstBar()-1,d=this._source.nearestIndex(r.lastBar()+1,c.PlotRowSearchMode.NearestRight)??r.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(a),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),
this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let _,b,m;this._source.bars().range(a,d).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const r=this._hlcAreaCache.at(e);r.close=t[4],r.high=t[2],r.low=t[3]}return!1}));const C=new Map,S=a+this._hlcAreaCache.length();for(let e=a;e<S;e++){const t=this._hlcAreaCache.at(e),r=t.close??null,o=t.high??null,i=t.low??null;(null!==r||null!==o||null!==i||Number.isFinite(_)||Number.isFinite(b)||Number.isFinite(m))&&(_=r,b=o,m=i,this._highPoints.push(o),this._closePoints.push(r),this._lowPoints.push(i),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),C.set(e,this._barsBorders.length()-1))}t.pricesArrayToCoordinates(this._highPoints.data(),s,this._highPoints.length()),t.pricesArrayToCoordinates(this._closePoints.data(),s,this._closePoints.length()),t.pricesArrayToCoordinates(this._lowPoints.data(),s,this._lowPoints.length()),e.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const v=this._source.properties().childs().hlcAreaStyle.childs(),y=v.highCloseFillColor.value(),g=v.closeLowFillColor.value(),w=this._filledAreas.get(y)??new l.AreaBackgroundItemsGroup({type:0,color:y}),f=w.newItem()??new l.AreaBackgroundItem;w.push(f),this._filledAreas.set(y,w);const P=this._filledAreas.get(g)??new l.AreaBackgroundItemsGroup({type:0,color:g}),B=P.newItem()??new l.AreaBackgroundItem;P.push(B),this._filledAreas.set(g,P);const N=[],x=[],L=[],I=this._barsBorders.length();for(let e=0;e<I;e++){const t=this._closePoints.at(e),r=this._highPoints.at(e),o=this._lowPoints.at(e),i=this._barsBorders.at(e),s=i.center,l=(0,h.coordinateIsValid)(t),a=(0,h.coordinateIsValid)(r),n=(0,h.coordinateIsValid)(o);l&&a&&n&&(f.addPoints1Point(s,r),f.addPoints2Point(s,t),B.addPoints1Point(s,t),B.addPoints2Point(s,o),N.push({y:r,price:NaN,...i}),x.push({y:t,price:NaN,...i}),L.push({y:o,price:NaN,...i}))}const k=e.barSpacing();if(this._renderer.append(new l.AreaBackgroundRenderer({barSpacing:k,colorAreas:this._filledAreas})),v.lowLineVisible.value()&&this._renderer.append(new p.PaneRendererLine({barSpacing:k,items:L,simpleMode:!0,withMarkers:!1,lineColor:v.lowLineColor.value(),lineStyle:v.lowLineStyle.value(),lineWidth:v.lowLineWidth.value(),skipHoles:!0})),v.highLineVisible.value()&&this._renderer.append(new p.PaneRendererLine({barSpacing:k,items:N,simpleMode:!0,withMarkers:!1,lineColor:v.highLineColor.value(),lineStyle:v.highLineStyle.value(),lineWidth:v.highLineWidth.value(),skipHoles:!0})),this._renderer.append(new p.PaneRendererLine({barSpacing:k,items:x,simpleMode:!0,withMarkers:!1,lineColor:v.closeLineColor.value(),lineStyle:v.closeLineStyle.value(),lineWidth:v.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const t=this._selectionIndexer.indexes(),r=[],s=[],l=(0,i.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let e=0;e<t.length;e++){const i=t[e],a=C.get(i);if(void 0===a)continue
;const n=this._closePoints.at(a),c=this._barsBorders.at(a).center;r.push({point:new o.Point(c,n)}),s.push(this._model.backgroundColorAtYPercentFromTop(n/l))}this._renderer.append(new n.SelectionRenderer({bgColors:s,points:r,visible:!0,barSpacing:e.barSpacing(),hittestResult:u.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},814515:(e,t,r)=>{"use strict";r.d(t,{SeriesHLCBarsPaneView:()=>n});var o=r(449938),i=r(186777),s=r(855714),l=r(538911);function a(e){return null!=e}class n extends l.SeriesBarsPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:!0,thinBars:e.hlcBarsStyle.childs().thinBars.value()},r=new o.CompositeRenderer;return r.append(new s.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&r.append(new i.SelectionRenderer(this._selectionData)),r}_createItem(e,t,r){const o=t[2],i=t[3],s=t[4];if(!a(o)||!a(i)||!a(s))return null;return{center:NaN,open:NaN,high:o,low:i,close:s,color:r.barColor,left:NaN,right:NaN,timePointIndex:e}}}},969699:(e,t,r)=>{"use strict";r.d(t,{SeriesHollowCandlesPaneView:()=>n});var o=r(449938),i=r(515338),s=r(186777),l=r(426820),a=r(853557);class n extends a.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),r=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:r,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,i.optimalBarWidth)(r),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},n=new o.CompositeRenderer;return n.append(new l.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new s.SelectionRenderer(this._selectionData)),n}}},832691:(e,t,r)=>{"use strict";r.d(t,{SeriesLinePaneView:()=>h});var o=r(141463),i=r(449938),s=r(466497),l=r(213910),a=r(186777),n=r(499717),c=r(841397);class h extends n.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let r,n=!1;2===t?r=e.lineStyle.childs():14===t?(r=e.lineWithMarkersStyle.childs(),n=!0):15===t?r=e.steplineStyle.childs():18===t&&(r=e.tpoStyle.childs());const h=this._model.timeScale().barSpacing(),d=r.colorType?.value()!==c.ColorType.Gradient?{type:c.ColorType.Solid,color:r.color.value()}:{type:c.ColorType.Gradient,startColor:r.gradientStartColor.value(),endColor:r.gradientEndColor.value()},u={barSpacing:h,items:this._items,lineColor:d,lineStyle:r.linestyle.value(),withMarkers:n,lineWidth:r.linewidth.value(),simpleMode:!0,hitTestResult:o.HitTarget.Regular,skipHoles:!0};let p,_;if(p=15===t?new l.PaneRendererStepLine(u):new s.PaneRendererLine(u),
this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new i.CompositeRenderer;e.append(p),e.append(new a.SelectionRenderer(this._selectionData)),_=e}else _=p;return _}}},865722:(e,t,r)=>{"use strict";r.d(t,{SeriesBarCandlesPaneView:()=>h,baseBarCandlesUpdater:()=>c});var o=r(657415),i=r(266150),s=r(272432),l=r(115676),a=r(141463);function n(e){return null!=e}function c(e,t){const r=e[1],o=e[2],i=e[3],s=e[4];return!!(n(r)&&n(o)&&n(i)&&n(s))&&(t.open=r,t.high=o,t.low=i,t.close=s,!0)}class h{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,i.isFeaturesetEnabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new s.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),r=this._source.priceScale();if(this._bars=[],t.isEmpty()||!r||r.isEmpty())return;const i=t.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;let s=this._source.nearestIndex(i.firstBar(),l.PlotRowSearchMode.NearestRight);const n=this._source.nearestIndex(i.lastBar(),l.PlotRowSearchMode.NearestLeft);if(void 0===s||void 0===n)return;for(;s<=n;s++){if(null!==this._source.bars().valueAt(s))break}if(s>n)return;const c=this._source.bars().range(s,n),h=this._source.barColorer(),d={};if(c.each(((t,r)=>{d.value=r;const o=h.firstColoredBar(t);let i;null!==o&&o>=t?this._source.setPrecomputedBarStyle(r,void 0):i=this._source.precomputedBarStyle(r),void 0===i&&(i=h.barStyle(t,!1,d),this._source.setPrecomputedBarStyle(r,i));const s=this._createItem(t,r,i,e);return!!s&&(d.previousValue=r,this._bars.push(s),!1)})),0===this._bars.length)return;const u=this._source.firstValue();if(null!==u)if(r.barPricesToCoordinates(this._bars,u),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:a.HitTarget.Regular,barSpacing:t.barSpacing()};const i=this._model.paneForSource(this._source);if(!i)return;const s=i.height();for(let i=0;i<e.length;i++){const l=e[i],a=this._source.bars().valueAt(l);if(null===a)continue;const n=a[1],c=a[4];if(null==n||null==c)continue;const h=.5*(n+c),d=t.indexToCoordinate(l),p=r.priceToCoordinate(h,u);this._selectionData.points.push({point:new o.Point(d,p)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(p/s))}}else this._selectionIndexer.clear()}}},499717:(e,t,r)=>{"use strict";r.d(t,{SeriesSingleLinePaneView:()=>d});var o=r(393418),i=r(657415),s=r(185842),l=r(266150),a=r(272432),n=r(115676),c=r(141463),h=r(188485);class d{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,l.isFeaturesetEnabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){this._items=[]
;const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const r=e.visibleBarsStrictRange();if(null===r)return;if(0===this._source.bars().size())return;const l=this._source.nearestIndex(r.firstBar()-1,n.PlotRowSearchMode.NearestLeft)??r.firstBar()-1,a=this._source.nearestIndex(r.lastBar()+1,n.PlotRowSearchMode.NearestRight)??r.lastBar()+1,d=this._source.barFunction(),u=this._model.timeScale().barSpacing();if(u<.1&&this._source.supportsConflatedChunks()){const e=this._source.conflatedChunks(u,(0,s.ensureNotNull)(this._source.priceSource())),t=(0,h.lowerbound)(e,l,((e,t)=>e.startTime<t)),r=Math.min(e.length-1,(0,h.lowerbound)(e,a,((e,t)=>e.endTime<t)));for(let o=t;o<=r;o++){const t=e[o];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,price:e,y:NaN,left:NaN,center:NaN,right:NaN})}))}}else for(const{index:e,value:t}of this._source.bars().rangeIterator(l,a)){const r=d(t);(0,o.default)(r)&&this._items.push({timePointIndex:e,price:r,y:NaN,left:NaN,center:NaN,right:NaN})}const p=this._source.firstValue();if(null!==p)if(t.fillYCoordinates(this._items,p),e.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const r=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:c.HitTarget.Regular};const o=(0,s.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let s=0;s<r.length;s++){const l=r[s],a=this._source.bars().valueAt(l);if(null===a)continue;const n=d(a),c=e.indexToCoordinate(l),h=t.priceToCoordinate(n,p);this._selectionData.points.push({point:new i.Point(c,h)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/o))}}else this._selectionIndexer.clear();else this._items=[]}}},700018:(e,t,r)=>{"use strict";r.d(t,{SeriesTableViewValuesProvider:()=>a,fillSymbolSourceValuesProviderItemsVisibility:()=>l});var o=r(613816),i=r(70346),s=r(644592);function l(e,t,r,o){const l=12!==r,a=o.properties().childs().paneProperties.childs().legendProperties.childs(),n=12!==r&&16!==r&&21!==r,c=12!==r,h=(0,i.isPriceSourceStyle)(r),d=!h;e[5].visible=!1;const u=o.mainSeries().intervalObj().value().is1Tick();e[0].visible=d&&n&&!u,e[1].visible=d&&!u,e[2].visible=d&&!u,e[3].visible=d&&c,e[6].visible=a.showBarChange.value()&&l,e[4].visible=h,e[4].title=t?s.priceSourceTitles[t]:""}class a{constructor(e,t){this._model=t,this._series=e,this._valuesProvider=new o.SeriesValuesProvider(e,t,!1)}getItems(){const e=this._valuesProvider.getItems(),t=this._series.style();l(e,this._series.priceSource(),t,this._model);const r=this._model.properties().childs().paneProperties.childs().legendProperties.childs();return e[8].visible=!1,e[7].visible=r.showVolume.value(),e}getValues(e){const t=this._series.bars().lastIndex();return null===t||t<e?null:this._valuesProvider.getValues(e)}}},613816:(e,t,r)=>{"use strict";r.d(t,{SeriesValuesProvider:()=>N,calculateColor:()=>P,changesData:()=>B})
;var o=r(185842),i=r(197486),s=r(955482),l=r(729193),a=r(376596),n=(r(266150),r(275925)),c=r(196768),h=r(115676),d=r(49833),u=r(807211),p=r(61063);r(70346);function _(e,t){return 100*(t-e)/Math.abs(e||1)}var b=r(744940),m=r(187614),C=r(75336),S=r(972951);const v=S.lastDayChangeAvailable||S.alwaysShowLastPriceAndLastDayChange,y=a.CheckMobile.any(),g=(0,u.getPercentageFormatter)(),w=(0,u.getVolumeFormatter)(2),f=`${C.notAvailable} (${C.notAvailable}%)`;function P(e,t){const r=(0,s.parseRgb)(t),o=(0,s.parseRgb)(e);return(0,s.distanceRgb)(r,o)<70?(0,s.rgbToHexString)((0,s.invertRgb)(r)):t}function B(e,t,r,o,i){let s,l;if(null!==t){const e=i[4],r=t.change||0;l={change:r,currentPrice:e,prevPrice:e-r,percentChange:t.change_percent||0}}const a=r[4],n=e.search(o-1,h.PlotRowSearchMode.NearestLeft,1),c=n?.value[4]??null;return null!==c&&null!=a&&(s={change:a-c,currentPrice:a,prevPrice:c,percentChange:_(c,a)}),{barChange:s,lastDayChange:l}}class N{constructor(e,t,o=!0){this._series=e,this._model=t,this._searchNearestLeftValue=o,this._emptyValues=[{title:l.t(null,void 0,r(97781)),visible:!1,value:"",index:0,orderIndex:0,id:"open"},{title:l.t(null,void 0,r(845563)),visible:!1,value:"",index:1,orderIndex:1,id:"high"},{title:l.t(null,void 0,r(888678)),visible:!1,value:"",index:2,orderIndex:2,id:"low"},{title:l.t(null,{context:"input"},r(312297)),visible:!1,value:"",index:3,orderIndex:3,id:"close"},{title:"",visible:!1,value:"",index:4,orderIndex:4,id:"source"},{title:"",visible:!1,value:"",index:5,orderIndex:5,id:"lastPrice"},{title:l.t(null,void 0,r(673487)),visible:!1,value:"",index:6,orderIndex:6,id:"change"},{title:l.t(null,{context:"study"},r(596168)),visible:!1,value:"",index:7,orderIndex:7,id:"volume"},{title:l.t(null,void 0,r(31467)),visible:!1,value:"",index:8,orderIndex:8,id:"lastDayChange"}]}getItems(){return this._emptyValues}getValues(e){const t=this._showLastPriceAndChangeOnly(),r=this._emptyValues.map(((e,r)=>({...e,value:6===r||8===r?f:C.notAvailable,visible:5!==r&&4!==r&&!t})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return r;const s=(0,o.ensureNotNull)(this._series.data().bars().last());(0,i.isNumber)(e)||(e=s.index);const l=this._searchNearestLeftValue?h.PlotRowSearchMode.NearestLeft:h.PlotRowSearchMode.Exact,a=this._series.nearestIndex(e,l);if(void 0===a)return r;const d=this._series.data().valueAt(a),u=this._model.backgroundTopColor().value();if(null===d)return r;const p=d[1],_=d[2],m=d[3],S=d[4],{barChange:y,lastDayChange:N}=B(this._series.data(),this._series.quotes(),d,a,s.value),x=(0,b.getPriceValueFormatterForSource)(this._series);if((0,b.shouldBeFormattedAsPercent)(this._series)||(0,b.shouldBeFormattedAsIndexedTo100)(this._series))r[6].value="",r[8].value="";else{const e=this._series.formatter(),t={signPositive:!0};if(void 0!==y){const{currentPrice:o,prevPrice:i,change:s,percentChange:l}=y,a=e.formatChange?.(o,i,t)??e.format(s,t);r[6].value=(0,c.forceLTRStr)(`${a} (${g.format(l,t)})`)}if(void 0!==N){
const{currentPrice:o,prevPrice:i,change:s,percentChange:l}=N,a=e.formatChange?.(o,i,t)??e.format(s,t);r[8].value=(0,c.forceLTRStr)(`${a} (${g.format(l,t)})`)}}let L=null;if(t)r[5].value=null==S?C.notAvailable:x(S),r[5].visible=!0,L=this._getChangeColor(N?.change,s.index),r[6].visible=void 0!==y,r[8].visible=void 0!==N||v;else{r[0].value=null==p?C.notAvailable:x(p),r[1].value=null==_?C.notAvailable:x(_),r[2].value=null==m?C.notAvailable:x(m),r[3].value=null==S?C.notAvailable:x(S),r[4].value=x(this._series.barFunction()(d));const e=d[5];(0,i.isNumber)(e)?r[7].value=w.format(e):r[7].visible=!1;const t=this._series.intervalObj().value().is1Tick(),o=21!==this._series.style();r[0].visible=!t&&o,r[1].visible=!t,r[2].visible=!t,r[8].visible=void 0!==N||v,r[6].visible=void 0!==y;const s=this._series.barColorer().barStyle(a,!1);L=P(u,s.barBorderColor??s.barColor)}L=(0,n.resetTransparency)(P(u,L));for(const e of r)e.color||(e.color=L);return r[8].visible&&(r[8].color=(0,n.resetTransparency)(P(u,this._getChangeColor(N?.change,s.index)))),r}_mobileNonTrackingMode(){return y&&(null===this._model.crosshairSource().pane||(0,m.isLineToolName)(d.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){return S.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e,t){const r=this._series.style();if(2===r||15===r||14===r)return this._series.barColorer().barStyle(t,!1).barColor;const o=void 0===e||e>=0?p.SeriesBarColorer.upColor(this._series.properties()):p.SeriesBarColorer.downColor(this._series.properties());return o.barBorderColor??o.barColor}}},846793:(e,t,r)=>{"use strict";r.d(t,{StudyWithSummaryDataSource:()=>i});var o=r(453113);class i extends o.PriceDataSource{constructor(e,t){super(e,t)}barColorer(){return null}formatter(e){return this._model.mainSeries().formatter(e)}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}currency(){return this._model.mainSeries().currency()}unit(){return this._model.mainSeries().unit()}onStatusChanged(){return this._model.mainSeries().onStatusChanged()}symbolSource(){return this._model.mainSeries().symbolSource()}barsProvider(){return this._model.mainSeries().barsProvider()}valuesProvider(){return this._model.mainSeries().valuesProvider()}legendValuesProvider(){return this._model.mainSeries().legendValuesProvider()}statusProvider(e){return this._model.mainSeries().statusProvider(e)}paneViews(e){return this._model.mainSeries().paneViews(e)}updateAllViews(e){this._model.mainSeries().updateAllViews(e)}widgetSideAreaViews(e){return this._model.mainSeries().widgetSideAreaViews?.(e)??null}properties(){return this._model.mainSeries().properties()}hasStateForAlert(){return!1}allowsMovingBetweenPanes(){return!1}isUserDeletable(){return!1}canBeHidden(){return!1}isDraggable(){return!1}symbolSourceWV(){return this._model.mainSeries().symbolSourceWV()}}},601679:(e,t,r)=>{"use strict";r.d(t,{constants:()=>l,darkColors:()=>i,lightColors:()=>s});var o=r(171898);const i={
textColor:o.colors.colorColdGray200,hoveredRowColor:"#B2B5BE33"},s={textColor:o.colors.colorColdGray900,hoveredRowColor:"#5D606B26"},l={cellHeight:20,horzCellMinMargin:4,minAllowedFontSize:8,maxAllowedFontSize:12,fontSizeCoeff:.6,horzCellMarginsCoeff:.1,maxSymbols:40,legendLeftPadding:9,legendFontSize:13}},920948:(e,t,r)=>{"use strict";r.d(t,{TpoSummaryDataSource:()=>s,tpoSummaryDataSourceId:()=>i});var o=r(846793);const i="_seriesTpoSummaryId";class s extends o.StudyWithSummaryDataSource{constructor(e){super(e,i)}name(){return"TPO Summary"}state(){return{id:this.id(),type:"TpoSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"TpoSummaryContextMenu"}}},655178:(e,t,r)=>{"use strict";r.d(t,{VolumeFootprintSummaryDataSource:()=>l,volumeFootpringSummaryDataSourceId:()=>s});var o=r(298147),i=r(846793);const s="_seriesVolumeFootprintSummaryId";class l extends i.StudyWithSummaryDataSource{constructor(e){super(e,s)}openInterestSupported(){const e=this._model.mainSeries().symbolInfo();return null!==e&&(0,o.isFutures)(e.type)&&!(0,o.hasCryptoTypespec)(e.typespecs)}extendedOpenInterestSupported(){const e=this._model.mainSeries().symbolInfo();return null!==e&&((0,o.isFutures)(e.type)||"swap"===e.type)&&(0,o.hasCryptoTypespec)(e.typespecs)}name(){return"Volume Footprint Summary"}state(){return{id:this.id(),type:"VolumeFootprintSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"VolumeFootprintSummaryContextMenu"}}},808463:(e,t,r)=>{"use strict";function o(e,t){return i(e,t,t?["&amp;"]:["&"])}function i(e,t,r){const o=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]];t&&o.forEach((e=>e.reverse()));let i=e;if(!e||!e.replace)return i;for(const e of o){const[t,o]=e;r&&-1!==r.indexOf(t)||(i=i.replace(new RegExp(t,"g"),o))}return i}r.d(t,{clean:()=>i,cleanButAmpersand:()=>o})},65774:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},767483:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);