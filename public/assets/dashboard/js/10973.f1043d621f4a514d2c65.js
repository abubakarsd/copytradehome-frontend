(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[10973,26395,61499,26100],{433025:e=>{e.exports={"common-tooltip":"common-tooltip-EJBD96zX","common-tooltip--hidden":"common-tooltip--hidden-EJBD96zX","common-tooltip--horizontal":"common-tooltip--horizontal-EJBD96zX","common-tooltip--farther":"common-tooltip--farther-EJBD96zX","common-tooltip--vertical":"common-tooltip--vertical-EJBD96zX","common-tooltip-farther":"common-tooltip-farther-EJBD96zX","common-tooltip--direction_normal":"common-tooltip--direction_normal-EJBD96zX","common-tooltip__body":"common-tooltip__body-EJBD96zX","common-tooltip__button-container":"common-tooltip__button-container-EJBD96zX","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-EJBD96zX","common-tooltip__button":"common-tooltip__button-EJBD96zX","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-EJBD96zX","common-tooltip__ear-holder":"common-tooltip__ear-holder-EJBD96zX","common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-EJBD96zX","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-EJBD96zX","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-EJBD96zX","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-EJBD96zX","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-EJBD96zX","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-EJBD96zX","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-EJBD96zX","common-tooltip__body--no-padding":"common-tooltip__body--no-padding-EJBD96zX","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-EJBD96zX","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-EJBD96zX","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-EJBD96zX","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-EJBD96zX","common-tooltip__plus-sign":"common-tooltip__plus-sign-EJBD96zX"}},137975:(e,t,o)=>{"use strict";function r(){return navigator.androidClipboard??navigator.clipboard}function n(e){return s(e,null)}function s(e,t){const o=e.files&&e.files.length>0;if(!o&&t&&t.eventPhase>0)return i(t,e),Promise.resolve();if(!o){let t=!1;const o=o=>{o.stopImmediatePropagation(),i(o,e),t=!0};try{document.addEventListener("copy",o,!0),document.execCommand("copy")}finally{document.removeEventListener("copy",o,!0)}if(t)return Promise.resolve()}return async function(e){const t=r();if(!t||!t.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");const o={};for(const t of e.files||[])o[t.type]=t;e.text&&(o["text/plain"]=e.text);e.html&&(o["text/html"]=e.html);return t.write([new window.ClipboardItem(o)])}(e)}function i(e,t){e.preventDefault();const o=e.clipboardData;t.text&&o.setData("text/plain",t.text),t.html&&o.setData("text/html",t.html)}async function a(e,t){const o=r();if("text/plain"===t&&!o.write){const t=await e;return o.writeText(await t.text())}
if(!o||!o.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");let n=null;try{n=new window.ClipboardItem({[t]:e})}catch(o){n=new window.ClipboardItem({[t]:await e})}if(n)return o.write([n]);throw new Error("ClipboardApi is not supported")}o.r(t),o.d(t,{copyToClipboard:()=>n,getClipboard:()=>r,writeImpl:()=>s,writePromiseUsingApi:()=>a})},336653:(e,t,o)=>{"use strict";o.d(t,{ActionGroup:()=>n});class r{constructor(e,t){this._group=e;const{hotkey:o,handler:r,desc:n,isDisabled:s,element:i=null,isRepeatAccepted:a=!1}=t;this.hotkey=o,this.handler=r,this.desc=n,this.element=i,this.isRepeatAccepted=a,this.isDisabled=s?"function"==typeof s?s:()=>!0:()=>!1}destroy(){this._group&&(this._group.remove(this),this._group=null)}}class n{constructor(e,t){this._actions=new Map,this._manager=e,this.order=t?.order??0,this.modal=!(!t||!t.modal),t&&(this.desc=t.desc),t&&t.isDisabled?"function"==typeof t.isDisabled?this.isDisabled=t.isDisabled:this.isDisabled=()=>!0:this.isDisabled=()=>!1,this._manager.registerGroup(this)}add(e){let t=this._actions.get(e.hotkey);t||(t=[],this._actions.set(e.hotkey,t));const o=new r(this,e);return t.push(o),o}remove(e){const t=this._actions.get(e.hotkey);if(!t)return;const o=t.findIndex((t=>t===e));o>=0&&(1===t.length?this._actions.delete(e.hotkey):t.splice(o,1))}handleHotkey(e,t){const o=this._actions.get(e);if(!o)return!1;for(const r of o)if((!r.element||t.target&&r.element.contains(t.target))&&!r.isDisabled(t))return t.repeat&&!r.isRepeatAccepted||(r.handler(t),this._callMatchedHotkeyHandler(e)),t.preventDefault(),!0;return!1}promote(){this._manager.promoteGroup(this)}destroy(){for(const[,e]of this._actions)for(const t of e)t.destroy();this._actions.clear(),this._manager.unregisterGroup(this)}static setMatchedHotkeyHandler(e){n._matchedHotkeyHandler=e}_callMatchedHotkeyHandler(e){n._matchedHotkeyHandler&&n._matchedHotkeyHandler(e)}}},360002:(e,t,o)=>{"use strict";o.d(t,{ActionManager:()=>l});var r=o(654233),n=o(954231),s=o(252938);class i{constructor(e,t){this.modifiers=e,this.code=t}altOrOptionCode(){return"AltLeft"===this.code||"AltRight"===this.code}controlOrMetaCode(){return n.isMacKeyboard?"MetaLeft"===this.code||"MetaRight"===this.code||"OSLeft"===this.code||"OSRight"===this.code:"ControlLeft"===this.code||"ControlRight"===this.code}}class a extends r.WatchedValue{setValue(e,t){const o=this.value();(t||void 0===o||o.code!==e.code||o.modifiers!==e.modifiers)&&super.setValue(e)}}class l{constructor(){this._groups=[],this._pressedKeys=new r.WatchedValue(0),this._keyboardPressedKeysState=new a(new i(0)),this._keyDownListener=e=>{if(e.defaultPrevented)return;const t=(0,n.hashFromEvent)(e);if(this._pressedKeys.setValue(t),this._keyboardPressedKeysState.setValue(new i((0,n.modifiersFromEvent)(e),e.code)),!(0,s.isNativeUIInteraction)(t,e.target))for(let o=this._groups.length;o-- >0;){const r=this._groups[o];if(!r.isDisabled()){if(r.handleHotkey(t,e))return;if(r.modal)return}}},this._keyUpListener=e=>{const t=(0,n.hashFromEvent)(e)
;this._pressedKeys.setValue(t),this._keyboardPressedKeysState.setValue(new i((0,n.modifiersFromEvent)(e),""))},this._blurEvent=()=>{this._pressedKeys.setValue(0),this._keyboardPressedKeysState.setValue(new i(0,""))},this._mouseEvent=e=>{const t=(0,n.modifiersFromEvent)(e),o=255&(this._pressedKeys.value()??0);this._pressedKeys.setValue(t|o)}}listen(e){e.addEventListener("keydown",this._keyDownListener),e.addEventListener("keyup",this._keyUpListener),e.addEventListener("blur",this._blurEvent),e.addEventListener("mousemove",this._mouseEvent)}unlisten(e){e.removeEventListener("keydown",this._keyDownListener),e.removeEventListener("keyup",this._keyUpListener),e.removeEventListener("blur",this._blurEvent),e.removeEventListener("mousemove",this._mouseEvent)}registerGroup(e){this._groups.push(e),this.sortGroups()}unregisterGroup(e){for(let t=this._groups.length;t--;)this._groups[t]===e&&this._groups.splice(t,1)}promoteGroup(e){const t=this._getModalOrderEpoch(),o=c(e,t);let r=this._groups.findIndex((e=>c(e,t)===o)),n=0;for(;r<this._groups.length&&c(this._groups[r],t)===o;){const s=this._groups[r];s===e?n=1:c(s,t)===o&&(this._groups[r-n]=s),r++}this._groups[r-n]=e}pressedKeys(){return this._pressedKeys.readonly()}keyboardPressedKeysState(){return this._keyboardPressedKeysState.readonly()}sortGroups(){const e=this._getModalOrderEpoch();this._groups.sort(((t,o)=>c(o,e)-c(t,e)))}_getMinOrder(){return this._groups.reduce(((e,t)=>Math.min(e,t.order)),0)}_getModalOrderEpoch(){return-2*(Math.abs(this._getMinOrder())-1)}}function c(e,t){return e.order+(e.modal?t:0)}},87837:(e,t,o)=>{"use strict";function r(e,t){return`${e}@${t}`}function n(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")}o.d(t,{extractStudyId:()=>n,studyIdString:()=>r})},595398:(e,t,o)=>{"use strict";o.d(t,{getTooltipData:()=>n,setTooltipData:()=>s});const r=new WeakMap;function n(e,t){const o=r.get(e);return o instanceof Function?o(t):o&&o[t]}function s(e,t,o){if(o instanceof Function)return void r.set(e,o);const n=r.get(e),s=void 0===n||n instanceof Function?{}:n;s[t]=o,r.set(e,s)}},333482:(e,t,o)=>{"use strict";o.d(t,{getDataFromTarget:()=>m,getTooltip:()=>g,hideTooltip:()=>f,setStyle:()=>C,showTooltip:()=>S,updateTooltipTextFromTarget:()=>p});var r=o(185842),n=o(359221),s=o(196768),i=(o(686923),o(65890)),a=o(517806),l=o(376596);const c={default:"",white:"theme-white",chart:"theme-chart",news:"theme-news","round-shadow":"theme-round-shadow"},h=Object.keys(c);var d=o(595398),u=o(705821),_=o(433025);function p(e){const t=e.hasAttribute("data-tooltip")?e.getAttribute("data-tooltip"):e.getAttribute("title");return t&&((0,d.setTooltipData)(e,"text",t),e.removeAttribute("title")),(0,d.getTooltipData)(e,"text")||""}function m(e){const t=p(e),o=e.getBoundingClientRect(),r={h:o.height,w:o.width,x:o.left,y:o.top},n=e.getAttribute("data-color-theme")||"",s=e.classList.contains("common-tooltip-html"),i=parseInt(e.getAttribute("data-tooltip-delay")||""),a=parseInt(e.getAttribute("data-tooltip-debounce")||"");let l={type:"none"};return t&&(l={type:s?"html":"text",data:t}),{
above:e.classList.contains("common-tooltip-above"),below:e.classList.contains("common-tooltip-below"),otl:e.classList.contains("common-tooltip-otl"),otr:e.classList.contains("common-tooltip-otr"),vertical:e.classList.contains("common-tooltip-vertical"),hotkey:e.getAttribute("data-tooltip-hotkey"),narrow:e.classList.contains("common-tooltip-narrow"),wide:e.classList.contains("common-tooltip-wide"),colorTheme:n,tooltipDelay:i,tooltipDebounce:a,rect:r,content:l,target:e}}function g(e){const t=(0,r.ensureNotNull)(v).cloneNode(!0),o=I(t),{content:n}=e;switch(n.type){case"element":o.innerHTML="",o.appendChild(n.data);break;case"html":o.innerHTML=n.data;break;case"text":if(e.hotkey){const e=(0,r.ensureNotNull)(A).cloneNode(!0);e.innerText=n.data,o.appendChild(e)}else o.innerText=n.data}if(e.hotkey){const t="none"!==n.type,s=(0,r.ensureNotNull)(P).cloneNode(!0),i=(0,u.hotKeyDeserialize)(e.hotkey),a=i.keys.map((e=>`<span class="${_["common-tooltip__hotkey-button"]}">${e}</span>`));s.innerHTML=function(e,t){const o=/{\d}|{hotkey_\d}/gi;return e.replace(o,(e=>{const o=Number(e.match(/\d/));return t[o]}))}(i.text,a).replace(/\s\+\s/g,`<span class="${_["common-tooltip__plus-sign"]}">+</span>`),o.classList.add(_["common-tooltip__body--with-hotkey"]),t&&s.classList.add(_["common-tooltip__hotkey-block--divider"]),o.appendChild(s)}return t.addEventListener("contextmenu",i.preventDefault),t}function C(e,t){const o=t.rect;if(!o)return;!function(e,t){const o=h.includes(t)?c[t]:"";e.classList.remove(...h.map((e=>c[e])).filter((e=>!!e))),o&&!e.classList.contains(o)&&e.classList.add(o)}(e,t.colorTheme||"default");const r=I(e),n=e.querySelector(`.${_["common-tooltip__button-container"]}`);t.addClass&&e.classList.add(t.addClass),t.addBodyClass&&r.classList.add(t.addBodyClass),r.classList.toggle(_["common-tooltip__body--width_wide"],Boolean(t.wide)),r.classList.toggle(_["common-tooltip__body--no-padding"],Boolean(t.noPadding)),r.classList.toggle(_["common-tooltip__body--width_narrow"],Boolean(t.narrow)),r.classList.toggle(_["common-tooltip__body--no-buttons"],!0),r.style.left=E(0),r.style.width=E(r.clientWidth+(Boolean(t.noPadding)?0:2));const i=document.body.clientWidth,d=l.CheckMobile.iOS()||l.CheckMobile.Android()||(0,l.supportTouch)()&&(0,l.isMac)()?window.innerHeight:document.body.clientHeight,u=t.vertical,p=t.extendMargin||u&&o.w<20||!u&&o.h<20;e.classList.toggle(_["common-tooltip--farther"],p),e.classList.toggle(_["common-tooltip--vertical"],u),e.classList.toggle(_["common-tooltip--horizontal"],!u);const m=function(e){return e.querySelector(`.${_["common-tooltip__ear-holder"]}`)}(e),g=e.offsetHeight;if(u){const l=10,c=d-10,h=12,u=l+h,p=c-h,C=(0,a.clamp)(o.y+o.h/2,u,p)-g/2,S=C+g;e.style.left=E(o.x+o.w),e.style.top=E(C),C<l?r.style.top=n.style.top=E(l-C):S>c&&(r.style.top=n.style.top=E(c-S));const{right:f}=(e.querySelector(":last-child")||r).getBoundingClientRect(),y=f+10>i;e.classList.toggle(_["common-tooltip--direction_reversed"],y),e.classList.toggle(_["common-tooltip--direction_normal"],!y);let T=y?"after":"before";(0,
s.isRtl)()?(T=t.otr?"after":T,T=t.otl?"before":T):(T=t.otr?"before":T,T=t.otl?"after":T),m.classList.toggle(_["common-tooltip__ear-holder--before"],"before"===T),m.classList.toggle(_["common-tooltip__ear-holder--after"],"after"===T),"after"===T&&(e.style.left="auto",e.style.right=E(i-o.x))}else{const s=o.x-(r.offsetWidth-o.w)/2,a=i-e.offsetWidth-20<=0?(i-e.offsetWidth)/2:10,l=i-a-e.offsetWidth,c=Math.max(a,Math.min(s,l));e.style.left=E(c);const h=l<s;e.classList.toggle(_["common-tooltip--direction_reversed"],h),e.classList.toggle(_["common-tooltip--direction_normal"],!h);const u=function(e,t,o,r){if(e.above)return w(t,r)?"above":"below";if(e.below)return function(e,t,o){return o.y+o.h+t+10<e}(t,o,r)?"below":"above";return w(o,r)?"above":"below"}(t,d,g,o);"above"===u?e.style.bottom=E(d-o.y):e.style.top=E(o.y+o.h),m.classList.add("above"===u?_["common-tooltip__ear-holder--above"]:_["common-tooltip__ear-holder--below"]);const{left:p}=r.getBoundingClientRect();let C=Math.trunc(o.x+o.w/2-(p+r.clientWidth/2));e.style.left=E(c+C),e.style.width=E(r.clientWidth+n.clientWidth),C=h?Math.max(0,C):Math.min(0,C),n.style.left=E(-C),r.style.left=E(-C)}}function S(e){e.classList.toggle(_["common-tooltip--hidden"],!1)}function f(e){e.classList.toggle(_["common-tooltip--hidden"],!0)}function E(e){return`${Math.floor(e)}px`}const y=`\n\t<div id="common-tooltip-wrapper" class="${_["common-tooltip"]}">\n\t\t<div class="${_["common-tooltip__ear-holder"]}" >\n\t\t\t<div class="${_["common-tooltip__body"]} js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="${_["common-tooltip__button-container"]}"></div>\n\t</div>\n`,T=`\n\t<div class="${_["common-tooltip__hotkey-block"]}"></div>\n`,b=`\n\t<div class="${_["common-tooltip__hotkey-text"]}"></div>\n`,v=(0,n.parseHtmlElement)(y),P=(0,n.parseHtmlElement)(T),A=(0,n.parseHtmlElement)(b);function I(e){return e.querySelector(`.${_["common-tooltip__body"]}`)}function w(e,t){return 10+e<t.y}},424126:(e,t,o)=>{"use strict";o.d(t,{empty:()=>i,setTooltip:()=>a});const r="tooltip-root-element";let n;function s(){const e=document.getElementById(r);e?n=e:(n=document.createElement("div"),n.id=r,document.body.appendChild(n))}function i(){n&&(n.innerHTML="")}function a(e){i(),n||s(),n.appendChild(e)}"interactive"===document.readyState?s():document.addEventListener("DOMContentLoaded",s)},202989:(e,t,o)=>{"use strict";o.d(t,{clearSchedule:()=>i,scheduleHide:()=>l,scheduleRemove:()=>a,scheduleRender:()=>c});let r=0,n=0,s=0;function i(){clearTimeout(r),clearTimeout(n),clearTimeout(s)}function a(e,t){s=setTimeout(e,t)}function l(e,t){n=setTimeout(e,t)}function c(e,t){r=setTimeout(e,t)}},295513:(e,t,o)=>{"use strict";async function r(){return Promise.all([o.e(16599),o.e(64116),o.e(98115),o.e(57032),o.e(50865),o.e(48072),o.e(58703),o.e(38849),o.e(67787),o.e(32387),o.e(99331),o.e(9107)]).then(o.bind(o,896358))}o.d(t,{importPopupRender:()=>r})},783014:(e,t,o)=>{"use strict";o.r(t),o.d(t,{closeCurrentPublicationViewPopup:()=>h,getPublicationType:()=>i,importEntryComponent:()=>a,openPublicationViewPopup:()=>u,
preloadPublicationViewPopup:()=>d});var r=o(602013),n=o(295513);const s=new Set([r.ScriptType.Indicator,r.ScriptType.Library,r.ScriptType.Strategy,"indicator","library","strategy"]);function i({isVideo:e,isScript:t,scriptType:o}){switch(!0){case e:return"video";case t:case s.has(o||""):return"script";default:return"idea"}}async function a(e){switch(e){case"video":return Promise.all([o.e(34466),o.e(1967),o.e(46970),o.e(5709),o.e(46680),o.e(74528),o.e(31788),o.e(15365),o.e(45448),o.e(27848),o.e(6406),o.e(22066),o.e(92597),o.e(98729),o.e(27688),o.e(56752),o.e(20432),o.e(35424),o.e(36810),o.e(12559),o.e(73133),o.e(93541),o.e(59717),o.e(63935),o.e(15074),o.e(29984),o.e(4050),o.e(30796),o.e(5246),o.e(5792),o.e(57350),o.e(16803),o.e(66548),o.e(37865),o.e(4058),o.e(6437),o.e(96840),o.e(23616),o.e(80928),o.e(5449),o.e(34295),o.e(21148),o.e(59015),o.e(36430),o.e(91797),o.e(39656),o.e(93787),o.e(67233),o.e(3697),o.e(2942),o.e(38215),o.e(27024),o.e(37305),o.e(34040),o.e(58703),o.e(5290),o.e(24270),o.e(97085),o.e(18475),o.e(24951),o.e(61305),o.e(48492),o.e(41365),o.e(83941),o.e(40060),o.e(3043),o.e(62744),o.e(18734),o.e(55271),o.e(39398),o.e(85907),o.e(32387),o.e(99827),o.e(33314),o.e(15496),o.e(21658),o.e(75641),o.e(26292),o.e(17686),o.e(53233),o.e(98784),o.e(28435),o.e(77811),o.e(59857),o.e(18204),o.e(65207),o.e(70070),o.e(14015),o.e(34984),o.e(86413)]).then(o.bind(o,81744)).then((e=>e.PublicationViewVideo));case"script":return Promise.all([o.e(12483),o.e(57032),o.e(1967),o.e(46970),o.e(63665),o.e(24977),o.e(5709),o.e(46680),o.e(74528),o.e(31788),o.e(15365),o.e(45448),o.e(27848),o.e(6406),o.e(22066),o.e(92597),o.e(98729),o.e(27688),o.e(48011),o.e(56752),o.e(20432),o.e(35424),o.e(36810),o.e(92568),o.e(12559),o.e(60627),o.e(96872),o.e(73133),o.e(52253),o.e(93541),o.e(59717),o.e(63935),o.e(15074),o.e(29984),o.e(4050),o.e(30796),o.e(5246),o.e(80387),o.e(5792),o.e(87795),o.e(57350),o.e(16803),o.e(66548),o.e(37865),o.e(4058),o.e(6437),o.e(96840),o.e(23616),o.e(80928),o.e(5449),o.e(34295),o.e(21148),o.e(59015),o.e(36430),o.e(91797),o.e(39656),o.e(93787),o.e(67233),o.e(3697),o.e(2942),o.e(38215),o.e(27024),o.e(37305),o.e(34040),o.e(58703),o.e(5290),o.e(24270),o.e(97085),o.e(18475),o.e(24951),o.e(61305),o.e(48492),o.e(41365),o.e(83941),o.e(40060),o.e(3043),o.e(62744),o.e(18734),o.e(55271),o.e(834),o.e(32387),o.e(99827),o.e(33314),o.e(15496),o.e(21658),o.e(75641),o.e(26292),o.e(17686),o.e(67890),o.e(53233),o.e(98784),o.e(28435),o.e(77811),o.e(59857),o.e(18204),o.e(65207),o.e(70070),o.e(14015),o.e(34984),o.e(54402),o.e(71565)]).then(o.bind(o,38251)).then((e=>e.PublicationViewScript));case"idea":
return Promise.all([o.e(12483),o.e(57032),o.e(1967),o.e(46970),o.e(63665),o.e(24977),o.e(5709),o.e(46680),o.e(74528),o.e(31788),o.e(15365),o.e(45448),o.e(27848),o.e(6406),o.e(22066),o.e(92597),o.e(98729),o.e(27688),o.e(48011),o.e(56752),o.e(20432),o.e(35424),o.e(36810),o.e(92568),o.e(12559),o.e(60627),o.e(96872),o.e(73133),o.e(52253),o.e(93541),o.e(59717),o.e(63935),o.e(15074),o.e(29984),o.e(4050),o.e(30796),o.e(5246),o.e(80387),o.e(5792),o.e(87795),o.e(57350),o.e(16803),o.e(66548),o.e(37865),o.e(4058),o.e(6437),o.e(96840),o.e(23616),o.e(80928),o.e(5449),o.e(34295),o.e(21148),o.e(59015),o.e(36430),o.e(91797),o.e(39656),o.e(93787),o.e(67233),o.e(3697),o.e(2942),o.e(38215),o.e(27024),o.e(37305),o.e(34040),o.e(58703),o.e(5290),o.e(24270),o.e(97085),o.e(18475),o.e(24951),o.e(61305),o.e(48492),o.e(41365),o.e(83941),o.e(40060),o.e(3043),o.e(62744),o.e(18734),o.e(55271),o.e(834),o.e(32387),o.e(99827),o.e(33314),o.e(15496),o.e(21658),o.e(75641),o.e(26292),o.e(17686),o.e(67890),o.e(53233),o.e(98784),o.e(28435),o.e(77811),o.e(59857),o.e(18204),o.e(65207),o.e(70070),o.e(14015),o.e(34984),o.e(54402),o.e(19213)]).then(o.bind(o,609943)).then((e=>e.PublicationViewIdea))}}let l=!1;async function c(){return l=!0,o.e(66472).then(o.bind(o,712748))}async function h(){if(!l)return;const e=await c();await e.closeCurrentPublicationViewPopup()}async function d(e){c(),(0,n.importPopupRender)(),a(e)}async function u(e){return(await c()).openPublicationViewPopup(e)}},602013:(e,t,o)=>{"use strict";var r,n,s;o.d(t,{CONTAINS_IO_SCRIPT_TAG:()=>i,PublicationMethod:()=>n,ScriptAccessType:()=>r,ScriptType:()=>s}),function(e){e[e.Public=1]="Public",e[e.Protected=2]="Protected",e[e.InviteOnly=3]="InviteOnly"}(r||(r={})),function(e){e[e.New=0]="New",e[e.Edit=1]="Edit",e[e.Update=2]="Update"}(n||(n={})),function(e){e[e.Indicator=1]="Indicator",e[e.Strategy=2]="Strategy",e[e.Library=3]="Library"}(s||(s={}));const i="containsioscript"},746587:(e,t,o)=>{"use strict";o.d(t,{solutionIds:()=>r})
;const r=JSON.parse('{"EXTENDED_HOURS":43000502023,"PRE_MARKET":43000502023,"POST_MARKET":43000502023,"SPREAD_CHARTS":43000502298,"ALERTS":43000520149,"ALERT_ON_STRATEGY":43000481368,"ALERT_WEBHOOK":43000529348,"ALERT_DESCRIPTION_PLACEHOLDER":43000531021,"ALERT_RECEIVE_NOTIFICATIONS_OH_PHONE":43000474389,"ALERT_USE_ALTERNATIVE_EMAIL":43000474394,"ALERT_WEBHOOK_CREDENTIALS":43000722015,"ALERT_KEEP_TOASTS_VISIBLE":43000737982,"VOLUME_PROFILE":43000502040,"VOLUME_PROFILE_INDICATOR":43000557450,"RENKO":43000502284,"KAGI":43000502272,"LINE_BREAK":43000502273,"PNF":43000502276,"FINANCIAL_DATA":43000543506,"BROKER_RATING":43000542490,"CRYPTO_MARKET_CAP":43000540941,"CRYPTO_PAYMENT":43000485536,"ALERT_ON_SPREAD":43000478406,"ALERT_DEGRADED_STATE":43000739521,"ALERT_ON_LOG_SCALE":43000690942,"ALERT_ON_CUSTOM_SCRIPT":43000478415,"ALERT_FUNCTION":43000597494,"ALERT_MULTICONDITIONS":43000761492,"SMS_VERIFICATION":43000553429,"MAGNET_MODE":43000537270,"PRIVACY_SETTINGS":43000548335,"PUBLICATION_TYPE":43000609497,"SCRIPT_ACCESS":43000482573,"FREE_USER_FAQS":43000590947,"STRATEGY_UNREALISTIC_RESULTS":43000481029,"STRATEGY_FUTURE_DATA":43000614705,"HOW_TO_USE_PAPER":43000516466,"HOW_TO_USE_CQG":43000516372,"HOW_TO_USE_OANDA":43000516375,"HOW_TO_USE_FOREXCOM":43000516374,"FAVORITE_IDEA":43000555216,"AUTHORS_INSTRUCTIONS_PUBCLICATION":43000549951,"AUTHORS_INSTRUCTIONS_EDIT":43000614618,"SCRIPT_INSTRUCTIONS":43000482573,"BAR_REPLAY_UNAVAILABILITY":43000475470,"WHAT_IS_CBOE_BZX_EXCHANGE":43000473924,"GOPRO_UPGRADE_DESCRIPTION":43000473324,"GOPRO_DOWNGRADE_DESCRIPTION":43000485437,"GOPRO_RENEW_ANNUAL_MONTHLY_DESCRIPTION":43000644491,"FINANCIALS_OWNERSHIP":43000699479,"FINANCIALS_VALUATION_SUMMARY":43000699484,"FINANCIALS_VALUATION_RATIOS":43000699495,"FINANCIALS_GROWTH_AND_PROFITABILITY":43000699485,"FINANCIALS_REVENUE_TO_PROFIT_CONVERSION":43000699496,"FINANCIALS_REVENUE_BREAKDOWN_BY_SOURCE":43000699487,"FINANCIALS_REVENUE_BREAKDOWN_BY_COUNTRY":43000699497,"FINANCIALS_REVENUE_ESTIMATES":43000699489,"FINANCIALS_EARNINGS_ESTIMATES":43000699498,"FINANCIALS_DIVIDEND_SUMMARY":43000699500,"FINANCIALS_DIVIDEND_HISTORY":43000699501,"FINANCIALS_DEBT_LEVEL":43000699502,"FINANCIALS_POSITION":43000699503,"FIRE_CONTROL_SOLUTION":43000690939,"BROKERAGE_REVIEWS":43000591351,"LINKS_TO_SOCIAL_MEDIA":43000635806,"PINE_LIBRARY_INFO":43000638371,"TECHNICAL_RATINGS":43000614331,"BACKTESTING_WIDGET":43000562362,"BACKTESTING_NO_DATA":43000478450,"BACKEND_CONNECTIONS":43000694474,"DEEP_BACKTESTING_WIDGET":43000670566,"DEEP_BACKTESTING":43000666199,"DEEP_BACKTESTING_AVAILABLE_DATA":43000668210,"BETA_BROKERS":43000673434,"VIDEO_UPLOAD_FAILED":43000666607,"VIDEO_DEVICE_ACCESS":43000677209,"INVITE_ONLY_SCRIPTS":43000614617,"HOW_DOES_BRACKETS_MANAGEMENT_WORK":43000631987,"HOW_TO_SEE_THE_DEEPEST_HIST_DATA":43000687053,"I_CANT_SEE_ALL_HIST_DATA_ON_RES_LOWER_THAN_DAY":43000480679,"IDEAS_ON_CHART":43000694285,"GET_A_REFUND":43000485430,"USE_SETTLEMENT_AS_CLOSE_ON_DAILY_INTREVAL":43000685268,"ADJUST_FOR_CONTRACT_CHANGES":43000685266,"SWITCHING_CONTINUOUS_FUTURES_CONTRACTS":43000689313,"ADJUST_DATA_FOR_DIVIDENDS":43000590597,"WHY_IS_MY_ACCOUNT_BANNED":43000674726,"TELL_ME_MORE_ABOUT_THE_COMMUNITY_SCRIPTS":43000558522,"HOW_TO_POST_AWESOME_IDEAS_AND_GET_LOTS_OF_LIKES":43000603748,"ABOUT_EXPERT_PLAN":43000677382,"CONNECTIONS_LIMIT_EXCEEDED":43000693877,"ACCOUNT_RECOVERY":43000619597,"HOW_TO_SYNC_CHARTS_ON_LAYOUT":43000629992,"HOW_TO_SEE_BUILTIN_INDICATOR_SOURCE":43000481659,"MULTI_CHART_MODE":43000629990,"QUICK_SEARCH":43000659671,"WHATS_AN_INDICATOR":43000543626,"CHART_TYPES":43000703407,"DRAWING_TOOLS":43000703396,"CUSTOM_INTERVALS":43000543883,"CUSTOM_RANGE_BARS":43000474007,"CANDLESTICK_PATTERNS":43000584462,"MULTI_TIMEFRAME_CHARTS":43000502591,"BAR_REPLAY":43000712747,"PINE_SCRIPT":43000561836,"SCREENER_OVERVIEW":43000635796,"AUTO_CHART_PATTERNS":43000690464,"HOW_TO_PROTECT_YOUR_ACCOUNT":43000582277,"PLUS_BUTTON":43000645256,"PURCHASE_MARKET_DATA":43000471705,"WHY_TAX_HAS_BEEN_ADDED_TO_MY_BILL":43000684741,"COMPARE_SYMBOLS_TOOL":43000543053,"SAVED_CHART":43000692404,"CUSTOM_INDICATOR":43000543048,"BIST_MIXED_SUBSCRIPTION":43000609137,"WHY_RENKO_NOT_WORK":43000711502,"ALERTS_SEPARATION_BY_TYPE":43000696403,"WATCHLIST_ALERTS":43000739708,"HOW_TO_SET_UP_ALERTS":43000595315,"PINE_SCREENER":43000742436,"ECONOMIC_CALENDAR":43000707391,"SCRIPT_PUBLISHING_RULES":43000590599,"HOW_TO_USE_MINDS":43000690226,"HOW_TO_USE_TRADINGVIEW_CHAT":43000604448,"PAPER_COMPETITION":43000593579,"PAPER_COMPETITION_ACCOUNT":43000721315,"PAPER_COMPETITION_PRIZE":43000721317,"PAPER_COMPETITION_FREE_ACCOUNT":43000721310,"PUBLISHING_AND_UPDATING_IDEAS":43000591338,"USING_MINDS":43000696301,"PUBLISH_VIDEO_IDEA":43000476752,"TAROT_DECK":43000724020,"VAT_NUMBER_GUIDE":43000721910,"PINE_PERFORMANCE_PROFILER":43000725216,"PINE_LOGS_INFO":43000710876,"INDICATORS":43000474048,"CHART_DATA_EXPORT":43000537255,"TIME_PRICE_OPPORTUNITIES":43000713306,"TICK_INTERVALS":43000709225,"VOLUME_FOOTPRINT":43000726164,"VOLUME_CANDLES":43000724995,"HEIKIN_ASHI":43000619436,"HLC_AREA":43000709062,"BASELINE":43000690232,"HIGH_LOW":43000677196,"COLUMNS":43000673912,"GIFTS":43000739401,"HOW_TO_BECOME_MODERATOR":43000591356,"HOW_TO_FIND_PINE_PROGRAMMER":43000601677,"HOW_TO_CHANGE_REPLAY_INTERVAL":43000739158,"SEASONALS":43000745201,"BAR_CHARTS":43000672403,"CANDLES_CHARTS":43000745269,"HOLLOW_CANDLES_CHARTS":43000745270,"LINE_CHARTS":43000745271,"STEP_LINE_CHARTS":43000745272,"LINE_WITH_MARKERS_CHARTS":43000745273,"AREA_CHARTS":43000745274,"SESSION_VOLUME_PROFILE_CHARTS":43000745275,"TIME_PRICE_OPPORTUNITIES_CHARTS":43000725590,"BACKTESTING_BAR_MAGNIFIER":43000669285,"SOCIAL_NETWORK_HOUSE_RULES":43000591638,"QUICK_AND_EASY_GUIDE":43000718885,"HOW_TO_USE_FILTERS":43000718745,"CHART_VIEW_MODE":43000724233,"WATCHLIST_ALERTS_HOW":43000653369,"WATCHLIST_ALERTS_CUSTOMIZE":43000662506,"PUBLISH_AN_IDEA":43000589083,"SUPERCHARTS":43000746464,"BASICS":43000746682,"TIME_INTERVALS":43000747934,"LAYOUTS":43000746975,"CONFIGURE":43000748166,"MASTERING":43000745825,"MULTI_TIMEFRAME_ANALYSIS":43000591555,"SET_UP_ALTERNATIVE_EMAIL_ADDRESS":43000474398,"DELETE_ACCOUNT":43000550534,"SIGNATURE_ON_POSTS":43000472770,"SCREENER_DEX":43000744465,"SCREENER_CEX":43000746110,"SCREENER_CRYPTO":43000718742,"SCREENER_BOND":43000743951,"SCREENER_ETF":43000718743,"SCREENER_STOCK":43000718866,"OPTIONS_BUILDER":43000707214,"NEWS_FLOW":43000728828,"HOW_TO_CONFIGURE_2FA":43000572460,"INTRADAY_RENKO_KAGI":43000758617,"DATA_ECONOMIC_CALENDAR":43000759911,"EARNINGS_CALENDAR":43000759912,"DIVIDEND_CALENDAR":43000759913,"TECHNICAL_ANALYSIS":43000759577,"FUNDAMENTAL_ANALYSIS":43000759574,"FINANCIAL_STATEMENTS_HOWTO":43000760059,"ONE_CLICK_TRADING":43000480920,"PROFIT_LOSS_TYPE_SELECTION":43000761181,"TIPS_FOR_SCRIPT_AUTHORS":43000549935,"UPDATE_PINE_SCRIPTS":43000530720,"EXPORT_STRATEGY_DATA":43000613680,"YIELD_CURVES":43000758123,"NEWS_ALERTS":43000762838,"POSITIONS_AND_ORDERS_ON_CHART":43000763362,"EXECUTIONS_MARKS_ON_CHART":43000763371,"PRICE_ALERTS":43000763313,"TECHNICAL_ALERTS":43000763315,"HISTORICAL_DATA":43000691889,"PINE_EDITOR":43000763320,"STRATEGY_PUBLISHING_RULES":43000764681,"ASSETS_YOU_CAN_ANALYZE":43000764889,"CHANGE_ACCOUNT_CURRENCY":43000480903,"SET_LEVERAGE":43000742699,"SCAN_STOCKS":43000669877,"MACRO_MAPS":43000764925,"OPTIONS_CHAIN":43000760837,"GREEKS":43000708137,"SECOND_BASED_INTERVALS":43000762068,"PAID_SPACE":43000765877,"PAID_SPACE_AUTHOR_RULES":43000765878,"EARNING_LOLLIPOP_FIELDS":43000629790,"EVERYTHING_YOU_WANT_TO_KNOW":43000581817,"MULTIPLE_LEVELS":43000772334,"HEATMAPS":43000766446,"WHAT_IF_SCENARIOS":43000762953,"OPTIONS_STRATEGY":43000708103,"OPTIONS_EXPIRATION":43000735613,"NEWS_BY_MARKET":43000732562,"NEWS_BY_PROVIDER":43000732565,"NEWS_BY_CORPORATION":43000732563,"CHARTS_ORDER_TRACKING":43000766334,"FUNDAMENTAL_GRAPHS":43000763376,"CONTEXT_HINTS":43000542963,"INDICATORS_VERSIONS":43000746752,"STRATEGY_TESTER":43000764138,"THE_LEAP":43000771594,"PORTFOLIOS":43000760937,"WATCHLIST_SCREENER_SEARCH":43000473930,"HOTLISTS":43000762029,"DEPTH_OF_MARKET":43000516459,"LAST_OPEN_CHART_MOBILE":43000755479,"IOS_PUSHES":43000474590,"IOS_EDIT_WIDGETS":43000754536,"MULTIAPP_WINDOWS":43000611543,"SYMBOL_SYNCING":43000673893,"DESKTOP_APP":43000671618,"CUSTOMER_SUPPORT":43000648248}')
},277637:(e,t,o)=>{"use strict";o.d(t,{Modifiers:()=>r.Modifiers,hashFromEvent:()=>r.hashFromEvent,humanReadableHash:()=>r.humanReadableHash,humanReadableModifiers:()=>r.humanReadableModifiers,isMacKeyboard:()=>r.isMacKeyboard,modifiersFromEvent:()=>r.modifiersFromEvent});var r=o(954231)},726395:(e,t,o)=>{"use strict";o.r(t),o.d(t,{pushStreamMultiplexer:()=>L});var r=o(813169),n=o(858328),s=o(724226),i=o(353741),a=o(254236),l=o(77357),c=o(185842),h=o(935490),d=o(241271);const u=(0,l.getLogger)("PersistentWebsocketTransport");class _ extends d.PersistentTransport{constructor(e,t){super(e,u,t)}sendMessage(e){this._connectionStatus.value()===i.ConnectionStatus.Open?this._socket?this._socket.send(e):u.logError("Something went wrong - code 0x3"):u.logWarn("Attempt to send message but connection is not opened")}_createNativeTransport(e){const t=new WebSocket(e);return t.binaryType="arraybuffer",t.addEventListener("error",this._socketErrorHandler),t.addEventListener("close",this._socketCloseHandler),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(i.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}}class p{constructor(e){this._queue=[],this._isWorking=!1,this._onResolve=()=>{this._queue.length>0&&this._createPromise(this._queue[0])},this._logger=e}enqueue(e){this._logger.logNormal(`Adding channel in stack. Queue size: ${this._queue.length}`),this._isWorking||this._createPromise(e),this._queue.push(e)}_createPromise(e){this._isWorking=!0,this._wrap(e).then(this._onResolve)}_wrap(e){return new Promise((t=>{e().catch((e=>this._logger.logNormal(`Error when trying handling channel: ${e.message}`))).finally((()=>{this._isWorking=!1,this._queue.shift(),t()}))}))}}const m="PushStream",g=(0,l.getLogger)(m);var C;!function(e){e[e.EventSource=0]="EventSource",e[e.WebSocket=1]="WebSocket"}(C||(C={}));class S{constructor(e,t){this._channels=[],this._queue=new p(g),this._transport=t.transportType===C.EventSource?new h.PersistentEventSourceTransport(this._onPushStreamMessage.bind(this)):new _(this._onPushStreamMessage.bind(this),this._onPushStreamClose.bind(this)),this._settings=t,this._messageHandler=e}addChannel(e){this._queue.enqueue((()=>this._addChannel(e)))}removeChannel(e){this._queue.enqueue((()=>this._removeChannel(e)))}getChannels(){return this._channels}hasChannel(e){return-1!==this._channels.indexOf(e)}connectionStatus(){return this._transport.connectionStatus()}reconnectEvent(){return this._transport.successReconnectReachedEvent()}connect(){(0,c.assert)(0!==this._channels.length,"There is no channels"),this._transport.connect()}
disconnect(){this._transport.disconnect()}getLogs(e){return(0,l.getRawLogHistory)(e,m)}async _addChannel(e){(0,c.assert)(!this.hasChannel(e),`Channel with name ${e} has already been subscribed`),g.logNormal(`Adding channel ${e}`),this._channels.push(e);const{maxSize:t}=this._settings;return void 0!==t&&this._channels.length>t&&(this._channels=this._channels.slice(this._channels.length-t)),this._transport.setUrl(this._generateUrl())}async _removeChannel(e){const t=this._channels.indexOf(e);return(0,c.assert)(-1!==t,`There is no channel with name ${e}`),g.logNormal(`Removing channel ${e}`),this._channels.splice(t,1),this._transport.setUrl(this._generateUrl())}_onPushStreamMessage(e){if("string"!=typeof e)throw new Error("Wrong message type, expected string");const t=JSON.parse(e),o=t.id,r=t.channel;-2===o?g.logWarn("Received unexpected message: about removed the channel"):o>0&&(g.logDebug(`Received message: id="${o}" channel="${r}"`),this._messageHandler(t.text,o,r))}_onPushStreamClose(e){1005===e.code&&a.telemetry.sendChartReport("websocket_code_1005")}_generateUrl(){const e=this._channels.join("/");return g.logNormal(`Generate pushstream url - ${e}`),`${this._settings.url}/${this._settings.urlPath}/${e}`}}o(574908);class f{constructor(){this._handlers={},this._specialHandlers={}}on(e,t){const o=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;o[e]||(o[e]=[]),o[e].push(t)}off(e,t){const o=this._isSpecialChannel(e)?this._specialHandlers:this._handlers;if(!(e in o))return;if(void 0===t)return void delete o[e];const r=o[e].indexOf(t);r>=0&&o[e].splice(r,1)}emit(e,t,o,r){this._handlers[o]&&this._handlers[o].forEach((n=>{n(e,t,o,r)}));for(const n of Object.keys(this._specialHandlers)){const s="^"+n.replace(/\*/g,".*?")+"$";new RegExp(s).test(o)&&this._specialHandlers[n].forEach((n=>{n(e,t,o,r)}))}}_isSpecialChannel(e){return/\*/.test(e)}}var E=o(788312),y=o(584104),T=o(702203),b=o(875500),v=o(222993),P=o(384530);function A(){return!P.isIOS&&!P.isIPad&&void 0!==navigator.locks}class I{constructor(){this._id=(0,y.guid)(),this._state={[this._id]:{}},this._xEventPrefix="multiplexer-state-",this._xEventCreateTab=this._xEventPrefix+"create-new-tab",this._xEventShareState=this._xEventPrefix+"share-state",this._lockName="tab_destruction",this._stateChangeDelegate=new b.Delegate,this._createdLocks={},this._lockEnabled=A(),this._lockPromise=(0,v.createDeferredPromise)(),this._lockCreated=(0,v.createDeferredPromise)(),this._onTabCreateCb=null,this._onTabCreate=e=>{this._onTabCreateCb&&this._onTabCreateCb();const t=JSON.parse(e);this._state[t]={},this._shareState(),this._requestTabRemoveLock(t)},this._shareState=async()=>{await this._lockCreated.promise;const e=JSON.stringify([this._id,this._state[this._id]]);r.TVXWindowEvents.emit(this._xEventShareState,e)},this._requestTabRemoveLock=e=>{!this._createdLocks[e]&&this._lockEnabled&&(this._createdLocks[e]=1,navigator.locks.request(`${this._lockName}_${e}`,(async()=>{const t=this._state[e]||{};this._compareTabState(e,{},t,"add"),this._compareTabState(e,t,{},"remove"),
delete this._state[e],delete this._createdLocks[e]})))},this._onShareStateFromOther=e=>{const[t,o]=JSON.parse(e),r=this._state[t]||{};this._compareTabState(t,o,r,"add"),this._compareTabState(t,r,o,"remove"),this._state[t]=o,this._requestTabRemoveLock(t)},this._removeChannel=(e,t)=>{delete this._state[this._id][e][t],this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("remove",e,t);0===Object.keys(this._state[this._id][e]).length&&delete this._state[this._id][e]},r.TVXWindowEvents.on(this._xEventCreateTab,this._onTabCreate),r.TVXWindowEvents.on(this._xEventShareState,this._onShareStateFromOther),this._lockEnabled?navigator.locks.request(`${this._lockName}_${this._id}`,(async()=>(r.TVXWindowEvents.emit(this._xEventCreateTab,JSON.stringify(this._id)),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockCreated.resolve(),this._lockPromise.promise))):this._lockCreated.resolve()}addChannel(e,t){this._isNotEmpty(e,t)?this._state[this._id][e][t]++:(this._state[this._id][e]||(this._state[this._id][e]={}),this._state[this._id][e][t]=1),this._isListenByAnotherTab(e,t)||this._stateChangeDelegate.fire("add",e,t),this._shareState()}removeChannel(e,t){this._isExist(e,t)&&(this._state[this._id][e][t]--,this._isNotEmpty(e,t)||this._removeChannel(e,t),this._shareState())}collectPushStreamChannels(e){const t=new Set;return Object.keys(this._state).forEach((o=>{const r=this._state[o][e];this._state[o][e]&&Object.keys(r).forEach((e=>t.add(e)))})),Array.from(t)}onStateChange(e){this._stateChangeDelegate.subscribe(null,e)}offStateChange(e){this._stateChangeDelegate.unsubscribe(null,e)}onTabCreate(e){this._onTabCreateCb=e}_isExist(e,t,o=this._id){return void 0!==this._state[o]&&void 0!==this._state[o][e]&&void 0!==this._state[o][e][t]}_isNotEmpty(e,t,o=this._id){return this._isExist(e,t,o)&&this._state[o][e][t]>0}_compareTabState(e,t,o,r){Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((t=>{this._isListenByAnotherTab(n,t,e)||o[n]&&o[n][t]||this._stateChangeDelegate.fire(r,n,t)}))}))}_isListenByAnotherTab(e,t,o=this._id){return Object.keys(this._state).some((r=>r!==o&&this._isNotEmpty(e,t,r)))}}const w=(0,l.getLogger)(m),R={url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws",transportType:C.WebSocket},N={url:window.PUSHSTREAM_URL.replace("wss://","https://"),urlPath:"message-pipe-es",transportType:C.EventSource};class O{constructor(){var e;this.guid=(0,y.guid)(),this._pushStreamPublic=null,this._pushStreamPrivate=null,this._statusHandlers=[],this._reconnectHandlers=[],this._userPrivateChannel=null,this._channelMultiplexer=new f,this._xEventPrefix="multiplexer-bc-",this._storagePrefix="pushStreamMultiplexerState.",this._userChannelPrefix="private_",this._statusPublic=i.ConnectionStatus.Closed,this._statusPrivate=i.ConnectionStatus.Closed,this._xEventSend=this._xEventPrefix+"send",this._xEventConnectionStatus=this._xEventPrefix+"connectionStatus",this._xEventReconnectCommand=this._xEventPrefix+"reconnectCommand",this._xEventReconnectSuccess=this._xEventPrefix+"reconnectSuccess",
this._xEventRequestLogs=this._xEventPrefix+"requestLogs",this._xEventShareLogs=this._xEventPrefix+"shareLogs",this._state=new I,this._shareLogsKey=this._storagePrefix+"shareLogs",this._lockName="pushstream",this._lockPromise=(0,v.createDeferredPromise)(),this._dispatchReconnectSuccessCommandFromOther=e=>{if(this.ownPushStream())return;const[t]=this._decodeParams(e);this._callReconnectHandlers(t)},this._dispatchMessage=(e,t,o)=>{this._dispatchMessageToOthers(e,t,o),this._dispatchMessageToSelf(e,t,o,!1)},this._dispatchMessageFromOther=e=>{if(this.ownPushStream())return;const[t,o,r]=this._decodeParams(e);this._dispatchMessageToSelf(t,o,r,!0)},this._dispatchStatusChangeFromOther=e=>{const t=this._decodeConnectionStatus(e),o=t[0],r=t[1];this.ownPushStream()||this._dispatchStatusChangeToSelf(o,r)},this._dispatchReconnectCommandFromOther=()=>{this.ownPushStream()&&this.forceConnect()},this._onRequestLogs=()=>{if(this.ownPushStream()){const e=this._getOwnLogs();let t="";try{t=JSON.stringify(e)}catch(e){w.logError("Failed to stringify own pushstream logs")}s.TVLocalStorage.setItem(this._shareLogsKey,t),r.TVXWindowEvents.emit(this._xEventShareLogs,t)}},this._onStateChange=(e,t,o)=>{const r="private"===t?this._pushStreamPrivate:this._pushStreamPublic;"add"===e?r?.addChannel(o):r?.removeChannel(o)},this._onNewTabCreate=()=>{this._dispatchStatusChangeToOthers(this._statusPublic,this._statusPrivate)},A()?navigator.locks.request(this._lockName,(async()=>(this._state.onStateChange(this._onStateChange),this._state.onTabCreate(this._onNewTabCreate),this._instantiatePushStream(),window.addEventListener("beforeunload",(()=>this._lockPromise.resolve())),this._lockPromise.promise))):(this._state.onStateChange(this._onStateChange),this._instantiatePushStream()),r.TVXWindowEvents.on(this._xEventSend,this._dispatchMessageFromOther),r.TVXWindowEvents.on(this._xEventConnectionStatus,this._dispatchStatusChangeFromOther),r.TVXWindowEvents.on(this._xEventReconnectCommand,this._dispatchReconnectCommandFromOther),r.TVXWindowEvents.on(this._xEventReconnectSuccess,this._dispatchReconnectSuccessCommandFromOther),r.TVXWindowEvents.on(this._xEventRequestLogs,this._onRequestLogs),e=()=>{window.loginStateChange&&window.loginStateChange.subscribe(this,this._changeLoginState)},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}on(e,t){this._channelMultiplexer.on(e,t)}off(e,t){this._channelMultiplexer.off(e,t)}onStatus(e){this._statusHandlers.push({handler:e,isPrivate:!1}),setTimeout((()=>e(this._statusPublic)),0)}onPrivateStatus(e){this._statusHandlers.push({handler:e,isPrivate:!0}),setTimeout((()=>e(this._statusPrivate)),0)}onReconnect(e,t=!1){this._reconnectHandlers.push({handler:e,isPrivate:t})}offReconnect(e){this._reconnectHandlers=this._reconnectHandlers.filter((t=>t.handler!==e))}offStatus(e){this._statusHandlers=this._statusHandlers.filter((t=>t.handler!==e))}forceConnect(){w.logNormal(`Creating pushstream connection after force connect. Main tab: ${this.ownPushStream()}`),
this.ownPushStream()?(this._pushStreamPublic?.disconnect(),this._pushStreamPrivate?.disconnect(),this._instantiatePushStream()):r.TVXWindowEvents.emit(this._xEventReconnectCommand)}disconnect(){this.ownPushStream()&&this._destructPushStream()}getLogs(e){return new Promise((t=>{const o=setTimeout((()=>{const e=s.TVLocalStorage.getItem(this._shareLogsKey);t(null!==e?JSON.parse(e):[])}),1e3),n=e=>{let s;r.TVXWindowEvents.off(this._xEventShareLogs,n),r.TVXWindowEvents.emit(this._xEventShareLogs,""),clearTimeout(o);try{s=JSON.parse(e)}catch(e){s=[],w.logError("Failed to parse logs received from master tab")}t(s)};this.ownPushStream()?t(this._getOwnLogs(e)):(r.TVXWindowEvents.on(this._xEventShareLogs,n),r.TVXWindowEvents.emit(this._xEventRequestLogs))}))}ownPushStream(){return!!this._pushStreamPublic||!!this._pushStreamPrivate}pushStream(){if(!this.ownPushStream())throw new Error("Not own PushStream");return this._pushStreamPublic}isConnected(){return this._statusPublic>0}status(){return this._statusPublic??i.ConnectionStatus.Closed}statusPrivate(){return this._statusPrivate??i.ConnectionStatus.Closed}userChannel(){if(!this._userPrivateChannel)throw new Error("No user channel");return this._userChannel(this._userPrivateChannel)}addChannel(e){this._state.addChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}removeChannel(e){this._state.removeChannel(e.startsWith(this._userChannelPrefix)?"private":"public",e)}static getInstance(){return null===this._instance&&(this._instance=new O),this._instance}_userChannel(e){return this._userChannelPrefix+e}_codeParams(e){const t=[...e];return t.push((new Date).getTime()),JSON.stringify(t)}_decodeParams(e){const t=JSON.parse(e);return t.pop(),t}_instantiatePushStream(){this._pushStreamPublic&&((0,n.trackEvent)("PushstreamDoublePublic",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPublic.disconnect());const e=this._getPushStreamSettings();this._pushStreamPublic=new S(this._dispatchMessage,e),this._pushStreamPublic.connectionStatus().subscribe((e=>{this._dispatchStatusChange(e,this._statusPrivate)})),this._pushStreamPublic.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand()})),this._pushStreamPrivate&&((0,n.trackEvent)("PushstreamDoublePrivate",window.user&&window.user.username||"Guest",navigator.userAgent),this._pushStreamPrivate.disconnect()),this._pushStreamPrivate=new S(this._dispatchMessage,{...e,maxSize:1}),this._pushStreamPrivate.connectionStatus().subscribe((e=>{this._dispatchStatusChange(this._statusPublic,e)})),this._pushStreamPrivate.reconnectEvent().subscribe(null,(()=>{this._dispatchReconnectSuccessCommand(!0)})),this.on("pushstream_set_user_channel",(e=>{this._setUserChannel(e)})),this._connectChannels()}_destructPushStream(){const e=this._pushStreamPublic;this._pushStreamPublic=null,e?.disconnect();const t=this._pushStreamPrivate;this._pushStreamPrivate=null,t?.disconnect(),this._dispatchStatusChangeFromOther(this._codeParams([i.ConnectionStatus.Closed,i.ConnectionStatus.Closed]))}
_connectChannels(){this._pushStreamPublic?.addChannel("public");const e=this._state.collectPushStreamChannels("public");void 0!==e&&e.length>0&&e.map((e=>this._pushStreamPublic?.addChannel(e))),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&window.loginStateChange.subscribe(this,this._connectUserChannelInitial),this._isPublicPushstreamEnabled()&&this._pushStreamPublic?.connect()}_getPushStreamSettings(){return(0,T.isOnMobileAppPage)("any")?(0,E.isFeatureEnabled)("enable_eventsource_pushstream_mobile")?N:R:(0,E.isFeatureEnabled)("enable_eventsource_pushstream_transport")?N:R}_isPublicPushstreamEnabled(){return(0,T.isOnMobileAppPage)("any")||!(0,E.isFeatureEnabled)("disable_pushstream_connections_for_anonymous_users")||window.is_authenticated||window.TradingView?.onChartPage}_connectUserChannelInitial(e){e&&(window.is_authenticated?(this._userPrivateChannel=window.user.private_channel??null,this._pushStreamPrivate?.addChannel(this.userChannel()),this._pushStreamPrivate?.connect()):this._userPrivateChannel=null)}_changeLoginState(e){e||(this._isPublicPushstreamEnabled()&&this._pushStreamPublic?.connect(),window.is_authenticated?(this._userPrivateChannel=window.user.private_channel??null,this.ownPushStream()&&(this._pushStreamPrivate?.addChannel(this.userChannel()),this._pushStreamPrivate?.connect())):(this.ownPushStream()&&(this._pushStreamPrivate?.removeChannel(this.userChannel()),this._pushStreamPrivate?.disconnect()),this._userPrivateChannel=null))}_setUserChannel(e){w.logNormal("Set user channel "+e),e!==this._userPrivateChannel&&(this.ownPushStream()&&this._userPrivateChannel&&this._pushStreamPrivate?.removeChannel(this.userChannel()),this._userPrivateChannel=e,this.ownPushStream()&&this._userPrivateChannel&&this._pushStreamPrivate?.addChannel(this.userChannel()))}_dispatchStatusChange(e,t){this._dispatchStatusChangeToOthers(e,t),this._dispatchStatusChangeToSelf(e,t)}_dispatchStatusChangeToSelf(e,t){e!==this._statusPublic&&(this._statusPublic=e,this._callStatusHandlers(e,!1)),t!==this._statusPrivate&&(this._statusPrivate=t,this._callStatusHandlers(t,!0))}_callStatusHandlers(e,t){w.logNormal("Connection status change: "+e+", private "+t+", is main tab "+this.ownPushStream()),a.telemetry.sendReport("site","pushstream_status_change"),this._statusHandlers.forEach((o=>{o.isPrivate===t&&o.handler(e)}))}_callReconnectHandlers(e){w.logNormal("Reconnection has been made"),this._reconnectHandlers.forEach((t=>{t.isPrivate===e&&t.handler()}))}_dispatchReconnectSuccessCommand(e=!1){if(this.ownPushStream()){this._callReconnectHandlers(e);const t=this._codeParams([e]);r.TVXWindowEvents.emit(this._xEventReconnectSuccess,t)}}_decodeConnectionStatus(e){const t=parseInt(e,10);return isNaN(t)?this._decodeParams(e):[t,t]}_dispatchStatusChangeToOthers(e,t){if(this.ownPushStream()){const o=this._codeParams([e,t]);r.TVXWindowEvents.emit(this._xEventConnectionStatus,o)}}_dispatchMessageToSelf(e,t,o,r){const n=e.channel,s=e.content;this._emit(s,t,n,r)}_dispatchMessageToOthers(e,t,o){const n=[e,t,o]
;r.TVXWindowEvents.emit(this._xEventSend,this._codeParams(n))}_emit(e,t,o,r){this._channelMultiplexer.emit(e,t,o,r)}_getOwnLogs(e){if(this.ownPushStream()){const t=(0,l.getRawLogHistory)(e,m),o=this.pushStream()?.getLogs();return[].concat(t,o??[])}return[]}}O._instance=null;const L=O.getInstance()},637581:(e,t,o)=>{"use strict";async function r(){if(!window.user||window.user.do_not_track)return null;{const e=(await Promise.all([o.e(70644),o.e(66224),o.e(66399)]).then(o.bind(o,594202))).getTrackerInstance();return e||null}}o.d(t,{getTracker:()=>r})},603719:(e,t,o)=>{"use strict";o.d(t,{syncUserConversionData:()=>u,syncUserData:()=>d});var r=o(77357),n=o(858328),s=o(184544),i=o(131890),a=o(842645);const l=(0,r.getLogger)("User.Sync");function c(e){return`${e}_${window.user&&window.user.username||""}`}function h(e){const{source:t,isAuthenticated:o,proPlan:r,offers:i,fireLoginChange:a=!0}=e;r!==window.user.pro_plan&&(window.user.pro_plan=r,window.user.is_pro=Boolean(r),(0,n.trackEvent)("Sync User Data","Different Pro Plan",c(t))),o!==window.is_authenticated&&(window.is_authenticated=o,a&&window.loginStateChange.fire(),(0,n.trackEvent)("Sync User Data","Different Auth",c(t))),i&&s.availableOffers.setInitial(i)}async function d(e){try{h({source:e,isAuthenticated:!0,proPlan:(await(0,a.getProPlanDetailsForUser)()).pro_plan})}catch(t){!function(e,t){403===t.status&&["not_authenticated","login_required"].includes(t.type||"")?h({source:e,isAuthenticated:!1,proPlan:void 0}):l.logError(t.message)}(e,t)}}async function u(e,t=!0){const o=new URL("/pricing/",window.location.origin),r=new URLSearchParams(window.location.search);r.has("_test_country")&&o.searchParams.append("_test_country",r.get("_test_country")??""),o.searchParams.append("component-data-only","1");const n=await(0,i.fetch)(o.href),s=await n.json();return h({source:e,isAuthenticated:s.is_authenticated,proPlan:s.user.pro_plan,fireLoginChange:t,offers:s.user.available_offers}),s}},39146:(e,t,o)=>{"use strict";function r(e,t=window){const o="theme-"+e,r=t.document.documentElement.classList;for(const e of Array.from(r))e.startsWith("theme-")&&e!==o&&r.remove(e);r.add(o),t.document.documentElement.dataset.theme=e}o.d(t,{applyTheme:()=>r})},789368:(e,t,o)=>{"use strict";o.d(t,{provider:()=>u});var r={};o.r(r),o.d(r,{isThemeExist:()=>d,loadTheme:()=>a,loadThemes:()=>l,removeTheme:()=>h,saveTheme:()=>c});var n=o(131890);const s=(0,o(77357).getLogger)("Themes.Provider");let i=null;function a(e){return(0,n.fetch)("/theme/?themeName="+encodeURIComponent(e),{credentials:"include",method:"GET"}).then((e=>e.json())).then((e=>{const t={};return e.content&&(t.content=JSON.parse(e.content)),t}))}function l(){return i||(0,n.fetch)("/themes/",{credentials:"include",method:"GET"}).then((e=>(i=e.json(),i)))}function c(e,t){const o=new FormData;return o.append("content",JSON.stringify(t)),o.append("name",e),i=null,(0,n.fetch)("/save-theme/",{credentials:"include",method:"POST",body:o}).then((e=>e.json()),(e=>s.logError(e)))}function h(e){const t=new FormData;return t.append("name",e),
i=null,(0,n.fetch)("/remove-theme/",{credentials:"include",method:"POST",body:t}).then((e=>e.json()),(e=>s.logError(e)))}function d(e){return a(e).then((e=>Boolean(e.content)))}const u=r},171898:(e,t,o)=>{"use strict";o.d(t,{colors:()=>a});var r=o(823291),n=o(275925);const s={colorBlack:(0,r.getHexColorByName)("color-black"),colorWhite:(0,r.getHexColorByName)("color-white"),colorTvBlue50:(0,r.getHexColorByName)("color-tv-blue-50"),colorTvBlue200:(0,r.getHexColorByName)("color-tv-blue-200"),colorTvBlue400:(0,r.getHexColorByName)("color-tv-blue-400"),colorTvBlue500:(0,r.getHexColorByName)("color-tv-blue-500"),colorTvBlue600:(0,r.getHexColorByName)("color-tv-blue-600"),colorTvBlue800:(0,r.getHexColorByName)("color-tv-blue-800"),colorTvBlueA800:(0,r.getHexColorByName)("color-tv-blue-a800"),colorDeepBlue200:(0,r.getHexColorByName)("color-deep-blue-200"),colorDeepBlue300:(0,r.getHexColorByName)("color-deep-blue-300"),colorDeepBlue500:(0,r.getHexColorByName)("color-deep-blue-500"),colorDeepBlueA200:(0,r.getHexColorByName)("color-deep-blue-a200"),colorDeepBlueA400:(0,r.getHexColorByName)("color-deep-blue-a400"),colorDeepBlueA700:(0,r.getHexColorByName)("color-deep-blue-a700"),colorSkyBlue400:(0,r.getHexColorByName)("color-sky-blue-400"),colorSkyBlue500:(0,r.getHexColorByName)("color-sky-blue-500"),colorSkyBlue700:(0,r.getHexColorByName)("color-sky-blue-700"),colorDefaultRed:(0,r.getHexColorByName)("color-youtube"),colorRipeRed200:(0,r.getHexColorByName)("color-ripe-red-200"),colorRipeRed300:(0,r.getHexColorByName)("color-ripe-red-300"),colorRipeRed400:(0,r.getHexColorByName)("color-ripe-red-400"),colorRipeRed500:(0,r.getHexColorByName)("color-ripe-red-500"),colorRipeRed600:(0,r.getHexColorByName)("color-ripe-red-600"),colorRipeRed800:(0,r.getHexColorByName)("color-ripe-red-800"),colorRipeRedA900:(0,r.getHexColorByName)("color-ripe-red-a900"),colorRipeRedA700:(0,r.getHexColorByName)("color-ripe-red-a700"),colorGrapesPurpleA200:(0,r.getHexColorByName)("color-grapes-purple-a200"),colorGrapesPurpleA400:(0,r.getHexColorByName)("color-grapes-purple-a400"),colorGrapesPurple500:(0,r.getHexColorByName)("color-grapes-purple-500"),colorBerryPink400:(0,r.getHexColorByName)("color-berry-pink-400"),colorBerryPink500:(0,r.getHexColorByName)("color-berry-pink-500"),colorMintyGreen100:(0,r.getHexColorByName)("color-minty-green-100"),colorMintyGreen200:(0,r.getHexColorByName)("color-minty-green-200"),colorMintyGreen400:(0,r.getHexColorByName)("color-minty-green-400"),colorMintyGreen500:(0,r.getHexColorByName)("color-minty-green-500"),colorMintyGreen600:(0,r.getHexColorByName)("color-minty-green-600"),colorMintyGreen800:(0,r.getHexColorByName)("color-minty-green-800"),colorMintyGreenA900:(0,r.getHexColorByName)("color-minty-green-a900"),colorIguanaGreen300:(0,r.getHexColorByName)("color-iguana-green-300"),colorIguanaGreen500:(0,r.getHexColorByName)("color-iguana-green-500"),colorIguanaGreenA700:(0,r.getHexColorByName)("color-iguana-green-a700"),colorTanOrange300:(0,r.getHexColorByName)("color-tan-orange-300"),colorTanOrange500:(0,
r.getHexColorByName)("color-tan-orange-500"),colorTanOrange600:(0,r.getHexColorByName)("color-tan-orange-600"),colorTanOrange700:(0,r.getHexColorByName)("color-tan-orange-700"),colorColdGray100:(0,r.getHexColorByName)("color-cold-gray-100"),colorColdGray150:(0,r.getHexColorByName)("color-cold-gray-150"),colorColdGray200:(0,r.getHexColorByName)("color-cold-gray-200"),colorColdGray300:(0,r.getHexColorByName)("color-cold-gray-300"),colorColdGray400:(0,r.getHexColorByName)("color-cold-gray-400"),colorColdGray450:(0,r.getHexColorByName)("color-cold-gray-450"),colorColdGray500:(0,r.getHexColorByName)("color-cold-gray-500"),colorColdGray550:(0,r.getHexColorByName)("color-cold-gray-550"),colorColdGray600:(0,r.getHexColorByName)("color-cold-gray-600"),colorColdGray650:(0,r.getHexColorByName)("color-cold-gray-650"),colorColdGray700:(0,r.getHexColorByName)("color-cold-gray-700"),colorColdGray750:(0,r.getHexColorByName)("color-cold-gray-750"),colorColdGray800:(0,r.getHexColorByName)("color-cold-gray-800"),colorColdGray850:(0,r.getHexColorByName)("color-cold-gray-850"),colorColdGray900:(0,r.getHexColorByName)("color-cold-gray-900"),colorForestGreen300:(0,r.getHexColorByName)("color-forest-green-300")},i={colorWhiteAlpha25:(0,n.generateColor)(s.colorWhite,75),colorTvBlue500Alpha40:(0,n.generateColor)(s.colorTvBlue500,60),colorTvBlue500Alpha30:(0,n.generateColor)(s.colorTvBlue500,70),colorTvBlue500Alpha28:(0,n.generateColor)(s.colorTvBlue500,72),colorTvBlue500Alpha25:(0,n.generateColor)(s.colorTvBlue500,75),colorTvBlue500Alpha20:(0,n.generateColor)(s.colorTvBlue500,80),colorDeepBlue500Alpha20:(0,n.generateColor)(s.colorDeepBlue500,80),colorSkyBlue400Alpha5:(0,n.generateColor)(s.colorSkyBlue400,95),colorSkyBlue400Alpha50:(0,n.generateColor)(s.colorSkyBlue400,50),colorSkyBlue400Alpha75:(0,n.generateColor)(s.colorSkyBlue400,25),colorSkyBlue500Alpha20:(0,n.generateColor)(s.colorSkyBlue500,80),colorSkyBlue500Alpha25:(0,n.generateColor)(s.colorSkyBlue500,75),colorSkyBlue700Alpha70:(0,n.generateColor)(s.colorSkyBlue700,30),colorRipeRed400Alpha5:(0,n.generateColor)(s.colorRipeRed400,95),colorRipeRed500Alpha5:(0,n.generateColor)(s.colorRipeRed500,95),colorRipeRed500Alpha20:(0,n.generateColor)(s.colorRipeRed500,80),colorRipeRed500Alpha28:(0,n.generateColor)(s.colorRipeRed500,72),colorRipeRed500Alpha30:(0,n.generateColor)(s.colorRipeRed500,70),colorRipeRed500Alpha50:(0,n.generateColor)(s.colorRipeRed500,50),colorGrapesPurpleA200Alpha15:(0,n.generateColor)(s.colorGrapesPurpleA200,85),colorGrapesPurple500Alpha0:(0,n.generateColor)(s.colorGrapesPurple500,100),colorGrapesPurple500Alpha20:(0,n.generateColor)(s.colorGrapesPurple500,80),colorGrapesPurple500Alpha70:(0,n.generateColor)(s.colorGrapesPurple500,30),colorBerryPink400Alpha50:(0,n.generateColor)(s.colorBerryPink400,50),colorBerryPink400Alpha75:(0,n.generateColor)(s.colorBerryPink400,25),colorBerryPink500Alpha20:(0,n.generateColor)(s.colorBerryPink500,80),colorBerryPink500Alpha25:(0,n.generateColor)(s.colorBerryPink500,75),colorMintyGreen500Alpha20:(0,
n.generateColor)(s.colorMintyGreen500,80),colorMintyGreen500Alpha28:(0,n.generateColor)(s.colorMintyGreen500,72),colorMintyGreen500Alpha50:(0,n.generateColor)(s.colorMintyGreen500,50),colorMintyGreen500Alpha5:(0,n.generateColor)(s.colorMintyGreen500,95),colorIguanaGreen500Alpha20:(0,n.generateColor)(s.colorIguanaGreen500,80),colorTanOrange500Alpha20:(0,n.generateColor)(s.colorTanOrange500,80),colorForestGreen300Alpha5:(0,n.generateColor)(s.colorForestGreen300,95),colorColdGray100Alpha0:(0,n.generateColor)(s.colorColdGray100,100),colorColdGray100Alpha6:(0,n.generateColor)(s.colorColdGray100,94),colorColdGray800Alpha0:(0,n.generateColor)(s.colorColdGray800,100),colorColdGray800Alpha6:(0,n.generateColor)(s.colorColdGray800,94)},a={...s,...i}},782056:(e,t,o)=>{"use strict";o.d(t,{dark:()=>re});var r=o(841397),n=o(171898);const{colorWhite:s,colorColdGray100Alpha0:i,colorColdGray100Alpha6:a,colorColdGray200:l,colorColdGray300:c,colorColdGray400:h,colorColdGray450:d,colorColdGray600:u,colorColdGray800:_,colorColdGray850:p,colorColdGray900:m,colorDeepBlueA200:g,colorGrapesPurpleA400:C,colorGrapesPurpleA200Alpha15:S,colorMintyGreen400:f,colorMintyGreen500:E,colorMintyGreen600:y,colorMintyGreen800:T,colorMintyGreen500Alpha5:b,colorMintyGreen500Alpha28:v,colorMintyGreen500Alpha50:P,colorMintyGreenA900:A,colorRipeRed400:I,colorRipeRed500:w,colorRipeRed600:R,colorRipeRed800:N,colorRipeRed500Alpha5:O,colorRipeRed500Alpha28:L,colorRipeRed500Alpha50:k,colorRipeRedA900:x,colorBerryPink500Alpha25:D,colorBerryPink400Alpha50:B,colorBerryPink400Alpha75:H,colorBerryPink500:U,colorIguanaGreenA700:M,colorSkyBlue400Alpha5:G,colorSkyBlue400Alpha50:F,colorSkyBlue400Alpha75:W,colorSkyBlue500:V,colorSkyBlue500Alpha25:j,colorDeepBlueA400:q,colorTvBlue400:$,colorTvBlue500:K,colorTvBlue500Alpha28:Y,colorTvBlue600:z,colorTvBlue800:X,colorTvBlueA800:J,colorTanOrange500:Q,colorTanOrange600:Z}=n.colors,ee={color:K,tpo:{colors:{gradientColors:[U,M,V,q]}},volumeProfile:{valuesColor:l,vah:{color:l},val:{color:l},poc:{color:l},volumeColor:F,valueAreaColor:W},levels:{pocColor:l,poorHighColor:g,poorLowColor:g,singleprintsColor:S,vahColor:l,valColor:l}},te={upColor:E,downColor:w,borderColor:"#378658",borderUpColor:E,borderDownColor:w,wickColor:"#737375",wickUpColor:E,wickDownColor:w,imbalanceHighlight:{buyColor:E,sellColor:w},bgColors:{adjBuyBgColors:[A,T,y,f],adjSellBgColors:[x,N,R,I],adjTotalBgColors:[J,X,z,$],buyBgColor:T,sellBgColor:N,totalBgColor:X,pocColor:l}},oe={volumeProfile:{valuesColor:l,volumeColorUp:F,volumeColorDown:B,valueAreaColorUp:W,valueAreaColorDown:H,histogramBoxColor:G},vah:{color:l},val:{color:l},poc:{color:l},developingPoc:{color:l},developingVA:{color:V}},re={content:{chartProperties:{scalesProperties:{textColor:c,lineColor:i,backgroundColor:s},paneProperties:{vertGridProperties:{color:a},horzGridProperties:{color:a},crossHairProperties:{color:h},background:m,backgroundGradientStartColor:p,backgroundGradientEndColor:m,backgroundType:"solid",separatorColor:_}},sessions:{sessionHighlight:{backgrounds:{outOfSession:{color:K,
transparency:92},preMarket:{color:Q,transparency:92},postMarket:{color:K,transparency:92},electronic:{color:K,transparency:92}},vertlines:{sessBreaks:{color:"#4985e7"}}}},mainSourceProperties:{baseLineColor:u,prevClosePriceLineColor:"#555555",priceLineColor:"",highLowAvgPrice:{highLowPriceLinesColor:"",averagePriceLineColor:""},bidAsk:{bidLineColor:K,askLineColor:I},prePostMarket:{preMarketColor:Z,postMarketColor:K},candleStyle:{borderColor:"#378658",upColor:E,wickColor:"#737375",wickUpColor:E,wickDownColor:w,downColor:w,borderUpColor:E,borderDownColor:w},volCandlesStyle:{borderColor:"#378658",upColor:E,wickColor:"#737375",wickUpColor:E,wickDownColor:w,downColor:w,borderUpColor:E,borderDownColor:w},haStyle:{borderColor:"#378658",upColor:E,wickColor:"#737375",wickUpColor:E,wickDownColor:w,downColor:w,borderUpColor:E,borderDownColor:w},hlcAreaStyle:{highLineColor:V,lowLineColor:U,closeLineColor:K,highCloseFillColor:j,closeLowFillColor:D},hollowCandleStyle:{upColor:E,downColor:w,borderColor:"#378658",borderUpColor:E,borderDownColor:w,wickColor:"#737375",wickUpColor:E,wickDownColor:w},barStyle:{downColor:w,upColor:E},pnfStyle:{downColor:w,upColor:E,upColorProjection:"#336854",downColorProjection:"#7f323f"},baselineStyle:{baselineColor:d,topFillColor1:v,topFillColor2:b,bottomFillColor1:O,bottomFillColor2:L,topLineColor:E,bottomLineColor:w},areaStyle:{transparency:100,color1:Y,color2:K,linecolor:K},hiloStyle:{color:K,borderColor:K,labelColor:K},columnStyle:{upColor:P,downColor:k},renkoStyle:{upColor:E,downColor:w,borderUpColor:E,borderDownColor:w,upColorProjection:"#336854",downColorProjection:"#7f323f",borderUpColorProjection:"#336854",borderDownColorProjection:"#7f323f",wickUpColor:E,wickDownColor:w},lineStyle:{colorType:r.ColorType.Gradient,color:K,gradientStartColor:C,gradientEndColor:"#00BCE5"},lineWithMarkersStyle:{colorType:r.ColorType.Gradient,color:K,gradientStartColor:C,gradientEndColor:"#00BCE5"},steplineStyle:{colorType:r.ColorType.Gradient,color:K,gradientStartColor:C,gradientEndColor:"#00BCE5"},kagiStyle:{downColor:w,upColor:E,upColorProjection:"#336854",downColorProjection:"#7f323f"},pbStyle:{upColor:E,downColor:w,borderUpColor:E,borderDownColor:w,upColorProjection:"#336854",downColorProjection:"#7f323f",borderUpColorProjection:"#336854",borderDownColorProjection:"#7f323f"},rangeStyle:{upColor:E,downColor:w,upColorProjection:"#336854",downColorProjection:"#7f323f",candlesUpColor:E,candlesDownColor:w,candlesBorderUpColor:E,candlesBorderDownColor:w,candlesWickUpColor:E,candlesWickDownColor:w},tpoStyle:ee,volFootprintStyle:te,svpStyle:oe,hlcBarsStyle:{color:K}}}}},886470:(e,t,o)=>{"use strict";o.d(t,{light:()=>te});var r=o(171898),n=o(841397)
;const{colorWhite:s,colorBlack:i,colorColdGray150:a,colorColdGray300:l,colorColdGray400:c,colorColdGray450:h,colorColdGray800Alpha0:d,colorColdGray800Alpha6:u,colorColdGray900:_,colorGrapesPurpleA400:p,colorGrapesPurpleA200Alpha15:m,colorMintyGreen200:g,colorMintyGreen400:C,colorMintyGreen500:S,colorMintyGreen600:f,colorMintyGreen800:E,colorMintyGreen500Alpha5:y,colorMintyGreen500Alpha28:T,colorMintyGreen500Alpha50:b,colorRipeRed200:v,colorRipeRed400:P,colorRipeRed500:A,colorRipeRed600:I,colorRipeRedA700:w,colorRipeRed500Alpha5:R,colorRipeRed500Alpha28:N,colorRipeRed500Alpha50:O,colorDeepBlueA700:L,colorBerryPink500:k,colorBerryPink500Alpha25:x,colorBerryPink400Alpha50:D,colorBerryPink400Alpha75:B,colorIguanaGreenA700:H,colorSkyBlue400Alpha5:U,colorSkyBlue400Alpha50:M,colorSkyBlue400Alpha75:G,colorSkyBlue500:F,colorSkyBlue500Alpha25:W,colorDeepBlueA400:V,colorTvBlue200:j,colorTvBlue400:q,colorTvBlue500:$,colorTvBlue500Alpha28:K,colorTvBlue600:Y,colorTvBlue800:z,colorTanOrange500:X,colorTanOrange600:J}=r.colors,Q={color:$,tpo:{colors:{gradientColors:[k,H,F,V]}},volumeProfile:{valuesColor:_,vah:{color:_},val:{color:_},poc:{color:_},volumeColor:M,valueAreaColor:G},levels:{pocColor:_,poorHighColor:L,poorLowColor:L,singleprintsColor:m,vahColor:_,valColor:_}},Z={upColor:S,downColor:A,borderColor:"#378658",borderUpColor:S,borderDownColor:A,wickColor:"#737375",wickUpColor:S,wickDownColor:A,imbalanceHighlight:{buyColor:S,sellColor:A},bgColors:{adjBuyBgColors:[g,C,f,E],adjSellBgColors:[v,P,I,w],adjTotalBgColors:[j,q,Y,z],buyBgColor:C,sellBgColor:P,totalBgColor:q,pocColor:i}},ee={volumeProfile:{valuesColor:_,volumeColorUp:M,volumeColorDown:D,valueAreaColorUp:G,valueAreaColorDown:B,histogramBoxColor:U},vah:{color:_},val:{color:_},poc:{color:_},developingPoc:{color:_},developingVA:{color:F}},te={content:{chartProperties:{scalesProperties:{textColor:_,lineColor:d,backgroundColor:s},paneProperties:{vertGridProperties:{color:u},horzGridProperties:{color:u},crossHairProperties:{color:c},backgroundType:n.ColorType.Solid,background:s,backgroundGradientStartColor:s,backgroundGradientEndColor:s,separatorColor:a}},sessions:{sessionHighlight:{backgrounds:{outOfSession:{color:$,transparency:92},preMarket:{color:X,transparency:92},postMarket:{color:$,transparency:92},electronic:{color:$,transparency:92}},vertlines:{sessBreaks:{color:"#4985e7"}}}},mainSourceProperties:{baseLineColor:l,prevClosePriceLineColor:"#555555",priceLineColor:"",highLowAvgPrice:{highLowPriceLinesColor:"",averagePriceLineColor:""},bidAsk:{bidLineColor:$,askLineColor:P},prePostMarket:{preMarketColor:J,postMarketColor:$},candleStyle:{borderColor:"#378658",upColor:S,wickColor:"#737375",wickUpColor:S,wickDownColor:A,downColor:A,borderUpColor:S,borderDownColor:A},volCandlesStyle:{borderColor:"#378658",upColor:S,wickColor:"#737375",wickUpColor:S,wickDownColor:A,downColor:A,borderUpColor:S,borderDownColor:A},haStyle:{borderColor:"#378658",upColor:S,wickColor:"#737375",wickUpColor:S,wickDownColor:A,downColor:A,borderUpColor:S,borderDownColor:A},hlcAreaStyle:{highLineColor:F,
lowLineColor:k,closeLineColor:$,highCloseFillColor:W,closeLowFillColor:x},hollowCandleStyle:{upColor:S,downColor:A,borderColor:"#378658",borderUpColor:S,borderDownColor:A,wickColor:"#737375",wickUpColor:S,wickDownColor:A},barStyle:{downColor:A,upColor:S},pnfStyle:{downColor:A,upColor:S,upColorProjection:"#a9dcc3",downColorProjection:"#f5a6ae"},baselineStyle:{baselineColor:h,topFillColor1:T,topFillColor2:y,bottomFillColor1:R,bottomFillColor2:N,topLineColor:S,bottomLineColor:A},areaStyle:{transparency:100,color1:K,color2:$,linecolor:$},hiloStyle:{color:$,borderColor:$,labelColor:$},columnStyle:{upColor:b,downColor:O},renkoStyle:{upColor:S,downColor:A,borderUpColor:S,borderDownColor:A,upColorProjection:"#a9dcc3",downColorProjection:"#f5a6ae",borderUpColorProjection:"#a9dcc3",borderDownColorProjection:"#f5a6ae",wickUpColor:S,wickDownColor:A},lineStyle:{colorType:n.ColorType.Gradient,color:$,gradientStartColor:p,gradientEndColor:"#00BCE5"},lineWithMarkersStyle:{colorType:n.ColorType.Gradient,color:$,gradientStartColor:p,gradientEndColor:"#00BCE5"},steplineStyle:{colorType:n.ColorType.Gradient,color:$,gradientStartColor:p,gradientEndColor:"#00BCE5"},kagiStyle:{downColor:A,upColor:S,upColorProjection:"#a9dcc3",downColorProjection:"#f5a6ae"},pbStyle:{upColor:S,downColor:A,borderUpColor:S,borderDownColor:A,upColorProjection:"#a9dcc3",downColorProjection:"#f5a6ae",borderUpColorProjection:"#a9dcc3",borderDownColorProjection:"#f5a6ae"},rangeStyle:{upColor:S,downColor:A,upColorProjection:"#a9dcc3",downColorProjection:"#f5a6ae",candlesUpColor:S,candlesDownColor:A,candlesBorderUpColor:S,candlesBorderDownColor:A,candlesWickUpColor:S,candlesWickDownColor:A},tpoStyle:Q,volFootprintStyle:Z,svpStyle:ee,hlcBarsStyle:{color:$}}}}},653048:(e,t,o)=>{"use strict";o.r(t),o.d(t,{darkTheme:()=>c,getStdChartTheme:()=>_,getStdThemeNames:()=>u,lightTheme:()=>l,overrideStdTheme:()=>h,restoreStdThemes:()=>d,translateThemeName:()=>p});var r=o(729193),n=o(385955),s=o(886470),i=o(782056),a=o(645303);let l=(0,n.clone)(s.light),c=(0,n.clone)(i.dark);function h(e,t){switch(e){case a.StdTheme.Light:l=(0,n.merge)((0,n.clone)(l),t);break;case a.StdTheme.Dark:c=(0,n.merge)((0,n.clone)(c),t)}}function d(){l=(0,n.clone)(s.light),c=(0,n.clone)(i.dark)}function u(){return[a.StdTheme.Light,a.StdTheme.Dark]}function _(e){return(0,n.clone)(e===a.StdTheme.Light?l:e===a.StdTheme.Dark?c:void 0)}function p(e){return{[a.StdTheme.Light]:r.t(null,{context:"colorThemeName"},o(247167)),[a.StdTheme.Dark]:r.t(null,{context:"colorThemeName"},o(945362))}[e]||e}},645303:(e,t,o)=>{"use strict";var r;o.d(t,{StdTheme:()=>r}),function(e){e.Light="light",e.Dark="dark"}(r||(r={}))},582698:(e,t,o)=>{"use strict";function r(){return/(?:^|;)\s*theme=(dark|light)(?:;|$)|$/.exec(document.cookie)[1]}function n(e){const t=function(){const e=location.hostname.split(".").filter(Boolean);return e.every(isFinite)?location.host:e.slice(-2).join(".")}(),o=void 0===e?-1:3e8;document.cookie=`theme=${e};path=/;domain=${t};max-age=${o}`}o.d(t,{getThemeFromCookie:()=>r,setThemeToCookie:()=>n})},
321637:(e,t,o)=>{"use strict";o.d(t,{getThemeFromUserSettings:()=>s,saveThemeInUserSettings:()=>i});var r=o(950808),n=o(582698);function s(){return(0,n.getThemeFromCookie)()||(0,r.getValue)("current_theme.name")||null}function i(e){(0,n.setThemeToCookie)(e),(0,r.setValue)("current_theme.name",e,{forceFlush:!0})}},64906:(e,t,o)=>{"use strict";o.r(t),o.d(t,{DEFAULT_THEME:()=>c.DEFAULT_THEME,getCurrentTheme:()=>d,getStdTheme:()=>E,getStdThemeNames:()=>S,getStdThemedValue:()=>y,getTheme:()=>g,getThemeNames:()=>C,getThemedColor:()=>u,isStdThemeName:()=>f,isStdThemedDefaultValue:()=>T,isThemeExist:()=>P,removeTheme:()=>v,restoreTheme:()=>_,saveTheme:()=>b,savedThemeName:()=>p,syncTheme:()=>m,themeListChanged:()=>I,themes:()=>h.themes,translateStdThemeName:()=>A});var r=o(955482),n=o(875500),s=o(321637),i=o(789368),a=o(653048),l=o(513852),c=o(257637),h=o(591688);function d(){return h.themes[l.watchedTheme.value()]||h.themes[c.DEFAULT_THEME]}function u(e){return d().getThemedColor(e)}function _(){(0,l.setTheme)((0,s.getThemeFromUserSettings)()||c.DEFAULT_THEME)}function p(){return(0,s.getThemeFromUserSettings)()}function m(){(0,s.saveThemeInUserSettings)(d().name)}function g(e){return i.provider.loadTheme(e)}function C(){return i.provider.loadThemes()}function S(){return a.getStdThemeNames()}function f(e){return S().includes(e)}function E(e){return a.getStdChartTheme(e)||{content:void 0}}function y(e,t){const o=t||d().name,r=a.getStdChartTheme(o),n=0!==e.length&&e.split(".");return r&&r.content&&n?n.reduce(((e,t)=>e[t]),r.content):null}function T(e,t,o){const n=y(e,o);return null!==n&&(0,r.areEqualRgba)((0,r.parseRgba)(n),(0,r.parseRgba)(String(t)))}async function b(e,t){try{return await i.provider.saveTheme(e,t)}finally{I.fire()}}async function v(e){try{return await i.provider.removeTheme(e)}finally{I.fire()}}function P(e){return i.provider.isThemeExist(e)}function A(e){return a.translateThemeName(e)}const I=new n.Delegate},513852:(e,t,o)=>{"use strict";o.d(t,{setTheme:()=>i,watchedTheme:()=>s});var r=o(168509),n=o(39146);const s=new r.WatchedValue;function i(e){s.setValue(e)}s.subscribe((e=>{(0,n.applyTheme)(e,window)}))},560978:(e,t,o)=>{"use strict";o.d(t,{SYMBOL_LIST_SERVICE:()=>r});const r={id:"SymbolListService"}},886653:(e,t,o)=>{"use strict";o.d(t,{globalCloseDelegate:()=>r,globalCloseMenu:()=>n});const r=new(o(875500).Delegate);function n(){r.fire()}},164680:(e,t,o)=>{"use strict";o.d(t,{CircularCacheBuffer:()=>s});var r=o(185842);function n(e){const{prevItem:t,nextItem:o}=e;null!==t&&(t.nextItem=o),null!==o&&(o.prevItem=t)}class s{constructor(e=0,t=1.3){this._cache=new Map,this._lastItem=null,this._firstItem=null,this._size=e,this._sizeLimited=e>0,this._capacityFactor=t}set(e,t){const o={key:e,value:t,prevItem:this._lastItem,nextItem:null};null!==this._lastItem&&(this._lastItem.nextItem=o);const r=this._cache.get(e);return void 0!==r&&(n(r),r===this._firstItem&&(this._firstItem=r.nextItem)),this._cache.set(e,o),this._lastItem=o,null===this._firstItem&&(this._firstItem=o),
this._sizeLimited&&this._cache.size>this._size*this._capacityFactor&&this._removeExtraItems(),this}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);if(void 0===t)return t;if(t===this._firstItem&&(this._firstItem=t.nextItem??t),t!==this._lastItem){n(t);const e=(0,r.ensureNotNull)(this._lastItem);e.nextItem=t,t.prevItem=e,t.nextItem=null,this._lastItem=t}return t.value}clear(){this._cache.clear(),this._firstItem=null,this._lastItem=null}delete(e){const t=this._cache.get(e);return void 0!==t&&(n(t),t===this._lastItem&&(this._lastItem=t.prevItem),t===this._firstItem&&(this._firstItem=t.nextItem)),this._cache.delete(e)}*entries(){if(null!==this._firstItem)for(let e=this._firstItem;null!==e;e=e.nextItem)yield[e.key,e.value]}state(){const e=[];for(const[t,o]of this.entries())e.push([t,o]);return e}restoreState(e){for(const t of e)this.set(t[0],t[1])}_removeExtraItems(){const e=this._cache.size-this._size;let t=(0,r.ensureNotNull)(this._firstItem);for(let o=0;o<e;o+=1)this._cache.delete(t.key),t=(0,r.ensureNotNull)(t.nextItem);t.prevItem=null,this._firstItem=t}}},284321:(e,t,o)=>{"use strict";o.d(t,{clone:()=>r.clone,isNumber:()=>r.isNumber,isObject:()=>r.isObject,merge:()=>r.merge,notNull:()=>r.notNull});var r=o(385955)},657130:(e,t,o)=>{"use strict";o.d(t,{Action:()=>a,Loader:()=>c,Separator:()=>l});var r=o(185842),n=o(277637),s=o(584104),i=o(888720);class a{constructor(e){this.type="action",this._destroyed=!1,this._loadOptionsPromise=null,this._customAction=null;const{actionId:t,options:o,optionsLoader:n,customActionOptions:l,customActionOptionsLoader:c,id:h=s.guid(),onStartListening:d}=e;(0,r.assert)(void 0!==t,"actionId must be defined"),this.id=h,this._onUpdate=new i.ActionDelegate(d),this._options={actionId:t,...o},this.update(o),this._loadOptionsGetter=n??null,this._loadOptionsGetter&&(this._options.loading=!0),l&&(this._customAction=new a({actionId:t,options:l,optionsLoader:c,id:h}))}custom(){return this._customAction}execute(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)}getLabel(){return this._options.label||""}getSubItems(){return this._options.subItems||[]}isDisabled(){return!0===this._options.disabled}isActive(){return!0===this._options.active}isCheckable(){return!0===this._options.checkable}isChecked(){return!0===this._options.checked}isLoading(){return!0===this._options.loading}loadOptions(){return this._loadOptionsPromise?this._loadOptionsPromise:this._loadOptionsGetter?(this._loadOptionsPromise=this._loadOptionsGetter().then((e=>this.update({...e,loading:!1}))),this._loadOptionsPromise):null}getSize(){return this._options.size??"normal"}getPayload(){return this._options.payload}update(e){this._destroyed||(this._unbindShortcut(),e.hotkeyHash&&(this._options.shortcutHint=(0,n.humanReadableHash)(e.hotkeyHash)),this._options=Object.assign(this._options,e),this._bindShortcut(),this._onUpdate.fire(this))}onUpdate(){return this._onUpdate}getState(){return this.loadOptions(),{actionId:this._options.actionId,
label:this.getLabel(),styledLabel:this._options.styledLabel,disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),loading:this.isLoading(),size:this.getSize(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconId:this._options.iconId,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,invisibleHotkey:this._options.invisibleHotkey,noInteractive:this._options.noInteractive,jsxLabel:"jsxLabel"in this._options?this._options.jsxLabel:void 0,isRepeatAccepted:this._options.isRepeatAccepted}}destroy(){this._destroyed=!0,this._onUpdate.destroy(),this._unbindShortcut(),this._options.onDestroy?.(),this._customAction?.destroy()}options(){return this._options}_bindShortcut(){if(!this._options.hotkeyGroup||!this._options.hotkeyHash)return;const e="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,isRepeatAccepted:this._options.isRepeatAccepted,desc:e,handler:()=>this.execute(),isDisabled:()=>this.isDisabled()})}_unbindShortcut(){this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)}}class l{constructor(e){this.type="separator",this.id=s.guid(),this._hint=e}getHint(){return this._hint}}class c extends a{constructor(e){super({actionId:e,options:{}})}isLoading(){return!0}getSize(){return"big"}}},830780:(e,t,o)=>{"use strict";o.d(t,{ContextMenuManager:()=>r});var r,n=o(188485),s=o(657130),i=o(886653);!function(e){let t=null,r=null;const a=[],l={createAction:e=>new s.Action({actionId:"Chart.CustomActionId",options:e}),createAsyncAction:e=>new s.Action({actionId:"Chart.CustomActionId",options:{},optionsLoader:e}),createSeparator:()=>new s.Separator};async function c(e,s={},i={menuName:""},c){null!==t&&(e=await t(e,l,i));let d=null;const u=()=>{const e=(0,n.indexOf)(a,(e=>e.renderer===d));-1!==e&&a.splice(e,1),void 0!==c&&c()};let _=!1;if(null!==r&&(d=await r(e,i,u)),d)_=!0,h();else{const t=await Promise.all([o.e(7552),o.e(63665),o.e(74528),o.e(22066),o.e(18257),o.e(93807),o.e(2527),o.e(66985),o.e(24193),o.e(57425),o.e(32387),o.e(74364)]).then(o.bind(o,404212));d=new t.ContextMenuRenderer(e,s,u,h)}return a.push({renderer:d,isExternal:_}),d}function h(){(0,i.globalCloseMenu)(),a.forEach((e=>{e.isExternal&&e.renderer.isShown()&&e.renderer.hide()}))}e.createMenu=c,e.showMenu=function(e,t,o={},r,n){return c(e,o,r,n).then((e=>e.show(t)))},e.setCustomRendererFactory=function(e){r=e},e.setCustomItemsProcessor=function(e){t=e},e.hideAll=h,e.getShown=function(){for(let e=0;e<a.length;e++)if(a[e].renderer.isShown())return a[e].renderer;return null}}(r||(r={}))},925002:(e,t,o)=>{"use strict";var r;o.d(t,{CollectionViewMode:()=>r}),function(e){e.Multichart="multichart",e.ForceFullscreen="force-fullscreen"}(r||(r={}))},
841397:(e,t,o)=>{"use strict";var r;o.d(t,{ColorType:()=>r}),function(e){e.Solid="solid",e.Gradient="gradient"}(r||(r={}))},328377:(e,t,o)=>{"use strict";var r=o(545720),n=o(858328).trackEvent,s=o(77357).getLogger("Pine.ScriptLib"),i=o(254236).telemetry,a={fast:["delete","get","is_auth_to_get","is_auth_to_write","parse_title","rename","lib_list"],medium:["list","eval_pine_ex","translate_light"],slow:["process_legacy","publish","save","translate","translate_source","gen_alert"]},l=/[l|L]ines? (\d*)/;function c(e){if("object"==typeof e.reason)return e.reason;if(e.reason2)return e.reason2;const t={errors:[],warnings:[]},o=e.result&&e.result.metaInfo;if(o&&void 0!==o.warnings&&o.warnings.forEach((e=>t.warnings.push({message:e}))),e.reason){(Array.isArray(e.reason)?e.reason:e.reason.split("\n")).forEach((e=>{const o=e.match(l),r=o&&o.length&&Number(o[1]),n={message:e};if("number"==typeof r){n.start={line:r,column:0};const e=n.message.split(": ");e.shift(),n.message=e.join(": ")}t.errors.push(n)}))}return t}var h={getPineFacadeUrl:function(){return window.PINE_URL},PINE_FACADE_URL:function(){return window.PINE_URL}};h.safetyGetReason=c,h._pineFacadeAjax=function(e,t,o){s.logNormal("Requesting pine facade scripts, url: "+t);var n=function(e){for(var t=Object.keys(a),o=0;o<t.length;o++){var r=a[t[o]].filter((function(t){return-1!==e.indexOf(t)}));if(Boolean(r.length))return t[o]}return!1}(t),l=Date.now();return r.ajax({url:h.PINE_FACADE_URL()+t,type:e,data:o||{},dataType:"json",xhrFields:{withCredentials:!0}}).done((function(){var e=Date.now()-l;i.sendReport("pine",n+"_group_time_frame",{value:e}),i.sendReport("pine",n+"_group_ok"),s.logNormal("Requesting pine facade scripts finished, url: "+t)})).fail((function(){var e=Date.now()-l;i.sendReport("pine",n+"_group_time_frame",{value:e}),i.sendReport("pine",n+"_group_error"),s.logError("Requesting pine facade scripts failed, url: "+t)}))},h._generateAlertAsyncDone=function(e,t){if(t.error)e.reject(h._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo,t.result.IL,t.result.inputs||null,t.result.gen_alert_data||null);else{var o=t.result?t.result.metaInfo:null;e.reject(c(t),o)}},h._readableError=function(e,t){return t},h._anyRequestAsyncFail=function(e,t){try{const o=c(JSON.parse(t.responseText));if(o)return e.reject(o)}catch(e){}0===h.PINE_FACADE_URL().indexOf("http")&&s.logError(t.responseText),e.reject(h._readableError(t.status,t.statusText))},h.getPineSourceCode=function(e,t,o){n("Pine","ScriptLib.getPineSourceCode");var s=r.Deferred(),i="?no_4xx="+!!o,a="/get/"+encodeURIComponent(e)+"/"+t+i;return h._pineFacadeAjax("GET",a).done((function(e,t,o){!1===e.success?s.reject(c(e)):s.resolve(e)})).fail((function(e,t,o){h._anyRequestAsyncFail(s,e)})),s.promise()},h.generateAlert=function(e){n("Pine","ScriptLib.generateAlert");var t=r.Deferred(),o=window.user&&window.user.username,s="/gen_alert/?user_name="+encodeURIComponent(o),a={alert_info:e},l=Date.now();return h._pineFacadeAjax("POST",s,a).done((function(e,o,r){i.sendReport("alerts","compilation_ok"),
h._generateAlertAsyncDone(t,e)})).fail((function(e,o,r){i.sendReport("alerts","compilation_error"),h._anyRequestAsyncFail(t,e)})).always((function(){var e=Date.now()-l;i.sendReport("alerts","compilation_time_frame",{value:e})})),t.promise()},h.scriptUpdater=function(){return window.scriptUpdater()},h.requestUserPublishedScripts=function(e,t){if(n("Pine","ScriptLib.requestUserPublishedScripts"),window.is_authenticated){if(t||!h._userPublishedScriptsDfd){h._userPublishedScriptsDfd=r.Deferred();var o=h._userPublishedScriptsDfd;h._pineFacadeAjax("GET","/list?filter=published").done((function(e,t,r){o.resolve(e)})).fail((function(e){h._anyRequestAsyncFail(o,e)}))}o=h._userPublishedScriptsDfd}else o=r.Deferred().resolve([]);return"function"==typeof e&&o.done(e),o.promise()},h.requestInfoForScripts=function(e){return Promise.all([h._pineFacadeAjax("GET","/list?filter=saved"),h._pineFacadeAjax("GET","/list?filter=standard"),h._pineFacadeAjax("GET","/list?filter=candlestick")]).then((function(t){return t.flat().filter((function(t){return e.includes(t.scriptIdPart)}))}))},h.requestBuiltinAndUserScripts=function(){n("Pine","ScriptLib.requestBuiltinAndUserScripts"),s.logNormal("Request built-in and user scripts");var e,t=window.user&&window.user.username,o={},r=new Promise((function(t,r){e=t,o.reject=r}));return Promise.all([h._pineFacadeAjax("GET","/list?filter=saved&user_name="+encodeURIComponent(t)),h._pineFacadeAjax("GET","/list?filter=standard")]).then((function(t){s.logNormal("Request built-in and user scripts finished");var o=t[0],r=t[1];e(o.concat(r))})).catch((function(e){s.logWarn("Request built-in and user scripts finished with fail"),h._anyRequestAsyncFail(o,e)})),r},h.requestScriptInfo=function(e){n("Pine","ScriptLib.requestBuiltinAndUserScripts"),s.logNormal("Request public/user script info");var t=r.Deferred();return h._pineFacadeAjax("GET","/get_script_info/?pine_id="+encodeURIComponent(e)).done((function(e){s.logNormal("Request public/user script info finished"),t.resolve(e)})).fail((function(e){s.logWarn("Request public/user script info finished with fail"),h._anyRequestAsyncFail(t,e)})),t.promise()},h.requestCandlestickScripts=function(){var e;n("Pine","ScriptLib.requestCandlestickScripts"),s.logNormal("Request candlestick scripts");var t={},o=new Promise((function(o,r){e=o,t.reject=r}));return h._pineFacadeAjax("GET","/list?filter=candlestick").done((function(t){s.logNormal("Request candlestick scripts finished"),e(t)})).fail((function(e){s.logWarn("Request candlestick scripts finished with fail"),h._anyRequestAsyncFail(t,e)})),o};var d={time:-1/0,request:null};h.requestFundamentalScripts=function(){if(d.time+6e5>Date.now()&&null!==d.request)return s.logNormal("Return fundamentals from cache"),d.request;s.logNormal("Request fundamental scripts");var e=h._pineFacadeAjax("GET","/list?filter=fundamental");return e.then((function(e){s.logNormal("Request fundamental scripts finished")})),e.fail((function(e){s.logWarn("Request fundamental scripts finished with fail, resetting cache"),d.request=null})),
d.time=Date.now(),d.request=Promise.resolve(e.promise()),d.request},h.publishNew=function(e,t,o,s){n("Pine","ScriptLib.publishNew");var i=r.Deferred(),a=window.user&&window.user.username,l="/publish/new/?access="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(a),d={source:e,extra:JSON.stringify({originalScriptId:o,originalScriptVersion:s})};return h._pineFacadeAjax("POST",l,d).done((function(e,t,o){e.success?i.resolve(e):i.reject(c(e))})).fail((function(e,t,o){h._anyRequestAsyncFail(i,e)})),i.promise()},h.publishNext=function(e,t,o,i){s.logNormal("ScriptLib.publishNext","pine"),n("Pine","ScriptLib.publishNext");var a=r.Deferred(),l=window.user&&window.user.username,d="/publish/next/"+encodeURIComponent(t)+"?user_name="+encodeURIComponent(l),u={source:e,extra:JSON.stringify({originalScriptId:o,originalScriptVersion:i})};return h._pineFacadeAjax("POST",d,u).done((function(e,t,o){e.success||a.reject(c(e)),a.resolve(e)})).fail((function(e,t,o){h._anyRequestAsyncFail(a,e)})),a.promise()},h.lightTranslate=function(e,t){return s.logNormal("ScriptLib.lightTranslate","pine"),n("Pine","ScriptLib.lightTranslate"),new Promise((function(o,r){var n=window.user&&window.user.username,s=`/translate_light/?user_name=${encodeURIComponent(n)}`;t&&(s+=`&pine_id=${encodeURIComponent(t)}`);var i={source:e};h._pineFacadeAjax("POST",s,i).done((function(e,t,n){if(e.success)o(e.result);else{var s=e.result&&c(e.result)||c(e);r(s)}})).fail((function(e,t,o){h._anyRequestAsyncFail({reject:r},e)}))}))},h.getLibList=function(e,t,o){return s.logNormal("ScriptLib.getLibList","pine"),n("Pine","ScriptLib.getLibList"),new Promise((function(r,n){var s="/lib_list?lib_id_prefix="+encodeURIComponent(e);t&&(s+="&ignore_cache=true"),o&&(s+="&ignore_case=true"),h._pineFacadeAjax("GET",s).done((function(e,t,o){r(e)})).fail((function(e,t,o){h._anyRequestAsyncFail({reject:n},e)}))}))},h.getExistingLibraryInfo=async function(e){try{const t=await h.getLibList(e+"/last",!0,!0);if(!t.length)return null;const o=t[0];return{scriptIdPart:o.scriptIdPart,chartId:o.chartId,version:o.version}}catch(e){return null}},e.exports=h},39215:(e,t,o)=>{"use strict";o.d(t,{SeriesDataSource:()=>y,initialRequestOptionsToNumBars:()=>f,parseJapaneseProjectionBars:()=>T});var r=o(185842),n=o(385955),s=o(874651),i=o(357966),a=o(253443),l=o(164253),c=o(276479),h=o(888211),d=o(77357),u=o(976078),_=o(314896);const p=(0,d.getLogger)("Chart.SeriesDataSource");var m;!function(e){e[e.Idle=0]="Idle",e[e.AwaitingConnection=1]="AwaitingConnection",e[e.AwaitingFirstDataUpdate=2]="AwaitingFirstDataUpdate",e[e.Active=3]="Active"}(m||(m={}));let g=1;let C=1;const S=300;function f(e){return e.startDate?e.endDate||e.count?e.endDate?["from_to",e.startDate,e.endDate]:["bar_count",e.startDate,(0,r.ensure)(e.count)]:["from_to",e.startDate]:e.count||S}function E(e){return(0,s.extractExtendedSymbol)(e).symbol}class y{constructor(e,t,o,r){this._extSymbol=null,this._lastResolvedSymbol="",this._createSeriesOverriddenParams=0,this._instanceId=null,this._symbolInstanceId=null,this._resolution=null,
this._timeFrame=null,this._data=new a.SeriesData,this._dataEvents=new h.SeriesDataEvents,this._status=m.Idle,this._turnaroundCounter=1,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),this._ongoingDataUpdate=Promise.resolve(),this._gateway=e,this._turnaroundPrefix=t,this._createSeriesParams=f(o??{count:S}),this._timeFrame=r||null,this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}destroy(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged),this._dataEvents.destroy()}canModifySeries(e,t){const o=!(0,n.deepEquals)(this._extSymbol,e)[0],r=null===this._resolution||!i.Interval.isEqual(this._resolution,t);return o||r}modifySeries(e,t,o=null,a=!1,l=null){a&&(p.logNormal("Due to force flag clearing symbol & resolution to force re-requesting data."),this._extSymbol=null,this._resolution=null);const c=E(e),h=!this.symbolSameAsResolved(c);if(h&&(this._lastResolvedSymbol=""),this._extSymbol&&!h){const t=E(this._extSymbol);(0,s.replaceExtendedSymbol)(e,t)}const d=this._extSymbol,u=this._resolution;if(this._extSymbol=e,this._resolution=t,null===this._instanceId)return void(this._timeFrame=o);const _=!(0,n.deepEquals)(d,e)[0];_&&(0,s.replaceExtendedSymbol)(this._extSymbol,c);const m=null===u||!i.Interval.isEqual(u,t);(_||m||null!==o)&&(this._timeFrame=null,(_||m)&&this._turnaroundCounter++,_&&this._resolveSymbol(),this._gateway.modifySeries(this._instanceId,this.turnaround(),(0,r.ensureNotNull)(this._symbolInstanceId),this._resolution,l,o,this._onMessage.bind(this)),this._dataEvents.fireModified())}requestMoreData(e){null!==this._instanceId&&this._gateway.requestMoreData(this._instanceId,e,this._onMessage.bind(this))}requestMoreTickmarks(e){null!==this._instanceId&&this._gateway.requestMoreTickmarks(this._instanceId,e,this._onMessage.bind(this))}setFutureTickmarksMode(e){null!==this._instanceId&&this._gateway.setFutureTickmarksMode(e)}isStarted(){return this._status!==m.Idle}isActive(){return this._status===m.Active}resolution(){return this._resolution}start(){this.isStarted()?p.logNormal("start: data source is already started, nothing to do"):((0,r.assert)(null!==this._extSymbol,"symbol must be set before start"),(0,r.assert)(null!==this._resolution,"resolution must be set before start"),this._gateway.isConnected().value()?this._createSeries():this._changeStatusTo(m.AwaitingConnection))}stop(){this.isStarted()?(null!==this._instanceId&&(this._gateway.removeSeries(this._instanceId),this._instanceId=null),this._symbolInstanceId=null,this._changeStatusTo(m.Idle)):p.logNormal("stop: data source is already stopped, nothing to do")}instanceId(){return this._instanceId}data(){return this._data}setData(e){this._data=e}setTimeframe(e){this._timeFrame=e}clearData(){this.isStarted()?this._enqueueUpdate((()=>this._clearDataImpl())):this._clearDataImpl()}dataEvents(){return this._dataEvents}turnaround(){return`${this._turnaroundPrefix}${this._turnaroundCounter}`}symbolInstanceId(){return this._symbolInstanceId}symbol(){return this._extSymbol}
updateExtSymbol(e){this._extSymbol=e}moveData(e){return this._enqueueUpdate((()=>this._data.moveData(e)))}setInitialRequestOptions(e){this._createSeriesOverriddenParams=f(e)}symbolSameAsResolved(e){return null!==this._extSymbol&&(0,_.symbolSameAsResolved)(e,E(this._extSymbol),this._lastResolvedSymbol)}resolvedSymbol(){return null===this._extSymbol?null:E(this._extSymbol)}_resolveSymbol(){null!==this._extSymbol&&(this._symbolInstanceId=this._gateway.resolveSymbol("sds_sym_"+g++,(0,s.encodeExtendedSymbolOrGetSimpleSymbolString)(this._extSymbol),this._onMessage.bind(this)))}_clearDataImpl(){this._data.clear(),this._dataEvents.fireCleared()}_changeStatusTo(e){(0,r.assert)(this._status!==e,"Source and destination status should be distinct"),p.logNormal(`Status changed from ${m[this._status]} to ${m[e]}`),this._status=e}_createSeries(){(0,r.assert)(this._status!==m.Active,'Status should not be "Active" when creating a study'),this._instanceId="sds_"+C++,this._resolveSymbol();const e=this._createSeriesOverriddenParams||this._createSeriesParams;this._createSeriesOverriddenParams&&(this._createSeriesOverriddenParams=0),this._gateway.createSeries(this._instanceId,this.turnaround(),(0,r.ensureNotNull)(this._symbolInstanceId),(0,r.ensureNotNull)(this._resolution),e,this._timeFrame,this._onMessage.bind(this)),this._timeFrame=null,this._changeStatusTo(m.AwaitingFirstDataUpdate),this._dataEvents.fireCreated(this._instanceId)}_onGatewayIsConnectedChanged(e){e?this._onGatewayConnected():this._onGatewayDisconnected()}_onGatewayConnected(){this._status===m.AwaitingConnection&&this._createSeries()}_onGatewayDisconnected(){this._status!==m.Idle&&this._status!==m.AwaitingConnection&&(this._instanceId=null,this._changeStatusTo(m.AwaitingConnection)),this._turnaroundCounter=1}_onMessage(e){this._enqueueUpdate((()=>this._onMessageImpl(e)))}async _onMessageImpl(e){switch(e.method){case"symbol_resolved":{const[t,o]=e.params;if(t!==this._symbolInstanceId){null!==this._symbolInstanceId&&p.logNormal(`Resolve for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolResolved(o);break}case"symbol_error":if(e.params[0]!==this._symbolInstanceId){null!==this._symbolInstanceId&&p.logNormal(`Symbol error for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolError(e);break;case"series_timeframe":{const[t,o,r,n,s,i,a]=e.params;if(!this._checkTurnaround(t,o)){p.logNormal(`Time frame for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${o})`);break}this._onSeriesTimeFrame(r,n,s,i,a);break}case"series_error":{const[t,o]=e.params;if(!this._checkTurnaround(t,o)){p.logNormal(`Series error for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${o})`);break}this._onSeriesError(e.params[2]);break}case"series_loading":{const[t,o]=e.params;if(!this._checkTurnaround(t,o))break;this._onSeriesLoading(e.time);break}case"series_completed":{const[t,o,r,n]=e.params;if(!this._checkTurnaround(t,r)){
p.logNormal(`Series completed for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${r})`);break}this._onSeriesCompleted(o,e.time,n);break}case"data_update":if(!this._checkTurnaround(e.params.customId,e.params.turnaround)){p.logNormal(`Data update for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e.params.customId} (${e.params.turnaround})`);break}await this._onDataUpdate(e.params.plots,e.params.nonseries,e.params.lastBar);break;case"clear_data":{if(e.params.turnaround!==this.turnaround()){p.logNormal(`Clear data for old data, expected: ${this.turnaround()}, actual ${e.params.turnaround}`);break}const t=this._data.first();this._clearDataImpl(),this._dataEvents.fireDataUpdated(void 0,!1,null,!1,t);break}}}_onSeriesError(e){let t,o;if("string"==typeof e)o={error:e},t=e;else if(o=e,e.ctx){const o={};Object.entries(e.ctx).forEach((([e,t])=>{o[e]=t.toString()})),t=e.error.format(o)}else t=e.error;if(t.startsWith("study_not_auth:")){const e=t.split(":",2)[1].split("@",2)[0];if(["BarSetRenko","BarSetPriceBreak","BarSetKagi","BarSetPnF"].includes(e))this._dataEvents.fireChartTypeNotPermitted(e);else{if("BarSetSpread"===e)return void this._dataEvents.fireIntradaySpreadNotPermitted();if("BarSetRange"===e){const e=`${(0,r.ensureNotNull)(this._extSymbol).inputs.range}R`;this._dataEvents.fireCustomIntervalNotPermitted(e)}}}else{if(t.startsWith("unsupported"))return void this._dataEvents.fireUnsupportedResolutionRequested();"resolution_not_entitled"===t?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===t?this._dataEvents.fireCustomIntervalNotPermitted((0,r.ensureNotNull)(this._resolution)):"seconds_not_entitled"===t?this._dataEvents.fireSecondsIntervalNotPermitted():"ticks_not_entitled"===t&&this._dataEvents.fireTicksIntervalNotPermitted()}this._dataEvents.fireSeriesError(o)}_onSeriesTimeFrame(e,t,o,r,n){this._dataEvents.fireSeriesTimeFrame(e,t,o,r??!0,n)}_onSymbolError(e){if(e.params[1]===c.permissionDenied)switch(e.params[2]){case c.SymbolErrorPermissionDeniedReason.Symbol:this._dataEvents.fireSymbolNotPermitted(e.params[3]);break;case c.SymbolErrorPermissionDeniedReason.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(e.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(e.params[2])}else e.params[1]===c.invalidSymbol&&this._dataEvents.fireSymbolInvalid();this._dataEvents.fireSymbolError(e.params[1])}_onSymbolResolved(e){this._lastResolvedSymbol=(0,r.ensureNotNull)((0,u.extractSymbolNameFromSymbolInfo)(e,"")),this._dataEvents.fireSymbolResolved(e)}async _onDataUpdate(e,t,o){this._onDataUnpacked(e,o,await T(t))}_enqueueUpdate(e){return this._ongoingDataUpdate=this._ongoingDataUpdate.then(e,e),this._ongoingDataUpdate}_onDataUnpacked(e,t,o){if(this._status===m.Idle)return;this._status===m.AwaitingFirstDataUpdate&&(this._changeStatusTo(m.Active),this._clearDataImpl());const r=this._data.bars().size(),n=this._data.first(),s=this._data.bars().firstIndex(),i=this._data.mergeRegularBars(e)
;null!==o&&(this._data.nsBars().clear(),this._data.nsBars().merge(o.projectionPlots),this._data.lastProjectionPrice=o.lastPrice,null!==o.boxSize&&(this._data.boxSize=o.boxSize),this._data.reversalAmount=o.reversalAmount);const a=null===s,l=a||null!==i&&i.index<s;this._dataEvents.fireDataUpdated(t,l,i,a,n),r!==this._data.bars().size()&&null!==i&&this._dataEvents.fireBarReceived(i)}_onSeriesLoading(e){this._dataEvents.fireLoading(e)}_onSeriesCompleted(e,t,o){this._dataEvents.fireCompleted({updateMode:e,time:t,flags:o})}_checkTurnaround(e,t){return this._instanceId===e&&(void 0===t||t===this.turnaround())}}async function T(e){if(void 0===e)return{projectionPlots:[],boxSize:null};if(""===e.d||"nochange"===e.indexes)return null;const t=await(0,l.unpackNonSeriesData)(e.d);if(null===t||t.indexes_replace)return null;const o=e.indexes,{bars:r,price:n,boxSize:s,reversalAmount:i}=t.data;return{lastPrice:n,projectionPlots:(r||[]).map((e=>{let t;return"factor"in e?t=e.factor:"additionalPrice"in e&&(t=e.additionalPrice),{index:o[e.time],value:[0,e.open,e.high,e.low,e.close,e.volume,t]}})),reversalAmount:i,boxSize:s}}},864870:(e,t,o)=>{"use strict";o.d(t,{DwgExtend:()=>r,convertPointsToScreenDimension:()=>a,doesItemAffectVisibleRange:()=>l,isExtendInSameDirection:()=>i});var r,n=o(185842);function s(e,t){return e===r.None?t:t===r.None?e:e===r.Both||t===r.Both?r.Both:e===t?t:r.Both}function i(e,t){return e===r.Both||e===t}function a(e,t,o,i,a,l,c,h,d,u){let _,p;if(null===e&&null===o){if(a!==r.Right&&a!==r.Both)return null;a=r.Both,_=0,p=h}else null===e?(_=c.indexToCoordinate((0,n.ensureNotNull)(o)-1),a=s(a,r.Left)):_=c.indexToCoordinate(e),null===o?(p=c.indexToCoordinate((0,n.ensureNotNull)(e)-1),a=s(a,r.Right)):p=c.indexToCoordinate(o);const m=_,g=l.priceToCoordinate(t,d),C=p,S=l.priceToCoordinate(i,d);return void 0!==u?(u.x1=m,u.y1=g,u.x2=C,u.y2=S,u.extend=a,u):{x1:m,y1:g,x2:C,y2:S,extend:a}}function l(e,t,o,n,s){let i=!1;switch(o){case r.Both:i=!0;break;case r.Right:i=null===t||null===e||e<=s;break;case r.Left:i=null===t||t>=n;break;default:null!==e&&null!==t?i=(e>=n||t>=n)&&(e<=s||t<=s):null!==e&&null===t?i=e<=s:null===e&&null!==t&&(i=t>=n)}return i}!function(e){e.None="n",e.Left="l",e.Right="r",e.Both="b"}(r||(r={}))},81188:(e,t,o)=>{"use strict";o.d(t,{containsTpoTimePointIndexes:()=>i,dematerializeTpo:()=>l,isTpoInBarsRange:()=>c,materializeTpo:()=>a});var r=o(185842),n=o(395079),s=o(28783);const i=!0;function a(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const o=t[e.firstBarTime],s=t[e.lastBarTime];return o===n.INVALID_TIME_POINT_INDEX||s===n.INVALID_TIME_POINT_INDEX?null:((0,r.assert)(o<=s,"firstBarTime should not exceed lastBarTime"),{id:e.id,firstBarTime:o,lastBarTime:s,priceRange:e.priceRange,times:e.times})}function l(e,t,o){return{id:t,firstBarTime:(0,s.ensureTimePointIndexIndex)(o.indexOf(e.firstBarTime)),lastBarTime:(0,s.ensureTimePointIndexIndex)(o.indexOf(e.lastBarTime)),priceRange:e.priceRange,times:e.times}}function c(e,t){return!(e.lastBarTime<t.firstBar()||e.firstBarTime>t.lastBar())}
},935490:(e,t,o)=>{"use strict";o.d(t,{PersistentEventSourceTransport:()=>a});var r=o(77357),n=o(353741),s=o(241271);const i=(0,r.getLogger)("PersistentWebsocketTransport");class a extends s.PersistentTransport{constructor(e){super(e,i),this._specializedErrorHandlerBound=this._specializedErrorHandler.bind(this)}_createNativeTransport(e){const t=new EventSource(e,{withCredentials:!0});return t.addEventListener("error",this._specializedErrorHandlerBound),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._specializedErrorHandlerBound),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(n.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}_specializedErrorHandler(e){e.eventPhase===EventSource.CLOSED?this._socketCloseHandler(e):this._socketErrorHandler()}}},241271:(e,t,o)=>{"use strict";o.d(t,{PersistentTransport:()=>l});var r=o(353741),n=o(519639),s=o(168509),i=o(875500),a=o(123817);class l{constructor(e,t,o){this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new s.WatchedValue(r.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._maxReconnectReachedEventDelegate=new i.Delegate,this._successReconnectReachedEventDelegate=new i.Delegate,this._shouldReconnect=!0,this._maxReconnectCount=null,this._reconnectTimeoutId=0,this._connectAbortController=null,this._tryReconnect=()=>{if(this._disconnect(),this._shouldReconnect){const e=this._getReconnectTimeout();this._logger.logNormal(`Sleeping some time before reconnect ${e}ms`),this._reconnectTimeoutId=setTimeout(this._tryReconnectImpl.bind(this),e)}else this._logger.logNormal("Skip reconnecting because of shouldReconnect state")},this._onOfflineHandler=()=>{this._removeOnOfflineListener(),this._logger.logInfo("Network status changed to offline - trying to reconnect"),this._tryReconnect()},this._logger=t,this._messageHandler=e,this._closeHandler=o,window.addEventListener("unload",(()=>{t.logNormal("Unload event comes - disconnecting without reconnect after that..."),this._shouldReconnect=!1,this._disconnect()}),!1)}setUrl(e){if(this._url===e)return Promise.resolve();const t=this._connectionStatus.value()!==r.ConnectionStatus.Closed;return t&&this._disconnect(),this._url=e,t?this.connect():Promise.resolve()}url(){return this._url}connect(){return this._connectImpl()}setMaxReconnectCount(e){this._maxReconnectCount=e}connectionStatus(){return this._connectionStatus.readonly()}disconnect(){this._shouldReconnect=!1,this._disconnect()}maxReconnectReachedEvent(){
return this._maxReconnectReachedEventDelegate}successReconnectReachedEvent(){return this._successReconnectReachedEventDelegate}async _prepareParamsForConnection(e){}_disconnect(){this._connectAbortController?.abort(),this._connectAbortController=null,clearTimeout(this._reconnectTimeoutId),this._reconnectTimeoutId=0,this._connectionStatus.value()!==r.ConnectionStatus.Closed?this._socket?(this._logger.logNormal(`Closing connection to: ${this._socket.url}, currentStatus: ${r.ConnectionStatus[this._connectionStatus.value()]}`),this._disconnectTransport()):this._logger.logNormal("Disconnecting without socket - probably within preparing, it should be already scheduled for aborting"):this._logger.logNormal("Attempt to close connection but it is closed already")}_onErrorCallback(){this._logger.logInfo("Connection is closed by error"),this._tryReconnect()}_onCloseCallback(e){this._logger.logInfo(`Connection is closed - code=${e.code} msg=${e.reason}`),this._closeHandler?.(e),this._tryReconnect()}_tryReconnectImpl(){return null!==this._maxReconnectCount&&this._reconnectCount===this._maxReconnectCount?(this._logger.logWarn("Maximum attempts to reconnect to websocket reached"),void this._maxReconnectReachedEventDelegate.fire()):(this._reconnectCount+=1,this._logger.logInfo(`Reconnecting count: ${this._reconnectCount}`),navigator.onLine?(this._logger.logInfo("Network status: online - trying to connect"),void this.connect()):(this._logger.logInfo("Network status: offline - wait until online"),void(this._onlineCancellationToken=(0,n.callWhenOnline)((()=>{this._logger.logInfo("Network status changed to online - trying to connect"),this.connect()})))))}_onOpenCallback(){this._logger.logNormal("Connection opened"),this._reconnectCount>0&&this._successReconnectReachedEventDelegate.fire(),this._reconnectCount=0,this._connectionStatus.setValue(r.ConnectionStatus.Open)}_onMessageCallback(e){this._messageHandler(e.data)}_getReconnectTimeout(){return this._reconnectCount<5?300:5e3}_setOnOfflineListener(){window.addEventListener("offline",this._onOfflineHandler)}_removeOnOfflineListener(){window.removeEventListener("offline",this._onOfflineHandler)}async _connectImpl(){if(this._connectionStatus.value()!==r.ConnectionStatus.Closed)return void this._logger.logNormal("Attempt to open connection but it is not closed");this._socket&&(this._logger.logError("Something went wrong - code 0x2"),this.disconnect()),this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),this._logger.logNormal(`Connecting to ${this._url}`),this._shouldReconnect=!0,this._connectAbortController=new AbortController;const e=this._connectAbortController.signal;try{if(this._connectionStatus.setValue(r.ConnectionStatus.Connecting),await this._prepareParamsForConnection(e),e.aborted)throw(0,a.createAbortError)();this._socket=this._createNativeTransport(this._url),this._setOnOfflineListener()}catch(e){this._connectionStatus.setValue(r.ConnectionStatus.Closed),(0,a.skipAbortError)(e)}finally{this._connectAbortController=null}}}},
874392:(e,t,o)=>{"use strict";var r;function n(e){return!(!e||!Object.keys(e).length)}function s(e){return!!e.is_trial}function i(e){return!!e?.pro_plan}function a(e){return i(e)&&!s(e)}function l(e){return e.type===r.ProPlan}function c(e){return e.type===r.Exchange}function h(e){return e?c(e)||function(e){return e.type===r.Coins}(e)?e.text_id??"":e.discount_text_id??e.text_id??"":""}o.d(t,{ProductType:()=>r,getProductId:()=>h,isExchange:()=>c,isPaidPro:()=>a,isPlan:()=>l,isPro:()=>i,isProductDefined:()=>n,isTrial:()=>s}),function(e){e[e.ProPlan=1]="ProPlan",e[e.NewsFeed=3]="NewsFeed",e[e.Exchange=4]="Exchange",e[e.Connection=6]="Connection",e[e.Coins=8]="Coins",e[e.ScriptPackage=9]="ScriptPackage"}(r||(r={}))},545720:(e,t,o)=>{const r=o(199827);e.exports=r,r(document).ajaxSend(((e,t,o)=>{o.crossDomain&&!o.forceLanguageHeader||(window.locale?t.setRequestHeader("X-Language",window.locale):console.warn("window.locale is not defined"))}))},842645:(e,t,o)=>{"use strict";o.d(t,{getProPlanDetailsForUser:()=>a,getProPlanWeight:()=>i});o(537244);var r=o(641077),n=o(131890),s=o(915503);function i(e){return window.pro?"free"===e?-1:window.pro.getProduct((0,r.getProductForTrial)(e)).upgrade_weight:0}async function a(){const e=await(0,n.fetch)("/pro-plans/profile/"),t=await e.json();if(e.ok)return t;if(403===e.status){const o=t;throw new s.ApiError(o.detail,e.status,o.code)}throw new Error(`Unable to handle unexpected response: ${String(e.text())}`)}},970013:(e,t,o)=>{"use strict";o.d(t,{Pro:()=>c});var r=o(131890),n=o(874392),s=o(875500),i=o(598944),a=o(77357);const l=(0,i.getFreshInitData)();class c{constructor(e){this.packagesUpdated=new s.Delegate,this.PRODUCT_TYPES={pro_plan:1,exchange:4,connection:6,coins:8},this._products={},this._invalidShopConf=!1,this._freeProductIds=["tv-scripting","tv-basicstudies","tv-prostudies","Script$USER","Script$EDGR","ESD$TV"],this._discounts={},this._offers=[],this._paidExchanges=[],this._logger=(0,a.getLogger)("Pro"),e&&(this._offers=e.offers??[],this._paidExchanges=e.paid_exchanges??[],this._invalidShopConf=!0,"undefined"!=typeof window&&window.loginStateChange.subscribe(this,this.onLoginStateChange))}isDiscountProductId(e){return e in this._discounts}hasPackage(e){return this._offers.includes(e)||this._freeProductIds.includes(e)}async updateShopConf(e=!1){return void 0!==this._shopConfPromise||(this._shopConfPromise=(0,r.fetch)("/market/shopconf/",{credentials:"include"}).then((async t=>{const o=await t.json();return this._products=o.all_products&&JSON.parse(o.all_products)||{},this._discounts=o.discounts&&JSON.parse(o.discounts)||{},this._offers=o.offers&&JSON.parse(o.offers)||[],this._paidExchanges=o.paid_exchanges&&JSON.parse(o.paid_exchanges)||[],this._invalidShopConf=!1,delete this._shopConfPromise,e||this.packagesUpdated.fire(),o})).catch((()=>{throw this._logger.logError("Update shopconf error"),delete this._shopConfPromise,Error("Update shopconf error")}))),this._shopConfPromise}invalidateShopConf(){this._invalidShopConf=!0}isInvalidShopConf(){return!!this._invalidShopConf}
ensureValidShopConf(){return new Promise((e=>this.runOrUpdate(e)))}onLoginStateChange(e){e||this.updateShopConf()}runOrUpdate(e,t){this.isInvalidShopConf()?this.updateShopConf(t).then(e):e()}getIDCExchanges(e){const t=this._products;if(l)if(e){if(l.idc_delay_exchanges_list)return l.idc_delay_exchanges_list}else if(l.idc_exchanges_list)return l.idc_exchanges_list;return Object.keys(t).filter((o=>{const r=t[o];return!!(0,n.isExchange)(r)&&(e?r.idc_service_codes_delay:r.idc_service_codes)})).map((e=>t[e].exchange))}getProduct(e){if(e in this._products)return this._products[e];if(this.isDiscountProductId(e)){const t=this._discounts[e],o={discount_text_id:e,...this._products[t.product]};return void 0!==t.fixed_cost&&(o.fixed_cost=t.fixed_cost),void 0!==t.extra_days&&(o.extra_days=t.extra_days),void 0!==t.billing_cycle&&(o.billing_cycle=t.billing_cycle),void 0!==t.next_billing_cycle&&(o.next_billing_cycle=t.next_billing_cycle),o}return{}}async findProduct(e){if(this.isInvalidShopConf())try{await this.updateShopConf()}catch{}return this.getProduct(e)}getDiscountProduct(e){return this._discounts[e]??{}}isOffer(e,t){return Object.keys(this._discounts).filter((e=>!this._discounts[e].expired&&this._discounts[e].offer_type===t)).includes(e)}getUserExchanges(){const e=window.pro?.offers();return e?e.map((e=>this.getProduct(e))).filter((e=>(0,n.isExchange)(e))):[]}getUserPaidExchanges(){const e=window.pro?.paidExchanges();return e?e.map((e=>this.getProduct(e))):[]}getUserExchangeByPerm(e){return this.getUserExchanges().find((t=>t.exchange===e))}getExchange(e){const t=this.getProductsByType(n.ProductType.Exchange);let o;for(let r=0;r<t.length;r+=1)if(o=t[r],o.exchange===e||o.included_exchanges&&o.included_exchanges.includes(e))return o;return{}}getProductsByType(e){return Object.keys(this._products).filter((t=>this._products[t].type===e)).map((e=>this.getProduct(e)))}getProPlanProducts(){return this.getProductsByType(n.ProductType.ProPlan).filter((e=>!e.is_expert))}getExpertPlanProducts(){return this.getProductsByType(n.ProductType.ProPlan).filter((e=>e.is_expert))}getPaidExchangesForProfessional(){return this.getProductsByType(n.ProductType.Exchange).filter((e=>e.paid_for_expert))}getProPlanProductsList(){return this.getProPlanProducts().map((e=>e.text_id))}getExpertPlanProductsList(){return this.getExpertPlanProducts().map((e=>e.text_id))}isExpertProduct(e){return this.getExpertPlanProductsList().includes(e)}isPro(){return(0,n.isPro)(window.user)}getSuperProduct(e){}getStudiesOrder(){return[]}userHasRealtimeForExchange(e){const t=(e??"").toLowerCase().replace("exchange-",""),o=this.getExchange(t);if(!(0,n.isProductDefined)(o))return!1;if(this._offers.includes("exchange-"+o.exchange))return!0;if(o.included_exchanges)for(let e=0;e<o.included_exchanges.length;e+=1)if(this._offers.includes("exchange-"+o.included_exchanges[e]))return!0;return!1}hasRealtimeForExchange(e,t){const o=this.getProductsByType(n.ProductType.Exchange),r=(e??"").toLowerCase();for(let e=0;e<o.length;e+=1){const s=o[e]
;if(s.exchange===r||(s.included_exchanges||[]).includes(r)){if(s.disabled&&!s.included_exchanges)return!1;if(!t)return!0;if(s.included_exchanges){let e;for(let o=0;o<s.included_exchanges.length;o+=1){const r=this.getProduct("exchange-"+s.included_exchanges[o]);if((0,n.isProductDefined)(r)&&(0,n.isExchange)(r)&&this._exHasRealtimeForType(r,t)){e=!0;break}}if(!e)return!1}else if(!this._exHasRealtimeForType(s,t))return!1;return!0}}return!1}offers(){return this._offers}paidExchanges(){return this._paidExchanges}isSupportAvailable(){return Boolean(window.user?.is_support_available||l.is_support_available)}isSupportBanned(){return Boolean(window.user?.is_support_banned||l.is_support_banned)}discounts(){return this._discounts}hash(){const e=this._offers.slice(0);e.sort();const t={offers:e};return JSON.stringify(t)}_exHasRealtimeForType(e,t){return!("stock"===t&&!e.is_stocks)&&(!("index"===t&&!e.is_indices)&&!("futures"===t&&!e.is_futures))}}"undefined"!=typeof window&&window.TradingView&&(window.TradingView.Pro=c)},566232:(e,t,o)=>{"use strict";function r(e){return e+""}o.d(t,{appendEllipsis:()=>r})}}]);